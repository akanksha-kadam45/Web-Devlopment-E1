(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[22],{1101:function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var l=o(3),i=o(28),d=o(92),n=o(106),c=o(85);const a={CLEAR_ALL_MSG:{MSGTXT1:"clearCartAwareText",MSGTXT2:"clearCartActionText",MSGTXT3:"clearCartCompleteText"},CLEAR_ALL:"continue",CANCEL:"cancel",TO_CHANGE_LANGUAGE:"toChangeLanguage"};var r=o(16),s=o(6),u=o(5),v=o(35),O=o(15),b=o(0),j=o(80),m=o(2);const p=e=>{const t=Object(i.c)((e=>e.cartReducer)),{cartData:o={}}=t||{},p=Object(i.c)((e=>e.tenantReducer)),{tenantId:h=""}=p||{},{userOrderState:E,userOrderStateDispatch:C}=Object(l.useContext)(c.a),{modalToOpenOnConfirm:f,modalOpenFrom:A,confirmCallBack:y}=E,{CartError:S}=O.a,T=Object(i.b)(),{CLEAR_ALL_MSG:g,CLEAR_ALL:R,CANCEL:D,TO_CHANGE_LANGUAGE:N}=a;((e,t,o)=>{e.langSelector?t.MSGTXT3=o:t.MSGTXT3})(e,g,N);const{SHOW_CLEAR_CART_ALERT:I,DISPOSITION_DATA:_,SEARCH_ORDER_DATA:x,SCHEDULE_ORDER_DATA:k,clearCartChangeFlag:w,orderTypeAlertTitle:P,searchStoreAlertTitle:L,RESET_DELIVERY_ADDRESS_LINE:F,CLEAR_CART_CONFIRM_CANCEL_MODAL:M,ORDER_CAPACITY_DATA_UPDATED:U}=r.a,H=Object(u.Sd)(E.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):E.dispositionNew,V=()=>{C({type:M,value:{}}),C({type:b.Oe,value:{selectedLanguage:""}}),C({type:I,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!1,languageToChange:""}}),A===w&&C({type:k,value:{showScheduleOrderCatering:!0,selectedStoreInfo:H.store,changeFlow:!0}})};return Object(m.jsx)(n.a,{handleClose:V,classNames:"clear-cart-modal",CartAlertForm:Object(m.jsx)(d.a,{splitTitle:g,imageSrc:S,altText:"cart-error",confirmButtonText:Object(s.translateWithI18Next)(R),cancelButtonText:Object(s.translateWithI18Next)(D),cancelHandler:V,confirmHandler:()=>{if(o.discountLines.length>0){let e=o.discountLines.map((e=>e.id));T(Object(v.n)({params:{basketId:o.id},tenantId:h,shouldClearCart:!0},e))}else T(Object(v.o)({basketId:o.id,tenantId:h}));T(Object(j.c)({key:b.gd.VIEW_PRODUCT})),localStorage.removeItem(b.gd.ADD_TO_ORDER),T(Object(v.u)(new Date)),C({type:I,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!0}}),y&&y(),f===P?(C({type:F}),C({type:_,value:{showDisposition:!0}}),C({type:k,value:{showScheduleOrderCatering:!1}}),C({type:x,value:{showSearchStore:!1}}),C({type:U,value:{orderCapacityDataUpdated:!1}}),C({type:M,value:{}})):f===L&&C({type:x,value:{showSearchStore:!0}})}})})}},1107:function(e,t,o){"use strict";var l=o(3),i=o(85),d=o(5),n=o(12);t.a=()=>{const{userOrderState:e}=Object(l.useContext)(i.a),t=Object(l.useMemo)((()=>(Object(d.Sd)(e.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):null===e||void 0===e?void 0:e.dispositionNew)||{}),[null===e||void 0===e?void 0:e.dispositionNew]);return{dispositionNew:t,getUnixTimestampFromDisposition:()=>Object(n.A)(t.date+" "+t.selectedTime,"YYYY-MM-DD hh:mm")}}},1140:function(e,t,o){"use strict";var l=o(3),i=o(28),d=o(20),n=o.n(d),c=o(415),a=o(421),r=o(57),s=o(1107),u=o(12),v=o(5),O=o(0);t.a=function(){let{enabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object(i.b)(),{dispositionNew:o}=Object(s.a)(),d=Object(i.c)((e=>e.specialEventReducer||{})),b=Object(i.c)((e=>e.cartReducer||{})),{isLoading:j}=d,{cartData:m}=b,p=e=>(null===e||void 0===e?void 0:e.toUpperCase())===O.Ff,h=Object(l.useMemo)((()=>d.specialEventItemAvailability||[]),[d.specialEventItemAvailability]),E=Object(l.useMemo)((()=>{const{type:e}=o||{},t=Object(c.a)(p,v.Mb);return!!e&&t(e)}),[o]),C=Object(l.useCallback)((function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=h.find((t=>{let{id:o}=t;return o.includes(e)}));if(!l)return!1;const i=null===m||void 0===m||null===(t=m.foodLines)||void 0===t?void 0:t.find((t=>{var o;return(null===t||void 0===t||null===(o=t.item)||void 0===o?void 0:o.id)===e})),d=(null===i||void 0===i?void 0:i.quantity)||0,{available:n,stock:c}=l;return n&&parseInt(c)>0&&o?d<=parseInt(c):d<parseInt(c)}),[h,null===m||void 0===m?void 0:m.foodLines]),f=Object(l.useCallback)((e=>{let{date:o,storeId:l,time:i}=e;if(!o||!l||!i)return!1;const d=r.a.formatValue(r.a.dayjs(i,O.sb.h_mm_A),O.sb.HHmm),n=Object(u.A)("".concat(o," ").concat(i),O.sb.YYYY_MM_DD_h_mm_A);t(Object(a.a)(l,n,d))}),[t]),A=Object(l.useCallback)((()=>{if(!E||j)return!1;const{date:e,selectedTime:t,store:l}=o;f({date:e,storeId:l.id,time:t})}),[o,f,E,j]);Object(l.useEffect)((()=>{e&&n()(h)&&A()}),[A,e,h]);return{isAllCartProductsAvailable:()=>{var e;const t=null===b||void 0===b||null===(e=b.cartData)||void 0===e?void 0:e.foodLines;return(null===t||void 0===t?void 0:t.every((e=>{var t;return C(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.id,!0)})))||!1},eventAvailabilities:h,fetchEventItemAvailability:A,fetchEventItemAvailabilityForDisposition:e=>{if(!E)return!1;f(e)},getEventItemAvailability:C,isEvent:E}}},1245:function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return i}));const l="outOfService",i="CLOSED";t.c={TAKEAWAY:"PICKUP",ORDER_TYPE_STORE_INFO_FROM:"from",ORDER_TYPE_STORE_INFO_TO:"to",ORDER_TYPE_STORE_INFO_AT:"at",HOMEPATH:"",HOMEPATHSELECT:"/"}},1266:function(e,t,o){"use strict";var l=o(73),i=o(0),d=o(28);t.a=()=>{const e=Object(d.b)();return{fetchData:t=>{let{storeId:o,timeStamp:d,dispositionType:n}=t;if(!o||!d)throw new Error("storeId, timeStamp, and dispositionType are required");const c={storeId:o,dateTimeEpoch:d};e((null===n||void 0===n?void 0:n.toUpperCase())===i.Cf?Object(l.k)(c):Object(l.m)(c))}}}},1292:function(e,t,o){"use strict";o.d(t,"b",(function(){return p}));var l=o(3),i=o(28),d=o(5),n=o(0),c=o(46),a=o(12),r=o(6),s=o(4),u=o(15),v=o(132),O=o(80),b=o(1245),j=o(2);const{GoogleMapLocationImage:m}=u.a,p=(e,t,o,l,i)=>{var n;const c=null!==i&&void 0!==i&&i.showComma?null===t||void 0===t?void 0:t.deliveryAddress:null===t||void 0===t||null===(n=t.deliveryAddress)||void 0===n?void 0:n.replace(/,/g,"");return null!==e&&void 0!==e&&e.formatAddressWithDeliveryVal&&!o?(e=>{const{formatAddressWithDeliveryVal:t,selectedLineValueAddress:o,NonFormattedAddress:l=""}=e;return o?"".concat(o," ").concat(l):t})(e):((e,t,o,l)=>{var i;return null===e||void 0===e||!e.selectedLineValueAddress||null!==e&&void 0!==e&&null!==(i=e.reorderFlag)&&void 0!==i&&i.isReorderFlow?Object(d.m)(l,e)?null===e||void 0===e?void 0:e.NonFormattedAddress:t:"".concat(null===e||void 0===e?void 0:e.selectedLineValueAddress,", ").concat(l?null===e||void 0===e?void 0:e.NonFormattedAddress:t)})(e,c,0,l)};t.a=e=>{var t,o,h,E,C,f,A,y;const{dispositionType:S,toOrFrom:T,dispositionNew:g,alt:R}=e,D=null===S||void 0===S?void 0:S.toUpperCase(),N=Object(i.c)((e=>e.tenantReducer)),I=null===N||void 0===N||null===(t=N.savedAddressPage)||void 0===t?void 0:t.showAddressWithApartment,{componentOptions:_,scheduleOrderDateFormat:x,dateFormat:k}=N,w=null===_||void 0===_||null===(o=_.web)||void 0===o?void 0:o.dispositionConfig,{enableScheduleOrder:P=!1,enableClickCollectScheduleOrder:L=!1}=w,F=null===_||void 0===_||null===(h=_.web)||void 0===h?void 0:h.scheduledDelivery,{allowScheduleOrderForDispositions:M=[]}=F,{date:U="",store:H={},time:V=""}=g,G=L&&(null===M||void 0===M?void 0:M.includes(H.service)),W=P||G||D===n.Jb.CHRISTMAS_ORDERING,{MMMM_D:Y}=n.sb,[B,K]=Object(l.useState)(Object(d.de)(window.innerWidth)),J=Object(v.b)(O.b),X=V!==n.s&&(null===(E=Object(a.h)(U,Y))||void 0===E?void 0:E.split(" "));let q=null!==_&&void 0!==_&&_.showComma?",":"";Object(l.useEffect)((()=>{window.addEventListener(n.ye,Q)}),[B]);const Q=()=>{K(Object(d.de)(window.innerWidth))},z=x?Object(a.h)(U,k):Object(r.translateWithI18Next)(X[0])+" "+X[1],Z=x?Object(a.S)(V,null===n.sb||void 0===n.sb?void 0:n.sb.h_mm_A,null===n.sb||void 0===n.sb?void 0:n.sb.HH_mm):null===V||void 0===V||null===(C=V.replace(n.Ze,""))||void 0===C?void 0:C.toLowerCase();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"store-location",children:[Object(j.jsx)(c.a,{srcFile:m,alt:R||"location-icon",className:"content-location-img"}),Object(j.jsx)("div",{className:"store-content",children:Object(j.jsxs)("span",{className:"store-address","data-testid":"store-address",children:["".concat(Object(d.Kb)(D))," ",Object(j.jsx)("span",{className:"store-frmText",children:"".concat(T,": ")}),D===n.Jb.DELIVERY?Object(d.Hf)(p(J,g,x,I,_),36,!1):Object(d.Sc)(null===H||void 0===H?void 0:H.name)]})})]}),W&&Object(j.jsxs)("div",{className:"content-time",children:[Object(j.jsx)(c.a,{srcFile:null===u.a||void 0===u.a?void 0:u.a.Clock,alt:R||"location-icon",className:"clock-img"}),Object(j.jsx)("span",{className:"content-store",children:V===n.s?null!==H&&void 0!==H&&null!==(f=H.summary)&&void 0!==f&&f.orderingAttribute?Object(d.Fd)(H)?Object(r.translateWithI18Next)(s.a.ASAP):Object(r.translateWithI18Next)(b.b):Object(r.translateWithI18Next)(s.a.ASAP):Object(j.jsxs)(j.Fragment,{children:[!x&&!B&&Object(r.translateWithI18Next)(Object(d.ed)(U,null===H||void 0===H||null===(A=H.summary)||void 0===A?void 0:A.timeZoneIANA))," ".concat(z," ").concat(q," ").concat(Z)]})})]}),(null===D||void 0===D?void 0:D.toUpperCase())===n.Jb.CATERING&&Object(j.jsxs)("div",{className:"content-time",children:[Object(j.jsx)(c.a,{srcFile:null===u.a||void 0===u.a?void 0:u.a.Clock,alt:R||"location-icon",className:"clock-img"}),Object(j.jsxs)("span",{className:"content-store",children:[" ","".concat(Object(r.translateWithI18Next)(X[0])+" "+X[1],", ").concat(null===V||void 0===V||null===(y=V.replace(/\s/g,""))||void 0===y?void 0:y.toLowerCase())]})]})]})}},1293:function(e,t,o){"use strict";o.d(t,"b",(function(){return S}));var l=o(3),i=o.n(l),d=o(28),n=o(146),c=o(6),a=o(85),r=o(59),s=o(5),u=o(15),v=o(4),O=o(413),b=o(1101),j=o(97),m=o(0),p=o(403),h=o(447),E=o(2);const{Error_Red:C,Error_Yellow:f,PictogramAlertIcon:A}=u.a,y=(e,t)=>i.a.Children.map(e,(e=>{var o;return null!==e&&void 0!==e&&null!==(o=e.props)&&void 0!==o&&o[t]&&i.a.isValidElement(e)?i.a.cloneElement(e):null})),S=(e,t)=>{const o=Object(E.jsx)(p.a,{srcFile:C});Object(s.Df)(Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.ATTEMPTS_EXCEEDED),o,"guest-otp-error"),setTimeout((()=>{r.b.dismiss()}),4e3),t({showMaxAttemptToast:!1})};t.a=e=>{var t,o,r,C,A,S,T,g,R,D;const{userOrderState:N}=Object(l.useContext)(a.a),{orderReducer:I,tenantReducer:_}=Object(d.c)((e=>e)),x=null===_||void 0===_||null===(t=_.componentOptions)||void 0===t||null===(o=t.web)||void 0===o||null===(r=o.payment)||void 0===r?void 0:r.showKFCLoader;Object(l.useEffect)((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.checkoutDetails)&&void 0!==t&&t.isRetryPaymentErrorEnabled&&n.scroller.scrollTo("checkoutPaymentScrollPosition",{duration:1e3,delay:100,smooth:!0,containerId:"",offset:200})}),[null===e||void 0===e||null===(C=e.checkoutDetails)||void 0===C?void 0:C.isRetryPaymentErrorEnabled]);const k=i.a.Children.toArray(null===e||void 0===e?void 0:e.children),{isMobile:w}=null===e||void 0===e?void 0:e.checkoutDetails,{timeBasedAlertModalData:P}=N;return Object(E.jsxs)(i.a.Fragment,{children:[Object(E.jsx)("hr",{role:"presentation",className:"headerdivider"}),Object(E.jsx)("div",{className:"checkoutPagecont global",children:Object(E.jsxs)("div",{className:"checkoutContainer ".concat(Object(j.j)(w)),"data-testid":"checkout-page",children:[Object(E.jsx)("img",{className:"px-25px",alt:"cart",src:Object(s.ad)(w,u.a.cart_header_mobile,u.a.Strips_Large_Cart)}),Object(E.jsx)("div",{className:"checkoutHeader col-sm-7 col-md-12 col-lg-7 col-sm-12 mt-10px px-25px ".concat(Object(j.k)(w)),children:Object(E.jsxs)("div",{className:"d-flex align-items-baseline justify-content-between leftPanel",children:[Object(E.jsx)("h3",{className:"checkoutTitle ".concat(Object(j.j)(w)),children:Object(c.translateWithI18Next)(v.a.CART_CHECKOUT)}),Object(E.jsxs)("div",{className:"secure-checkout",children:[Object(E.jsx)("img",{src:u.a.LockIcon,alt:""}),Object(E.jsx)("span",{"data-testid":"secure-checkout-payment",children:Object(c.translateWithI18Next)("secureCheckout")})]})]})}),(null===P||void 0===P?void 0:P.dynamicMenuAlertMessage)&&Object(E.jsx)("div",{"col-mob-left":!0,"col-left":!0,className:"row-cols-12 mt-10px no-bg dynamicmenu-alert","data-testid":"dynamicmenu-alert",children:Object(O.c)(Object(E.jsxs)("span",{className:"dynamicmenu-alert-message",children:[Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.CHECKOUT_UNAVAILABLE_ITEM)," ",Object(E.jsx)("a",{className:"dynamicmenu-alert-cart-text",href:m.Ce.CART,children:m.I})," ",Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.TO_CONTINUE)]}))}),(null===e||void 0===e||null===(A=e.checkoutDetails)||void 0===A?void 0:A.showPlaceOrderLoading)&&x&&Object(E.jsx)(h.a,{}),(null===e||void 0===e||null===(S=e.checkoutDetails)||void 0===S?void 0:S.enableGuestOtpCheckout)&&!(null!==e&&void 0!==e&&null!==(T=e.checkoutDetails)&&void 0!==T&&T.guestOtpCheckoutValidated)&&((null===e||void 0===e||null===(g=e.checkoutDetails)||void 0===g?void 0:g.useDifferentNumberFlowFlagForGuidanceMessage)||(null===e||void 0===e||null===(R=e.checkoutDetails)||void 0===R?void 0:R.showGuidanceMessageForOtpExpiry)||(null===e||void 0===e||null===(D=e.checkoutDetails)||void 0===D?void 0:D.showGuidanceMessageForMaxAttemptCount))&&Object(E.jsx)("div",{class:"cart-notification col-12",children:Object(E.jsxs)("div",{class:"notify-alert-guest-checkout",children:[Object(E.jsx)(p.a,{srcFile:f}),Object(E.jsx)("span",{class:"guest-Checkout-warning-msg",children:Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.GUEST_PHONE_NUMBER_REQUIRED_MESSAGE)})]})}),Object(E.jsxs)("div",{className:"checkoutBody ".concat(Object(j.j)(w)," row  mb-60px"),children:[Object(E.jsxs)("div",{className:"checkoutDescDetails col-sm-12 col-lg-7 col-md-12 leftPanel",children:[I&&Object(j.s)(I,null===e||void 0===e?void 0:e.checkoutDetails,null===e||void 0===e?void 0:e.updateCheckoutDetails),y(k,w?"col-mob-left":"col-left")]}),Object(E.jsx)("div",{className:"mt-10px ".concat(Object(s.ad)(w,"py-25px mobile","")," col-12 col-lg-5 rightPanel"),children:y(k,w?"col-mob-right":"col-right")})]})]})}),N.showCartClearAlert&&Object(E.jsx)(b.a,{})]})}},620:function(e,t,o){"use strict";o.r(t);var l=o(3),i=o(62),d=o(28),n=o(35),c=o(85),a=o(6),r=o(4),s=o(24),u=o(73),v=o(46),O=o(15),b=o(16),j=o(120),m=o(5);var p=o(0),h=o(210),E=o(2);var C=e=>(e=>Object(E.jsx)(h.a,{...e,testId:"CheckoutViews",importPath:"CHECKOUT_VIEWS"}))(e),f=o(97),A=o(1293),y=o(52),S=o(331),T=o(80),g=o(132),R=o(12),D=o(29),N=o(1292),I=o(1266),_=o(1140),x=o(1156),k=o(399);t.default=e=>{var t,o,h,w,P,L,F,M,U,H,V,G,W,Y,B,K,J,X,q,Q,z,Z,$;const ee=Object(d.b)(),{userOrderState:te,userOrderStateDispatch:oe}=Object(l.useContext)(c.a),{cartReducer:le,tenantReducer:ie,profileReducer:de,guestOtpReducer:ne,orderReducer:ce,appStateReducer:ae,postOrderReducer:re,menuReducer:se,paymentsContentReducer:ue,paymentsReducer:ve,storesReducer:Oe,marketConfigReducer:be}=Object(d.c)((e=>e)),{cartData:je={},isValidated:me=!1}=le,{orderCapacity:pe={},isOrderCapacityLoading:he=!1}=Oe||{},{enableOrderCapacityManagement:Ee=!1,orderServDateFormat:Ce="",redirectToCart:fe,isUberServiceableEnabled:Ae}=ie||{},ye=Object(m.Lb)(te),Se=(null===ye||void 0===ye||null===(t=ye.store)||void 0===t?void 0:t.id)||(null===ye||void 0===ye||null===(o=ye.store)||void 0===o?void 0:o.storeId),Te=Object(R.A)(null===ye||void 0===ye?void 0:ye.date,Ce),ge=Object(R.h)(null===ye||void 0===ye?void 0:ye.date,p.sb.YYYYMMDD),Re=Object(R.h)(Object(R.R)(null===ye||void 0===ye?void 0:ye.selectedTime,p.sb.hh_mm_A),p.sb.HHmm),{discountLines:De=[]}=je||{},Ne=De&&(null===De||void 0===De?void 0:De.length)-1,Ie=De&&De[Ne],{couponCode:_e="",amount:xe=""}=Ie||{},ke=null===ae||void 0===ae?void 0:ae.userStatus,we=Object(g.b)(T.b),Pe=Object(g.a)(),Le=null===de||void 0===de?void 0:de.savedAddresses,[Fe,Me]=Object(l.useState)(!1),{orderAccepted:Ue={}}=Object(m.hb)(Object(m.Td)(re),re),He=Object(m.ad)(null===te||void 0===te?void 0:te.isPaymentAdded,null===Ue||void 0===Ue?void 0:Ue.customer,null===de||void 0===de?void 0:de.basic),[Ve,Ge]=Object(l.useState)(f.c),We=Object(E.jsx)(v.a,{srcFile:O.a.Error}),Ye=Object(l.useCallback)((e=>{Ge&&Ge((t=>({...t,...e})))}),[]),{showFormattedAddressFromDisposition:Be,showAddressWithApartment:Ke}=null!==(h=null===ie||void 0===ie?void 0:ie.savedAddressPage)&&void 0!==h?h:{},Je=Object(m.Sd)(te.dispositionNew)?JSON.parse(localStorage.getItem(p.gd.DISPOSITION_NEW)):te.dispositionNew,Xe=()=>{Ye({isMobile:Object(m.de)(window.innerWidth)})},qe=Object(g.b)(T.b),{fetchData:Qe}=Object(I.a)(),{isAllCartProductsAvailable:ze,isEvent:Ze}=Object(_.a)(),{isLoading:$e}=Object(d.c)((e=>(null===e||void 0===e?void 0:e.specialEventReducer)||{})),et=Object(i.g)(),tt=Object(x.k)();Object(l.useEffect)((()=>{var e,t,o,l;(null===ce||void 0===ce||null===(e=ce.response)||void 0===e||null===(t=e.order)||void 0===t?void 0:t.customProperties)&&Ye({streetNumberValue:null===ce||void 0===ce||null===(o=ce.response)||void 0===o||null===(l=o.order)||void 0===l?void 0:l.customProperties})}),[null===ce||void 0===ce||null===(w=ce.response)||void 0===w||null===(P=w.order)||void 0===P?void 0:P.customProperties]),Object(l.useEffect)((()=>(oe({type:y.a.PLACE_ORDER_BUTTON,placeOrderButtonEnabled:!0}),Pe(Object(T.d)({key:p.Se,value:!1})),fe&&!("ShowPaymentError"in et.location)&&et.push("/cart"),()=>{oe({type:null===y.a||void 0===y.a?void 0:y.a.SHOW_BUCKET_LOADER,value:!1}),Ye({showPlaceOrderLoading:!1})})),[]),Object(l.useEffect)((()=>{if(null!==ke&&void 0!==ke&&ke.loggedIn&&Le){var e,t;const o=Le.filter((e=>{var t;return e.name===(null===we||void 0===we||null===(t=we.selectedFavouriteStoreAddress)||void 0===t?void 0:t.name)}));Ye({userInformation:{value:null===(e=o[0])||void 0===e?void 0:e.deliveryInstructions},selectedFavDeliveryAddress:o[0],instruction:null===(t=o[0])||void 0===t?void 0:t.deliveryInstructions})}}),[Le]),Object(l.useEffect)((()=>{var e;(null===Ve||void 0===Ve?void 0:Ve.selectedFavDeliveryAddress)&&Ye({userOption:(null===Ve||void 0===Ve||null===(e=Ve.selectedFavDeliveryAddress)||void 0===e?void 0:e.deliveryOptions)===p.Ec?null===p.R||void 0===p.R?void 0:p.R.HAND_IT_TO_ME:null===p.R||void 0===p.R?void 0:p.R.LEAVE_AT_MY_DOOR})}),[null===Ve||void 0===Ve?void 0:Ve.selectedFavDeliveryAddress]),Object(l.useEffect)((()=>{(null===we||void 0===we?void 0:we.selectedLineValueAddress)&&Ye({selectedAptVal:null===we||void 0===we?void 0:we.selectedLineValueAddress})}),[null===we||void 0===we?void 0:we.selectedLineValueAddress]),Object(l.useEffect)((()=>{var e,t;(null===we||void 0===we||null===(e=we.selectedAddress)||void 0===e?void 0:e.specialNote)&&Ye({userInformation:{value:null===we||void 0===we||null===(t=we.selectedAddress)||void 0===t?void 0:t.specialNote}})}),[null===we||void 0===we||null===(L=we.selectedAddress)||void 0===L?void 0:L.specialNote]);const{CURRENT_STORE_INFO_STORAGE:ot}=p.gd,lt=Object(l.useMemo)((()=>Object(m.Sd)(te.currentStoreInfo)?Object(m.b)(localStorage.getItem(ot)):te.currentStoreInfo),[ot,te.currentStoreInfo]);Object(l.useEffect)((()=>(localStorage.setItem(p.gd.PAYMENT_STATUS,""),localStorage.setItem(p.gd.POST_PAYMENT_TYPE,""),localStorage.setItem(p.Ne.POST_PAYMENT_TYPE,""),Object(f.p)({...Ve,dispatch:ee}),window.addEventListener(p.ye,Xe),(null===Ve||void 0===Ve?void 0:Ve.enableGuestOtpCheckout)&&Object(f.o)(Ve,Ye),Ye({dispatch:ee}),()=>{window.removeEventListener(p.ye,Xe)})),[ee]),Object(l.useEffect)((()=>{if(Object(m.Td)(ie)&&Object(m.Td)(se)){const{currencyConversionFactor:e,currencyShortName:t}=ie,{flatResponse:o=[]}=Object(m.sd)(se),{categoryMapByUrl:l={}}=Object(m.sd)(o),{localized:i=!1,loggedIn:d=!1}=Object(m.sd)(ke),n=Object(m.od)(i,d);Object(f.v)(je,null===p.R||void 0===p.R?void 0:p.R.BEGIN_CHECKOUT_CLICK,{currencyConversionFactor:e,currencyShortName:t},l,n,xe,_e),null!==ke&&void 0!==ke&&ke.loggedIn&&Object(f.v)(je,null===p.R||void 0===p.R?void 0:p.R.ADD_CONTACT_INFO_CLICK,{currencyConversionFactor:e,currencyShortName:t},l),Object(f.C)(se,Ye)}}),[se]),Object(l.useEffect)((()=>{if((null===Ve||void 0===Ve||!Ve.isUpdateCheckoutContactAnalytics)&&null!==Ve&&void 0!==Ve&&Ve.paymentEnabled&&(null===ke||void 0===ke||!ke.loggedIn)){const{currencyConversionFactor:e,currencyShortName:t}=ie,{flatResponse:o=[]}=Object(m.sd)(se),{categoryMapByUrl:l={}}=Object(m.sd)(o);Object(f.v)(je,null===p.R||void 0===p.R?void 0:p.R.ADD_CONTACT_INFO_CLICK,{currencyConversionFactor:e,currencyShortName:t},l),Ye({isUpdateCheckoutContactAnalytics:!0})}}),[null===Ve||void 0===Ve?void 0:Ve.paymentEnabled]),Object(l.useEffect)((()=>{Object(f.t)(ce,null===Ve||void 0===Ve?void 0:Ve.showPaymentError,null===Ve||void 0===Ve?void 0:Ve.showPaymentPreValidationError)}),[ce,null===Ve||void 0===Ve?void 0:Ve.showPaymentError,null===Ve||void 0===Ve?void 0:Ve.showPaymentPreValidationError]),Object(l.useEffect)((()=>{var t,o,l,i,d;if(je&&(null===je||void 0===je||null===(t=je.foodLines)||void 0===t?void 0:t.length)>0&&(null!==je&&void 0!==je&&je.validationResult||ke.loggedIn&&null!==ce&&void 0!==ce&&null!==(o=ce.response)&&void 0!==o&&null!==(l=o.order)&&void 0!==l&&l.id||null!==je&&void 0!==je&&null!==(i=je.foodLines[0])&&void 0!==i&&i.validationResult)){const{savedAddressPage:e}=ie;Object(f.x)({cartData:je,checkoutDetails:Ve,updateCheckoutDetails:Ye,showStateCityAddress:null===e||void 0===e?void 0:e.showStateCityAddAddress,showFormattedAddressFromDisposition:Be,dispositionText:Object(N.b)(qe,Je,null===ie||void 0===ie?void 0:ie.scheduleOrderDateFormat,Ke,null===ie||void 0===ie?void 0:ie.componentOptions),isCheckoutPage:!0})}else!Object(m.le)()||!je||null!==(null===je||void 0===je?void 0:je.validationResult)||null!==ce&&void 0!==ce&&null!==(d=ce.response)&&void 0!==d&&d.order?Object(m.Ye)(e):Object(m.Qe)(e,!1)}),[null===je||void 0===je?void 0:je.id,null===je||void 0===je?void 0:je.total,null===je||void 0===je?void 0:je.availableCollectionPoints,null===je||void 0===je?void 0:je.customer,null===je||void 0===je?void 0:je.allowedTenders,null===je||void 0===je?void 0:je.foodLines,null===je||void 0===je?void 0:je.deliveryAddress,null===(F=window)||void 0===F?void 0:F.google]),Object(l.useEffect)((()=>{Object(f.B)(be,Ye)}),[null===be||void 0===be?void 0:be.headerData]),Object(l.useEffect)((()=>{Object(f.J)(ie,Ye)}),[null===ie||void 0===ie?void 0:ie.tenantId,null===ie||void 0===ie?void 0:ie.event]),Object(l.useEffect)((()=>{Object(f.H)(de,Ve,Ye,ie)}),[null===de||void 0===de?void 0:de.pastOrders]),Object(l.useEffect)((()=>{Object(f.G)(ve,Ye)}),[null===ve||void 0===ve?void 0:ve.response,null===ve||void 0===ve?void 0:ve.paymentRequestedResponse]),Object(l.useEffect)((()=>{Object(f.F)(ue,Ye)}),[null===ue||void 0===ue?void 0:ue.tendersContent]),Object(l.useEffect)((()=>{(null===Ve||void 0===Ve?void 0:Ve.enableGuestOtpCheckout)&&Object(f.A)(ne,Ve,Ye)}),[null===ne||void 0===ne?void 0:ne.tokenResponse,null===ne||void 0===ne?void 0:ne.generateOTPResponse,null===ne||void 0===ne?void 0:ne.validateOTPResponse,null===Ve||void 0===Ve?void 0:Ve.guestOtpTokenResponse,null===Ve||void 0===Ve?void 0:Ve.openGuestPhoneNumberChangeModal]),Object(l.useEffect)((()=>{null!==Ve&&void 0!==Ve&&Ve.enableGuestOtpCheckout&&null!==ne&&void 0!==ne&&ne.validateOTPResponse&&(null===Ve||void 0===Ve?void 0:Ve.guestOtpValidationFailedAttemptsCount)===(null===Ve||void 0===Ve?void 0:Ve.maximumFailedOtpCount)&&(Object(A.b)(Ve,Ye),Ye({showGuidanceMessageForMaxAttemptCount:!0}))}),[null===Ve||void 0===Ve?void 0:Ve.guestOtpValidationFailedAttemptsCount]),Object(l.useEffect)((()=>{Object(f.y)(je,ie,Ye)}),[null===je||void 0===je?void 0:je.total,null===ie||void 0===ie?void 0:ie.currencySymbol,null===ie||void 0===ie?void 0:ie.currencyConversionFactor]),Object(l.useEffect)((()=>{Object(f.z)(Oe,Ye)}),[null===Oe||void 0===Oe||null===(M=Oe.storesWithStatus)||void 0===M||null===(U=M[0])||void 0===U||null===(H=U.summary)||void 0===H?void 0:H.deliveryPartner]),Object(l.useEffect)((()=>{Object(f.I)(je,ie,Ye)}),[null===je||void 0===je?void 0:je.service,null===ie||void 0===ie||null===(V=ie.componentOptions)||void 0===V?void 0:V.web]),Object(l.useEffect)((()=>{Ye({orderReducerError:null===ce||void 0===ce?void 0:ce.error,orderReducerResponse:null===ce||void 0===ce?void 0:ce.response})}),[null===ce||void 0===ce?void 0:ce.error,null===ce||void 0===ce?void 0:ce.response]),Object(l.useEffect)((()=>{var e,t;Object(m.le)()?Object(f.E)({orderReducer:ce,tenantReducer:ie,updateCheckoutDetails:Ye}):Ye({guestCheckoutAllowed:!Object(m.Vd)(null===Je||void 0===Je?void 0:Je.type)&&(null===ie||void 0===ie||null===(e=ie.componentOptions)||void 0===e||null===(t=e.checkout)||void 0===t?void 0:t.guestCheckoutAllowed)})}),[null===ce||void 0===ce||null===(G=ce.response)||void 0===G||null===(W=G.order)||void 0===W?void 0:W.id,null===ce||void 0===ce||null===(Y=ce.response)||void 0===Y||null===(B=Y.order)||void 0===B?void 0:B.total,null===ie||void 0===ie?void 0:ie.currencySymbol,null===ie||void 0===ie?void 0:ie.currencyConversionFactor]),Object(l.useEffect)((()=>{Object(f.K)(te,oe,Ye,Ve)}),[null===te||void 0===te?void 0:te.dispositionNew,null===te||void 0===te?void 0:te.isPaymentAdded,null===te||void 0===te?void 0:te.scheduleModalOpen,null===te||void 0===te?void 0:te.placeOrderButtonEnabled,null===te||void 0===te?void 0:te.currentStoreInfo]),Object(l.useEffect)((()=>{Object(f.w)(ae,Ye)}),[null===ae||void 0===ae?void 0:ae.userStatus]),Object(l.useEffect)((()=>{Object(m.Td)(He)&&(null===ke||void 0===ke?void 0:ke.loggedIn)&&Object(f.L)(He,Ve,Ye)}),[He,null===ae||void 0===ae?void 0:ae.userStatus]),Object(l.useEffect)((()=>{var t,o,l,i;if(null!==ce&&void 0!==ce&&ce.error)Ye({paymentEnabled:s.b.isBrowser,isClickContinuePayment:!1}),null!==ce&&void 0!==ce&&null!==(t=ce.response)&&void 0!==t&&null!==(o=t.basketValidationResult)&&void 0!==o&&null!==(l=o.items)&&void 0!==l&&null!==(i=l.validationStatus)&&void 0!==i&&i.status?null!==Ve&&void 0!==Ve&&Ve.showErrorPayment||Object(m.ef)(e):Object(m.Qe)(e,!1);else if(ce&&Object(m.pe)(null===ce||void 0===ce?void 0:ce.response)&&Object(m.le)()){var d;Object(f.D)({isEvent:Object(m.Vd)(null===Je||void 0===Je?void 0:Je.type),orderReducer:ce,updateCheckoutDetails:Ye,checkoutDetails:Ve,isRetryPaymentErrorEnabled:null===e||void 0===e||null===(d=e.location)||void 0===d?void 0:d.isRetryPaymentErrorEnabled,tenantReducer:ie})}}),[ce,null===ce||void 0===ce||null===(K=ce.response)||void 0===K||null===(J=K.order)||void 0===J?void 0:J.id,null===Ve||void 0===Ve?void 0:Ve.isCartReducerLoadCount]),Object(l.useEffect)((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.ShowPaymentError?Ye({showErrorPayment:!0}):Object(f.e)(ee)}),[null===e||void 0===e||null===(X=e.location)||void 0===X?void 0:X.ShowPaymentError]),Object(l.useEffect)((()=>{var t,o,l,i,d,n,c,s,u,v,O,b,j,p;(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.maxAttemptReached||null!==e&&void 0!==e&&null!==(o=e.location)&&void 0!==o&&o.timerExpired||null!==e&&void 0!==e&&null!==(l=e.location)&&void 0!==l&&l.refreshed||null!==e&&void 0!==e&&null!==(i=e.location)&&void 0!==i&&i.redirectBack)&&(((null===e||void 0===e||null===(d=e.location)||void 0===d?void 0:d.maxAttemptReached)||(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.timerExpired))&&Object(m.Df)(Object(a.translateWithI18Next)(null!==e&&void 0!==e&&null!==(c=e.location)&&void 0!==c&&c.timerExpired?null===r.a||void 0===r.a?void 0:r.a.VERIFICATION_CODE_EXPIRED:null===r.a||void 0===r.a?void 0:r.a.MAX_ATTEMPT_REACHED),We,"err-toast otp-err-toast",!0),Ye({collectionPoint:null===we||void 0===we||null===(s=we.checkoutDetailsStore)||void 0===s?void 0:s.collectionPoint,timerExpired:null===e||void 0===e||null===(u=e.location)||void 0===u?void 0:u.timerExpired,instruction:null===we||void 0===we||null===(v=we.checkoutDetailsStore)||void 0===v?void 0:v.instruction,checkInSummary:null===we||void 0===we||null===(O=we.checkoutDetailsStore)||void 0===O?void 0:O.checkInSummary,maxAttemptReached:null===e||void 0===e||null===(b=e.location)||void 0===b?void 0:b.maxAttemptReached,refreshed:null===e||void 0===e||null===(j=e.location)||void 0===j?void 0:j.refreshed,redirectBack:null===e||void 0===e||null===(p=e.location)||void 0===p?void 0:p.redirectBack}))}),[null===e||void 0===e||null===(q=e.location)||void 0===q?void 0:q.timerExpired,null===e||void 0===e||null===(Q=e.location)||void 0===Q?void 0:Q.maxAttemptReached,null===e||void 0===e||null===(z=e.location)||void 0===z?void 0:z.refreshed,null===e||void 0===e||null===(Z=e.location)||void 0===Z?void 0:Z.redirectBack]),Object(l.useEffect)((()=>{me&&ee(Object(n.t)())}),[me]),Object(l.useEffect)((()=>{if(Ee&&!he&&Te&&!Fe){const e=null===ye||void 0===ye?void 0:ye.type;Qe({storeId:Se,timeStamp:Te,dispositionType:e}),Me(!0)}}),[Te,null===ye||void 0===ye?void 0:ye.type,Ee,Qe,he,Fe,Se]),Object(l.useEffect)((()=>{if(Ee&&!he&&!$e&&null!==Ve&&void 0!==Ve&&Ve.recheckOrderCapacityData&&(null!==Ve&&void 0!==Ve&&Ve.recheckOrderCapacityData||null!==Ve&&void 0!==Ve&&Ve.recheckSpecialEventAvailability)&&!tt.isLoading){var e;let t=null;Ze&&(t=ze());const o=null===pe||void 0===pe||null===(e=pe[Se])||void 0===e?void 0:e[ge],l=o&&Object.keys(o)&&Object.keys(o).includes(Re)?o[Re]:null;Ye({recheckOrderCapacityData:!1}),0===Number(l)?Ye({shouldDisplayOrderCapacityError:!0}):Ze&&!t||Ze&&0===Number(l)?et.push(p.Ce.CART):Object(D.A)(Ve,Ye)}else Ze&&!Ee&&et.push(p.Ce.CART)}),[null===Ve||void 0===Ve?void 0:Ve.recheckOrderCapacityData,Ee,he,$e,Ye,tt.isLoading]),Object(l.useEffect)((()=>{null!==Ve&&void 0!==Ve&&Ve.shouldDisplayOrderCapacityError&&(oe({type:b.a.SCHEDULE_MODAL_OPEN,scheduleModalOpen:!0}),Ye({scheduleModalOpen:!0}))}),[null===Ve||void 0===Ve?void 0:Ve.isClickPlaceOrder,null===Ve||void 0===Ve?void 0:Ve.shouldDisplayOrderCapacityError,Ye,oe]),Object(l.useEffect)((()=>{if(null!==Ve&&void 0!==Ve&&Ve.isClickPlaceOrder)if(null!==Ve&&void 0!==Ve&&Ve.validateStoreStatusOnClickPlaceOrder){var e,t,o;const{buffertimepmdelivery:l,buffertimepmpickup:i,shouldCheckDropOffAddress:d,enableScheduleOrderFlag:n,enableScheduleOrder:c,enableClickCollectScheduleOrderFlag:a}=Ve,r=Object(m.C)([lt],null===lt||void 0===lt?void 0:lt.service,null,d,null===qe||void 0===qe?void 0:qe.latLong),s=null!==(e=null===je||void 0===je||null===(t=je.requestedDateTime)||void 0===t?void 0:t.futureDateTime)&&void 0!==e?e:"",v={storeid:null===(o=r[0])||void 0===o?void 0:o.storeId,service:r[0].service,channel:r[0].channel},O=s?{...v,futureDateTimeInEpochFormat:s}:v,p=e=>{var t,o;oe({type:b.a.CURRENT_STORE_INFO,value:{...lt,id:null===(t=e[0])||void 0===t?void 0:t.storeId,summary:null===e||void 0===e||null===(o=e[0])||void 0===o?void 0:o.summary}});const d=Object(f.l)(Ve,null===e||void 0===e?void 0:e[0]);if(null!==d&&void 0!==d&&d.isScheduledTimePassedOrStoreClosedErr&&(!Object(k.e)(null===Ve||void 0===Ve?void 0:Ve.deliveryPartner)||!Ae)||null!==d&&void 0!==d&&d.isStoreClosedErr){var r;const t=Object(j.t)(null===e||void 0===e?void 0:e[0],n,a,!1),o=Object(m.Xd)(null===e||void 0===e?void 0:e[0])||Object(m.Yd)(null===e||void 0===e?void 0:e[0]),d=Boolean(o&&!t),s=!!a&&Object(m.ke)(je,null===e||void 0===e||null===(r=e[0])||void 0===r?void 0:r.summary),u=!!c&&((e,t,o)=>{var l;const i=e&&Object(m.f)(null===(l=e[0])||void 0===l?void 0:l.service,t,o),d=e[0].summary,n=i&&Object(m.v)(d,i);return null===n||void 0===n?void 0:n.timingFlag})(e,l,i);Ye({store:e[0],currentStoreInfo:e[0],scheduleModalOpen:!0,isTemproryClosed:s,isFutureDateTimeOrder:d,storeClosesSoon:u}),oe({type:b.a.SCHEDULE_MODAL_OPEN,scheduleModalOpen:!0})}else Object(f.n)(Ve,Ye)};ee(Object(u.n)({data:O,tenantId:ie.tenantId},p))}else Object(f.n)(Ve,Ye)}),[null===Ve||void 0===Ve?void 0:Ve.isClickPlaceOrder,null===Ve||void 0===Ve?void 0:Ve.validateStoreStatusOnClickPlaceOrder]),Object(l.useEffect)((()=>{(null===Ve||void 0===Ve?void 0:Ve.dispatchOrderAction)&&Object(f.d)({checkoutDetails:Ve,updateCheckoutDetails:Ye})}),[null===Ve||void 0===Ve?void 0:Ve.dispatchOrderAction]),Object(l.useEffect)((()=>{null!==Ve&&void 0!==Ve&&Ve.showPlaceOrderLoading?ee(Object(S.b)()):ee(Object(S.a)())}),[null===Ve||void 0===Ve?void 0:Ve.showPlaceOrderLoading]);const it=!(null!==($=Ve.userParams)&&void 0!==$&&$.loggedIn)&&!Object(m.Hd)(Ve.type)&&Ve.showPreValidationPaymentContactError&&!Ve.isContactDetailValid||!Ve.isCateringSomeOneElseContactDetailsAreValid;return Object(l.useEffect)((()=>{it&&Object(m.Ob)(p.bb,Object(a.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.ADD_CONTACT_TO_ENABLE_PAYMENT))}),[it]),""!==(null===Ve||void 0===Ve?void 0:Ve.tenantId)&&""!==(null===Ve||void 0===Ve?void 0:Ve.basketId)&&Object(E.jsx)(C,{...e,checkoutDetails:Ve,updateCheckoutDetails:Ye})}}}]);