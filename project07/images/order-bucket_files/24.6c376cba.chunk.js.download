(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[24],{1101:function(e,t,l){"use strict";l.d(t,"a",(function(){return h}));var o=l(3),a=l(28),i=l(92),n=l(106),d=l(85);const s={CLEAR_ALL_MSG:{MSGTXT1:"clearCartAwareText",MSGTXT2:"clearCartActionText",MSGTXT3:"clearCartCompleteText"},CLEAR_ALL:"continue",CANCEL:"cancel",TO_CHANGE_LANGUAGE:"toChangeLanguage"};var r=l(16),c=l(6),u=l(5),v=l(35),O=l(15),m=l(0),b=l(80),j=l(2);const h=e=>{const t=Object(a.c)((e=>e.cartReducer)),{cartData:l={}}=t||{},h=Object(a.c)((e=>e.tenantReducer)),{tenantId:p=""}=h||{},{userOrderState:C,userOrderStateDispatch:E}=Object(o.useContext)(d.a),{modalToOpenOnConfirm:N,modalOpenFrom:g,confirmCallBack:T}=C,{CartError:x}=O.a,I=Object(a.b)(),{CLEAR_ALL_MSG:f,CLEAR_ALL:A,CANCEL:D,TO_CHANGE_LANGUAGE:P}=s;((e,t,l)=>{e.langSelector?t.MSGTXT3=l:t.MSGTXT3})(e,f,P);const{SHOW_CLEAR_CART_ALERT:_,DISPOSITION_DATA:y,SEARCH_ORDER_DATA:k,SCHEDULE_ORDER_DATA:S,clearCartChangeFlag:M,orderTypeAlertTitle:R,searchStoreAlertTitle:F,RESET_DELIVERY_ADDRESS_LINE:w,CLEAR_CART_CONFIRM_CANCEL_MODAL:L,ORDER_CAPACITY_DATA_UPDATED:B}=r.a,V=Object(u.Sd)(C.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):C.dispositionNew,W=()=>{E({type:L,value:{}}),E({type:m.Oe,value:{selectedLanguage:""}}),E({type:_,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!1,languageToChange:""}}),g===M&&E({type:S,value:{showScheduleOrderCatering:!0,selectedStoreInfo:V.store,changeFlow:!0}})};return Object(j.jsx)(n.a,{handleClose:W,classNames:"clear-cart-modal",CartAlertForm:Object(j.jsx)(i.a,{splitTitle:f,imageSrc:x,altText:"cart-error",confirmButtonText:Object(c.translateWithI18Next)(A),cancelButtonText:Object(c.translateWithI18Next)(D),cancelHandler:W,confirmHandler:()=>{if(l.discountLines.length>0){let e=l.discountLines.map((e=>e.id));I(Object(v.n)({params:{basketId:l.id},tenantId:p,shouldClearCart:!0},e))}else I(Object(v.o)({basketId:l.id,tenantId:p}));I(Object(b.c)({key:m.gd.VIEW_PRODUCT})),localStorage.removeItem(m.gd.ADD_TO_ORDER),I(Object(v.u)(new Date)),E({type:_,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!0}}),T&&T(),N===R?(E({type:w}),E({type:y,value:{showDisposition:!0}}),E({type:S,value:{showScheduleOrderCatering:!1}}),E({type:k,value:{showSearchStore:!1}}),E({type:B,value:{orderCapacityDataUpdated:!1}}),E({type:L,value:{}})):N===F&&E({type:k,value:{showSearchStore:!0}})}})})}},1273:function(e,t,l){"use strict";var o=l(3),a=l.n(o),i=(l(75),l(6)),n=l(41),d=l(15),s=l(190),r=l(144),c=l(62),u=l(4),v=l(5),O=(l(0),l(2));var m=e=>{let{timeSrc:t,resendOtpHandler:l,disabledOtpLink:a,fromCheckout:n,updateCheckoutDetails:d,showGuidanceMessageForOtpExpiry:r,showResendButton:m=!0}=e;const[b,j]=Object(o.useState)(t),[h,p]=Object(o.useState)(0),[C,E]=Object(o.useState)(0),N=Object(c.g)(),g=e=>{const t=Math.floor(e/60),l=e-60*t;p(t),E(l),j((e=>e-1))};Object(o.useEffect)((()=>{g(t)}),[t]),Object(o.useEffect)((()=>{let e;return b>=0?e=setInterval((()=>{g(b)}),1e3):clearInterval(e),()=>{e&&clearInterval(e)}}),[b]);return Object(O.jsxs)(O.Fragment,{children:[(b>=0&&n&&r&&d({showGuidanceMessageForOtpExpiry:!1}),b>=0?n?Object(O.jsxs)("span",{children:["".concat(Object(i.translateWithI18Next)(null===s.e||void 0===s.e?void 0:s.e.TIMER_EXPIRED_TEXT))," ",h,":",C<10&&"0".concat(C)||C]}):Object(O.jsxs)("span",{children:["".concat(Object(i.translateWithI18Next)(null===u.a||void 0===u.a?void 0:u.a.TIMER_EXPIRED_TEXT_ACCOUNT))," ",h,":",C<10&&"0".concat(C)||C," ",Object(i.translateWithI18Next)(null===u.a||void 0===u.a?void 0:u.a.SECONDS)]}):m?((e,t,l)=>(t&&!l&&e({showGuidanceMessageForOtpExpiry:!0}),Object(i.translateWithI18Next)(s.e.CODE_TIMER_EXPIRED)))(d,n,r):Object(v.Se)({history:N},!1,!1,!0,!1)),m&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{"data-testid":"resend-otp-testid",disabled:a,className:"otp-link-button ".concat(a?"disableOtpLinkCls":""),id:"otpResendButton",onClick:e=>{j(179),l(e)},children:Object(i.translateWithI18Next)(s.e.RESEND_CODE)})})]})},b=l(28),j=l(97);const h=e=>document.getElementById("codeBox"+e),p=e=>Object.fromEntries(Array.from({length:e},((e,t)=>[t,""]))),C=e=>{var t,l;const{closeOtpModalHandler:a,otpSendTo:c,fromCheckout:u,callValidateOtpAPI:v,callResendOtpAPI:C,isOtpMatch:E,hideError:N,invalidOtpCount:g,isItPageView:T=!1,showResendButton:x=!0,otpInputCountTruemoneyWallet:I="",otpTimerValueTruemoneyWallet:f="",updateCheckoutDetails:A,closeOtpModalHandlerCheckout:D,numberOfDigitsTobeMasked:P,maskedNumberOfDigit:_,checkoutDetails:y,showInvalidAttempt:k=!0}=e,S=Object(b.c)((e=>e.tenantReducer)),{otpInputLength:M,otpTimerValue:R}=(null===S||void 0===S||null===(t=S.componentOptions)||void 0===t||null===(l=t.web)||void 0===l?void 0:l.accountPage)||{},{SUBMIT_BUTTON_TEXT:F,SENT_AN_SMS:w,OTP_SENT_TEXT:L,INVALID_OTP:B,USE_A_DIFFERENT_NUMBER:V,INVALID_CODE:W,PAYMENT_TAKEN:H,PAYMENT_SUBMITTED:U,PASSCODE:G}=s.e,[Y,K]=Object(o.useState)(!1),[X,J]=Object(o.useState)(!1),q=I||M,[z]=Object(o.useState)(f||R);let Q=p(T?I:M);const[$,Z]=Object(o.useState)(Q),[ee,te]=Object(o.useState)(Q),[le,oe]=Object(o.useState)(z);Object(o.useEffect)((()=>{let e=Object.values(ee).join("").length;q===e?J(!0):(J(!1),u?N(A):N())}),[ee]),Object(o.useEffect)((()=>{u&&!E&&0!==g&&(J(!1),N(A))}),[u,E,g]);const ae={closeDataTestId:"close-otp-testId",role:"dialog",show:!1,classNames:"customized-otp-modal",showCloseBtn:!0,closeButtonHandler:u?()=>((e,t)=>{D(e,t)})(y,A):a,modalTitle:Object(i.translateWithI18Next)(w)};Object(o.useEffect)((()=>{const e=setInterval((()=>{oe((e=>e>0?e-1:e))}),1e3);return()=>clearInterval(e)}),[le]);const ie=Object(O.jsxs)(O.Fragment,{children:[u&&!E&&0!==g&&Object(O.jsxs)("div",{className:"otp-error-text otp-attempt-error-show",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(i.translateWithI18Next)(W),k&&"(".concat(g,"/3)")]}),u&&(null===y||void 0===y?void 0:y.showGuidanceMessageForOtpExpiry)&&Object(O.jsxs)("div",{className:"otp-error-text otp-attempt-error-show",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(i.translateWithI18Next)(s.e.VERIFICATION_CODE_EXPIRED)]}),Object(O.jsxs)("div",{className:"otp-main-container ".concat(T&&"page-otp-main-container"," "),children:[Object(O.jsxs)("div",{className:"left-section",children:[" ",Object(O.jsx)("div",{children:Object(i.translateWithI18Next)(w)})]}),Object(O.jsxs)("div",{className:"right-section",children:[Object(O.jsxs)("div",{className:"otp-title-text otp-title-text-th",children:[Object(i.translateWithI18Next)(L),"."]}),Object(O.jsx)("div",{className:"sendto",children:(ne=c,null===ne||void 0===ne?void 0:ne.replace(ne.substring(0,P),_))}),u&&Object(O.jsx)("button",{className:"useDifferentNumberButton",onClick:()=>(e=>{e({useDifferentNumberFlow:!0,openOtpModal:!1,useDifferentNumberFlowFlagForGuidanceMessage:!0}),Object(j.o)(y,e)})(A),children:Object(i.translateWithI18Next)(V)}),Object(O.jsxs)("div",{className:"otpDiv","aria-describedby":"otpInvalid",children:[[...Array(q)].map(((e,t)=>Object(O.jsx)("input",{id:"codeBox".concat(t),"data-testid":"otp-testid-".concat(t),className:"otpNum ".concat(E||0===g?"":"otpNum-invalid"),type:"tel",maxLength:1,onKeyPress:e=>(e=>{(8!==e.which&&0!==e.which&&e.which<48||e.which>57)&&e.preventDefault()})(e),onKeyUp:e=>((e,t,l)=>{var o,a;const i=e.which||e.keyCode;if(1===(null===(o=h(t))||void 0===o||null===(a=o.value)||void 0===a?void 0:a.length))if(t!==l-1){const e=h(t+1);e&&e.focus()}else h(t).blur();8===i&&0!==t&&h(t-1).focus()})(e,t),onChange:e=>((e,t)=>{let l=e.target.value;Z((e=>({...e,[t]:l}))),te((e=>({...e,[t]:l})))})(e,t),onBlur:()=>(e=>{Z((t=>({...t,[e]:null===ee||void 0===ee?void 0:ee[e]})))})(t),onFocus:()=>(e=>{Z((t=>({...t,[e]:""}))),te((t=>({...t,[e]:""})))})(t),value:null===$||void 0===$?void 0:$[t],onInput:e=>(e=>{const t=e.target.value;/^\d*$/.test(t)||(e.target.value=t.slice(0,-1))})(e)},"key".concat(t)))),!E&&0!==g&&!Object.values($).every((e=>""===e))&&Object(O.jsx)("img",{"data-testid":"clear-otp-testid",className:"",src:d.a.Clear_icon,alt:"clear otp",onClick:()=>{Z((()=>Q)),te((()=>Q))}})]}),u&&(null===y||void 0===y?void 0:y.showGuidanceMessageForOtpExpiry)&&Object(O.jsxs)("div",{className:"otp-error-text dob-error-show otp-invalid",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(i.translateWithI18Next)(s.e.CODE_EXPIRED_TEXT)]}),!E&&0!==g&&Object(O.jsxs)("div",{className:"otp-error-text dob-error-show otp-invalid",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(i.translateWithI18Next)(B)," ",k&&"(".concat(g,"/3)")]}),T&&Object(O.jsx)("div",{className:"infoPayment",children:Object(O.jsx)("p",{children:Object(i.translateWithI18Next)(H)})}),Object(O.jsx)("div",{className:"otp-expired-text",children:Object(O.jsx)(m,{timeSrc:z,resendOtpHandler:e=>{e.preventDefault(),oe(z),C(y),K(!0),setTimeout((()=>{K(!1)}),3e4)},disabledOtpLink:Y,fromCheckout:u,updateCheckoutDetails:A,showGuidanceMessageForOtpExpiry:null===y||void 0===y?void 0:y.showGuidanceMessageForOtpExpiry,showResendButton:x})}),Object(O.jsx)("div",{className:"buttons-container",children:Object(O.jsx)(n.a,{className:"buttons-group ".concat(X&&0!==le?"save":"save-disabled"),"data-testid":"update-account-button-testid",onClickHandler:()=>(()=>{let e=Object.values(ee).join("");v(e),J(!1)})(),disabled:!X||0===le,children:Object(i.translateWithI18Next)(F)})})]})]})]});var ne;return T?ie:Object(O.jsx)(r.a,{...ae,children:ie})};t.a=a.a.memo(C)},1293:function(e,t,l){"use strict";l.d(t,"b",(function(){return x}));var o=l(3),a=l.n(o),i=l(28),n=l(146),d=l(6),s=l(85),r=l(59),c=l(5),u=l(15),v=l(4),O=l(413),m=l(1101),b=l(97),j=l(0),h=l(403),p=l(447),C=l(2);const{Error_Red:E,Error_Yellow:N,PictogramAlertIcon:g}=u.a,T=(e,t)=>a.a.Children.map(e,(e=>{var l;return null!==e&&void 0!==e&&null!==(l=e.props)&&void 0!==l&&l[t]&&a.a.isValidElement(e)?a.a.cloneElement(e):null})),x=(e,t)=>{const l=Object(C.jsx)(h.a,{srcFile:E});Object(c.Df)(Object(d.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.ATTEMPTS_EXCEEDED),l,"guest-otp-error"),setTimeout((()=>{r.b.dismiss()}),4e3),t({showMaxAttemptToast:!1})};t.a=e=>{var t,l,r,E,g,x,I,f,A,D;const{userOrderState:P}=Object(o.useContext)(s.a),{orderReducer:_,tenantReducer:y}=Object(i.c)((e=>e)),k=null===y||void 0===y||null===(t=y.componentOptions)||void 0===t||null===(l=t.web)||void 0===l||null===(r=l.payment)||void 0===r?void 0:r.showKFCLoader;Object(o.useEffect)((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.checkoutDetails)&&void 0!==t&&t.isRetryPaymentErrorEnabled&&n.scroller.scrollTo("checkoutPaymentScrollPosition",{duration:1e3,delay:100,smooth:!0,containerId:"",offset:200})}),[null===e||void 0===e||null===(E=e.checkoutDetails)||void 0===E?void 0:E.isRetryPaymentErrorEnabled]);const S=a.a.Children.toArray(null===e||void 0===e?void 0:e.children),{isMobile:M}=null===e||void 0===e?void 0:e.checkoutDetails,{timeBasedAlertModalData:R}=P;return Object(C.jsxs)(a.a.Fragment,{children:[Object(C.jsx)("hr",{role:"presentation",className:"headerdivider"}),Object(C.jsx)("div",{className:"checkoutPagecont global",children:Object(C.jsxs)("div",{className:"checkoutContainer ".concat(Object(b.j)(M)),"data-testid":"checkout-page",children:[Object(C.jsx)("img",{className:"px-25px",alt:"cart",src:Object(c.ad)(M,u.a.cart_header_mobile,u.a.Strips_Large_Cart)}),Object(C.jsx)("div",{className:"checkoutHeader col-sm-7 col-md-12 col-lg-7 col-sm-12 mt-10px px-25px ".concat(Object(b.k)(M)),children:Object(C.jsxs)("div",{className:"d-flex align-items-baseline justify-content-between leftPanel",children:[Object(C.jsx)("h3",{className:"checkoutTitle ".concat(Object(b.j)(M)),children:Object(d.translateWithI18Next)(v.a.CART_CHECKOUT)}),Object(C.jsxs)("div",{className:"secure-checkout",children:[Object(C.jsx)("img",{src:u.a.LockIcon,alt:""}),Object(C.jsx)("span",{"data-testid":"secure-checkout-payment",children:Object(d.translateWithI18Next)("secureCheckout")})]})]})}),(null===R||void 0===R?void 0:R.dynamicMenuAlertMessage)&&Object(C.jsx)("div",{"col-mob-left":!0,"col-left":!0,className:"row-cols-12 mt-10px no-bg dynamicmenu-alert","data-testid":"dynamicmenu-alert",children:Object(O.c)(Object(C.jsxs)("span",{className:"dynamicmenu-alert-message",children:[Object(d.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.CHECKOUT_UNAVAILABLE_ITEM)," ",Object(C.jsx)("a",{className:"dynamicmenu-alert-cart-text",href:j.Ce.CART,children:j.I})," ",Object(d.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.TO_CONTINUE)]}))}),(null===e||void 0===e||null===(g=e.checkoutDetails)||void 0===g?void 0:g.showPlaceOrderLoading)&&k&&Object(C.jsx)(p.a,{}),(null===e||void 0===e||null===(x=e.checkoutDetails)||void 0===x?void 0:x.enableGuestOtpCheckout)&&!(null!==e&&void 0!==e&&null!==(I=e.checkoutDetails)&&void 0!==I&&I.guestOtpCheckoutValidated)&&((null===e||void 0===e||null===(f=e.checkoutDetails)||void 0===f?void 0:f.useDifferentNumberFlowFlagForGuidanceMessage)||(null===e||void 0===e||null===(A=e.checkoutDetails)||void 0===A?void 0:A.showGuidanceMessageForOtpExpiry)||(null===e||void 0===e||null===(D=e.checkoutDetails)||void 0===D?void 0:D.showGuidanceMessageForMaxAttemptCount))&&Object(C.jsx)("div",{class:"cart-notification col-12",children:Object(C.jsxs)("div",{class:"notify-alert-guest-checkout",children:[Object(C.jsx)(h.a,{srcFile:N}),Object(C.jsx)("span",{class:"guest-Checkout-warning-msg",children:Object(d.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.GUEST_PHONE_NUMBER_REQUIRED_MESSAGE)})]})}),Object(C.jsxs)("div",{className:"checkoutBody ".concat(Object(b.j)(M)," row  mb-60px"),children:[Object(C.jsxs)("div",{className:"checkoutDescDetails col-sm-12 col-lg-7 col-md-12 leftPanel",children:[_&&Object(b.s)(_,null===e||void 0===e?void 0:e.checkoutDetails,null===e||void 0===e?void 0:e.updateCheckoutDetails),T(S,M?"col-mob-left":"col-left")]}),Object(C.jsx)("div",{className:"mt-10px ".concat(Object(c.ad)(M,"py-25px mobile","")," col-12 col-lg-5 rightPanel"),children:T(S,M?"col-mob-right":"col-right")})]})]})}),P.showCartClearAlert&&Object(C.jsx)(m.a,{})]})}},1310:function(e,t,l){"use strict";var o=l(3),a=l(29),i=l(218),n=l(328),d=l(0),s=l(49),r=l(1156);var c=()=>{const e=Object(r.k)();return{getCartAvailability:Object(o.useCallback)((()=>{e.mutate()}),[e])}},u=l(4),v=l(140),O=l(5),m=l(85),b=l(26),j=l(62),h=l(28);t.a=e=>{var t,l,r,p,C,E,N,g,T,x,I,f;const{checkoutDetails:A,updateCheckoutDetails:D}=e,{dispatch:P,tender:_,isPaymentTypeSelected:y}=A,k=Object(o.useRef)(A),{userOrderState:S}=Object(o.useContext)(m.a),M=Object(O.Lb)(S),R=Object(j.g)(),{getCartAvailability:F}=c(),w=(null===(t=Object(h.c)((e=>null===e||void 0===e?void 0:e.storesReducer)))||void 0===t||null===(l=t.storesWithStatus[0])||void 0===l||null===(r=l.summary)||void 0===r?void 0:r.deliveryPartner)||"";return Object(o.useEffect)((()=>{var e,t,l;let o={paymentPanelTitle:null===u.a||void 0===u.a?void 0:u.a.ADD_PAYMENT_METHOD_HEADER};switch(null===A||void 0===A?void 0:A.paymentProvider){case d.Td.GLOBAL_PAYMENTS:o={enablePayOnArrival:!0,payOnArrivalAllowedTenders:null===A||void 0===A||null===(e=A.allowedTenders)||void 0===e?void 0:e.filter((e=>e===d.Vd.PAY_BY_CASH)),payNowAllowedTenders:null===A||void 0===A||null===(t=A.allowedTenders)||void 0===t?void 0:t.filter((e=>e!==d.Vd.PAY_BY_CASH)),paymentPanelTitle:null===u.a||void 0===u.a?void 0:u.a.PAYMENT_BY};break;case d.Td.PAY_GATE:case null===d.Td||void 0===d.Td?void 0:d.Td.JAPAN_PAYMENTS:case null===d.Td||void 0===d.Td?void 0:d.Td.THAILAND_PAYMENTS:o={paymentPanelTitle:null===u.a||void 0===u.a?void 0:u.a.PAYMENT_BY};break;case d.Td.ADYEN_PAYMENTS:o={paymentPanelTitle:null===b.a||void 0===b.a||null===(l=b.a.ADYEN_PAYMENT_TYPE)||void 0===l?void 0:l.PAYMENT_OPTIONS}}D(o)}),[]),Object(o.useEffect)((()=>{P&&(null===P||void 0===P||P(null===n.o||void 0===n.o?void 0:Object(n.o)()))}),[P]),Object(o.useEffect)((()=>{k.current=A}),[y,null===_||void 0===_?void 0:_.name,null===_||void 0===_?void 0:_.payload]),Object(o.useEffect)((()=>{Object(O.le)()&&Object(a.q)(A,D),P&&P(Object(s.z)())}),[null===A||void 0===A?void 0:A.paymentEnabled]),Object(o.useEffect)((()=>{var e;(null===A||void 0===A||null===(e=A.tender)||void 0===e?void 0:e.name)&&Object(a.u)(A)}),[null===A||void 0===A||null===(p=A.tender)||void 0===p?void 0:p.name]),Object(o.useEffect)((()=>{var e;(null===A||void 0===A||null===(e=A.userParams)||void 0===e?void 0:e.loggedIn)&&Object(a.z)(A,D)}),[null===A||void 0===A||null===(C=A.userFullName)||void 0===C?void 0:C.value,null===A||void 0===A||null===(E=A.userEmail)||void 0===E?void 0:E.value,null===A||void 0===A||null===(N=A.userPhone)||void 0===N?void 0:N.value]),Object(o.useEffect)((()=>{var t;if(null!==A&&void 0!==A&&A.enablePayOnArrival&&null!==A&&void 0!==A&&A.enablePayByCashOption&&(null===e||void 0===e||null===(t=e.location)||void 0===t||!t.isRetryPaymentErrorEnabled)){const e=Object(a.j)(A,D);D({isClickPayOnArrival:e})}}),[null===A||void 0===A?void 0:A.enablePayOnArrival,null===A||void 0===A?void 0:A.userOption]),Object(o.useEffect)((()=>{null!==A&&void 0!==A&&A.enablePayOnArrival&&null!==A&&void 0!==A&&A.enablePayByCashOption&&(Object(a.i)(A,D),D({isClickAddPayment:null===A||void 0===A?void 0:A.isClickPayOnArrival,isPaymentTypeSelected:null===A||void 0===A?void 0:A.isClickPayOnArrival}))}),[null===A||void 0===A?void 0:A.isClickPayOnArrival]),Object(o.useEffect)((()=>{0!==(null===A||void 0===A?void 0:A.total)&&null!==A&&void 0!==A&&A.showGiftCardOrVoucher&&D({tender:{name:"",payload:{}},enableContinuePayment:!1,isClickContinuePayment:!0,isClickAddPayment:!1,isPaymentTypeSelected:!0})}),[null===A||void 0===A?void 0:A.total]),Object(o.useEffect)((()=>{0===(null===A||void 0===A?void 0:A.total)&&null!==A&&void 0!==A&&A.isOrderWithoutPayment&&null!==A&&void 0!==A&&A.showGiftCardOrVoucher&&D({enableContinuePayment:!1,isPaymentTypeSelected:!0,showPlaceOrderLoading:!1,isCateringSomeOneElseContactDetailsAreValid:!0,placeOrderButtonEnabled:!0,isClickContinuePayment:!1,tender:{name:d.Vd.WICODE,payload:{name:d.Vd.WICODE,amount:null===A||void 0===A?void 0:A.total},amount:null===A||void 0===A?void 0:A.total}})}),[null===A||void 0===A?void 0:A.isOrderWithoutPayment,null===A||void 0===A?void 0:A.showGiftCardOrVoucher,null===A||void 0===A?void 0:A.total]),Object(o.useEffect)((()=>{(null===A||void 0===A?void 0:A.isOrderWithoutPayment)&&(null===A||void 0===A?void 0:A.orderId)&&(null===A||void 0===A?void 0:A.isCreateOrderValidateCompleted)&&Object(O.cf)(e)}),[null===A||void 0===A?void 0:A.isCreateOrderValidateCompleted]),Object(o.useEffect)((()=>{(null===A||void 0===A?void 0:A.isRenderFromRNA)&&Object(a.a)(A,D,!1)}),[null===A||void 0===A?void 0:A.isRenderFromRNA]),Object(o.useEffect)((()=>{var e;(null!==(e=A.userParams)&&void 0!==e&&e.loggedIn||null!==A&&void 0!==A&&A.isContactDetailValid)&&D({paymentEnabled:Object(i.b)(A)})}),[null===A||void 0===A||null===(g=A.userParams)||void 0===g?void 0:g.loggedIn,null===A||void 0===A?void 0:A.isContactDetailValid,null===A||void 0===A||null===(T=A.collectionPoint)||void 0===T?void 0:T.name,null===A||void 0===A||null===(x=A.collectionPoint)||void 0===x?void 0:x.carNumber]),Object(o.useEffect)((()=>{var t,l;if(null!==A&&void 0!==A&&null!==(t=A.userParams)&&void 0!==t&&t.loggedIn)switch(null===e||void 0===e||null===(l=e.checkoutDetails)||void 0===l?void 0:l.paymentProvider){case d.Td.BRAIN_TREE:case d.Td.ADYEN_PAYMENTS:return Object(a.y)(A,D,!1);case d.Td.JAPAN_PAYMENTS:return(null===A||void 0===A?void 0:A.total)>0&&Object(v.d)(e)}}),[null===A||void 0===A?void 0:A.paymentProvider,null===A||void 0===A||null===(I=A.userParams)||void 0===I?void 0:I.loggedIn]),Object(o.useEffect)((()=>{var e;(null!==A&&void 0!==A&&A.timerExpired||null!==A&&void 0!==A&&A.maxAttemptReached||null!==A&&void 0!==A&&A.refreshed||null!==A&&void 0!==A&&A.redirectBack)&&((null===A||void 0===A||null===(e=A.userParams)||void 0===e?void 0:e.loggedIn)&&(null===A||void 0===A?void 0:A.lastUsedPaymentMethod)&&D({isClickAddPayment:!0}))}),[null===A||void 0===A?void 0:A.timerExpired,null===A||void 0===A||null===(f=A.userParams)||void 0===f?void 0:f.loggedIn,null===A||void 0===A?void 0:A.maxAttemptReached,null===A||void 0===A?void 0:A.refreshed,null===A||void 0===A?void 0:A.redirectBack]),Object(i.d)({...e,checkoutDetailsUseRef:k,dispositionNew:M,getCartAvailability:F,history:R,deliveryPartner:w})}},618:function(e,t,l){"use strict";l.r(t);var o=l(3),a=l.n(o),i=l(6),n=l(210),d=l(85),s=l(5),r=l(4),c=l(0),u=l(12),v=l(16),O=l(28),m=l(132),b=l(80),j=l(2);const h=e=>{switch(Object(s.rf)(e)){case c.Jb.DELIVERY:return r.a.DELIVERY_INFO;case c.Jb.PICKUP:case c.Jb.CATERING:return r.a.TAKEAWAY_INFO;case c.Jb.DINE_IN:return r.a.DINEIN_INFO}},p=e=>{let{date:t,time:l}=e;let o="";if(t&&l){let e=Object(u.h)(t,c.Tf)===Object(u.e)(c.Tf)?Object(i.translateWithI18Next)(r.a.TODAY):Object(i.translateWithI18Next)(r.a.TOMORROW),a=l;o=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{children:e}),Object(j.jsx)("span",{children:a})]})}return l===c.s&&(o=Object(j.jsx)("label",{children:Object(i.translateWithI18Next)(r.a.ASAP)})),o},C=(e,t,l)=>{var o;const a=null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value;l({address2:a||""})},E=(e,t,l,o,a,i,d,s)=>Object(j.jsx)(n.a,{...e,testId:"CheckoutDispositionInfoItem",importPath:"CHECKOUT_DISPOSITION_INFO_VIEW",getSchedule:p,typeInfo:h,updateAddressDetails:C,scheduleOrderButtonClickHandler:(e,l)=>{if(((e,t,l)=>{const{SCHEDULE_ORDER_DATA:o}=v.a;e.preventDefault(),e.stopPropagation(),l({type:o,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t,changeFlow:!0}})})(e,l,t),d){const{SHOW_SCHEDULE_DISPOSITION:e,SCHEDULE_ORDER_CLICKED:l}=v.a;t({type:e,value:{showSheduleDisposition:!1}}),t({type:l,value:{scheduleModeClicked:!1}})}},showStateCityAddAddress:l,getPwaStorageData:o,showAddressWithApartment:a,showFormattedAddressFromDisposition:i,showComma:s});var N=e=>{var t,l,a,i,n,s;const{userOrderStateDispatch:r}=Object(o.useContext)(d.a),c=Object(O.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),u=null===c||void 0===c||null===(t=c.componentOptions)||void 0===t||null===(l=t.web)||void 0===l||null===(a=l.checkout)||void 0===a?void 0:a.shouldPrepopulateScheduleTime,v=null===c||void 0===c||null===(i=c.savedAddressPage)||void 0===i?void 0:i.showStateCityAddAddress,{showAddressWithApartment:j,showFormattedAddressFromDisposition:h}=null!==(n=null===c||void 0===c?void 0:c.savedAddressPage)&&void 0!==n?n:{},p=Object(m.b)(b.b),C=null===c||void 0===c||null===(s=c.componentOptions)||void 0===s?void 0:s.showComma;return E(e,r,v,p,j,h,u,C)},g=l(97);const T=(e,t,l)=>{if(e.preventDefault(),e.currentTarget.getAttribute(c.wd)===(null===t||void 0===t?void 0:t.userOption))return!0;const o=Object(s.ad)((null===t||void 0===t?void 0:t.userOption)===(null===c.R||void 0===c.R?void 0:c.R.LEAVE_AT_MY_DOOR),null===c.R||void 0===c.R?void 0:c.R.HAND_IT_TO_ME,null===c.R||void 0===c.R?void 0:c.R.LEAVE_AT_MY_DOOR);l({userOption:o,enableDispositionOptionInstruction:o===(null===c.R||void 0===c.R?void 0:c.R.HAND_IT_TO_ME),userInformation:{...null===c.R||void 0===c.R?void 0:c.R.FORM_FIELD_DEFAULT_VALUE,error:Object(s.hb)(Object(s.ge)(null===t||void 0===t?void 0:t.service),o===(null===c.R||void 0===c.R?void 0:c.R.LEAVE_AT_MY_DOOR))}})},x=e=>{switch(Object(s.rf)(e)){case c.Jb.DELIVERY:return r.a.DELIVERY_OPTIONS;case c.Jb.PICKUP:return r.a.TAKEAWAY_OPTIONS;case c.Jb.DINE_IN:return r.a.DINEIN_OPTIONS}},I=(e,t)=>{const{CURB_SIDE:l}=c.R;return!Object(s.ge)(t)||Array.isArray(e)&&e.length>0&&Boolean(e.find((e=>e.collectionPointName===l)))};var f=e=>{const{cartReducer:t}=Object(O.c)((e=>e)),{tenantReducer:l}=Object(O.c)((e=>e)),{checkoutDetails:a,updateCheckoutDetails:i}=e,{userInformation:d,userOption:s,userParams:r,guestOtpCheckoutValidated:c,collectionPoint:u}=a,{elementUniqueLocator:v}=l||{};return Object(o.useEffect)((()=>{const e={...a,guestCheckOutFieldsValidated:null!==r&&void 0!==r&&r.loggedIn?null===r||void 0===r?void 0:r.loggedIn:null===a||void 0===a?void 0:a.guestCheckOutFieldsValidated};Object(g.O)(e,i)}),[d,s,c,u,null===a||void 0===a?void 0:a.address2]),((e,t,l,o)=>Object(j.jsx)(n.a,{...e,testId:"CheckoutDispositionOptionsItem",importPath:"CHECKOUT_DISPOSITION_OPTIONS_VIEW",cartReducer:t,tenantReducer:l,typeOptions:x,kfcToCarCollectionPointCheck:I,radioBtnChangeHandler:T,updateDispositionOptions:t=>Object(g.M)(t,e.checkoutDetails,e.updateCheckoutDetails),elementUniqueLocator:o}))(e,t,l,v)},A=l(178),D=l(328),P=l(86),_=l(122),y=l(15),k=l(41),S=l(412);const M=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0;return Object(j.jsxs)("div",{className:o?"":"labelContent contact-label pl-25px  col-sm-4 col-12 ".concat(l),children:[Object(j.jsx)("span",{children:e}),t]})},R=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return!(null!==e&&void 0!==e&&e.loggedIn)&&Object(j.jsx)(k.c,{variant:k.b.secondary,fullWidth:!0,type:"button",className:l,"data-testid":"sign-in","data-id":null===c.qb||void 0===c.qb?void 0:c.qb.CHECKOUT_SIGN_IN_ATTR_DATA_ID,onClick:t,children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.SIGN_IN)})},F=e=>{const{userParams:t,signUpBtnClickHandler:l,btnClassName:o="contactInfo-button-checkout col-12"}=e;return!(null!==t&&void 0!==t&&t.loggedIn)&&Object(j.jsx)(k.c,{variant:k.b.tertiary,fullWidth:!0,type:"button",className:o,"data-testid":"sign-up","data-id":null===c.qb||void 0===c.qb?void 0:c.qb.CHECKOUT_SIGN_UP_ATTR_DATA_ID,onClick:l,children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.SIGN_UP)})},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{updateCheckoutDetails:l}=e;return Object(j.jsx)("button",{type:"button",className:"btn btn-outlined btn-margin checkout-sing-in ".concat(t),"data-testid":"enter-contact-details",onClick:()=>l({isCateringSomeOneElseContactDetailsEnabled:!0,isCateringSomeOneElseContactDetailsAreValid:!1}),children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.ENTER_CONTACT_DETAILS)})},L=e=>{const{checkoutDetails:t,continueAsaGustBtnClickHandler:l}=e;return!(null!==t&&void 0!==t&&t.isEnableGustUser)&&Object(j.jsx)("div",{className:"col-12 center-element mt-20px txt-align-center",children:Object(j.jsx)("button",{className:"checkout-link-btn wd-max-content",type:"button",variant:"link dark",onClick:e=>l(e),"data-testid":"continue-as-a-gust",children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.CONTINUE_AS_A_GUEST)})})},B=e=>{const{userFirstName:t,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:o,errorStyleForMaterialTextInput:a,className:n="",disabled:d=null,classNameCont:s="",name:c="",maxLengthFirstName:u}=e;return Object(j.jsxs)("div",{className:"".concat(s),children:[Object(j.jsx)(_.a,{className:"formElement ".concat(o(null===t||void 0===t?void 0:t.error)," ").concat(n),placeholder:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.FIRST_NAME_PLACE_HOLDER),onChange:l,onKeyPress:S.q,onBlur:l,inputTestId:"form-firstname",name:"".concat(null===r.a||void 0===r.a?void 0:r.a.FIRST_NAME_LABEL).concat(""!==c?"_"+c:""),value:null===t||void 0===t?void 0:t.value,autocomplete:"off",maxLength:u,disabled:d}),Object(j.jsxs)("div",{id:"userFirstName",className:a(null===t||void 0===t?void 0:t.error),children:[(null===t||void 0===t?void 0:t.error)&&Object(j.jsx)("img",{src:null===y.a||void 0===y.a?void 0:y.a.Ellipse,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:null===t||void 0===t?void 0:t.errorMessage})]})]})},V=e=>{const{userLastName:t,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:o,errorStyleForMaterialTextInput:a,className:n="",disabled:d=null,classNameCont:s="",name:c="",maxLengthLastName:u}=e;return Object(j.jsxs)("div",{className:"".concat(s),children:[Object(j.jsx)(_.a,{className:"formElement ".concat(o(null===t||void 0===t?void 0:t.error)," ").concat(n),placeholder:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.LAST_NAME_PLACE_HOLDER),onChange:l,onKeyPress:S.q,onBlur:l,inputTestId:"form-lastname",name:"".concat(null===r.a||void 0===r.a?void 0:r.a.LAST_NAME_LABEL).concat(""!==c?"_"+c:""),value:null===t||void 0===t?void 0:t.value,autocomplete:"off",maxLength:u,disabled:d}),Object(j.jsxs)("div",{id:"userLastName",className:a(null===t||void 0===t?void 0:t.error),children:[(null===t||void 0===t?void 0:t.error)&&Object(j.jsx)("img",{src:null===y.a||void 0===y.a?void 0:y.a.Ellipse,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:null===t||void 0===t?void 0:t.errorMessage})]})]})},W=e=>{const{userPhone:t,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:o,errorStyleForMaterialTextInput:a,className:n="",disabled:d=null,classNameCont:s="",name:c="",maxLengthPhoneNumber:u,enableAddress2DetailsPanel:v}=e;return Object(j.jsxs)("div",{className:"".concat(s),children:[Object(j.jsx)(_.a,{className:v?"".concat(o(null===t||void 0===t?void 0:t.error)):"formElement ".concat(o(null===t||void 0===t?void 0:t.error)," ").concat(n),placeholder:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.PHONE_NUMBER_TEXT),onChange:l,onBlur:l,inputTestId:"form-phone",name:"".concat(null===r.a||void 0===r.a?void 0:r.a.PHONE).concat(""!==c?"_"+c:""),value:null===t||void 0===t?void 0:t.value,autocomplete:"off",maxLength:u,disabled:d}),Object(j.jsxs)("div",{id:"userPhone",className:a(null===t||void 0===t?void 0:t.error),children:[(null===t||void 0===t?void 0:t.error)&&Object(j.jsx)("img",{src:null===y.a||void 0===y.a?void 0:y.a.Ellipse,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:null===t||void 0===t?void 0:t.errorMessage})]})]})},H=e=>{const{userEmail:t,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:o,errorStyleForMaterialTextInput:a,className:n="",disabled:d=null,classNameCont:s="",name:c="",maxLengthEmail:u,enableAddress2DetailsPanel:v}=e;return Object(j.jsxs)("div",{className:"".concat(s),children:[Object(j.jsx)(_.a,{className:v?"".concat(o(null===t||void 0===t?void 0:t.error)):"formElement ".concat(o(null===t||void 0===t?void 0:t.error)," ").concat(n),placeholder:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.EMAIL_ADDRESS),onChange:l,onBlur:l,inputTestId:"form-email",name:"".concat(null===r.a||void 0===r.a?void 0:r.a.EMAIL).concat(""!==c?"_"+c:""),value:null===t||void 0===t?void 0:t.value,autocomplete:"off",maxLength:u,disabled:d}),Object(j.jsxs)("div",{id:"userEmail",className:a(null===t||void 0===t?void 0:t.error),children:[(null===t||void 0===t?void 0:t.error)&&Object(j.jsx)("img",{src:null===y.a||void 0===y.a?void 0:y.a.Ellipse,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:null===t||void 0===t?void 0:t.errorMessage})]})]})},U=e=>Object(j.jsx)("button",{type:"button",className:"btn btn-outlined btn-margin checkout-sing-in checkout-contact-edit-btn ".concat(null===e||void 0===e?void 0:e.className),"data-testid":"edit",onClick:()=>(e=>{const{updateCheckoutDetails:t}=e;t({paymentEnabled:!0,isClickAddPayment:!1,showPreValidationPaymentContactError:!0,tender:{name:"",payload:{}},isContactDetailValid:!1,guestCheckOutFieldsValidated:!1,trueMoneyWalletGeneratetOTPErrorResponse:""})})(e),children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.EDIT)}),G=e=>{const{checkoutDetails:t,updateCateringSomeOneElseContactDetails:l}=e,{maxLengthFirstName:o,maxLengthLastName:a,maxLengthPhoneNumber:n,maxLengthEmail:d,cateringSomeOneElseContactDetails:u}=t,{userFirstName:v,userLastName:O,userPhone:m,userEmail:b}=u;return Object(j.jsxs)("div",{className:"col-12 row row-cols-12 ",children:[B({name:c.M,userFirstName:v,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:s.Af,errorStyleForMaterialTextInput:s.P,classNameCont:"col-12",maxLengthFirstName:o}),V({name:c.M,userLastName:O,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:s.Af,errorStyleForMaterialTextInput:s.P,classNameCont:"col-12",maxLengthLastName:a}),W({name:c.M,userPhone:m,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:s.Af,errorStyleForMaterialTextInput:s.P,classNameCont:"col-12",maxLengthPhoneNumber:n}),H({name:c.M,userEmail:b,onChangeOrOnBlurHandler:l,styleForMaterialTextInput:s.Af,errorStyleForMaterialTextInput:s.P,classNameCont:"col-12",maxLengthEmail:d}),Object(j.jsx)("div",{className:"d-flex mt-20px mb-20px info-note",children:Object(j.jsx)("span",{children:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.INFORM_TO_CONTACT_NOMINATED_PERSON_ORDER)})})]})};var Y=l(277),K=l(278),X=l(413),J=l(1273);const q=()=>{var e,t;null===(e=window)||void 0===e||null===(t=e.OneTrust)||void 0===t||t.ToggleInfoDisplay()},z=e=>{var t,l;null!==e&&void 0!==e&&e.guestOtpTokenResponse&&(null===e||void 0===e||e.dispatch(Object(A.a)({phone:null===e||void 0===e||null===(t=e.userPhone)||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(" ").join(""),countrycode:null===e||void 0===e?void 0:e.countryCodePhoneNumber,accessToken:null===e||void 0===e?void 0:e.guestOtpTokenResponse})))},Q=e=>{e({isOtpMatch:!0})},$=(e,t)=>{t({openOtpModal:!1}),Object(g.o)(e,t)},Z=e=>{var t,l,o,a,n,d,u,v,m;const{checkoutDetails:b,signInBtnClickHandler:h,signUpBtnClickHandler:p,updateCheckoutDetails:C,displayFor:E=null,dispatch:N}=e,g=Object(O.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),T=null===g||void 0===g||null===(t=g.componentOptions)||void 0===t||null===(l=t.web)||void 0===l||null===(o=l.checkout)||void 0===o?void 0:o.enablePhoneTile,x=()=>{var e,t,l,o,a;const i=Boolean((null===b||void 0===b||null===(e=b.userFullName)||void 0===e?void 0:e.value)&&(null===b||void 0===b||null===(t=b.userPhone)||void 0===t?void 0:t.value)&&(null===b||void 0===b?void 0:b.termsPolicyCheckbox)),n=Boolean((null===b||void 0===b||null===(l=b.userInformation)||void 0===l?void 0:l.error)||(null===b||void 0===b||null===(o=b.userFullName)||void 0===o?void 0:o.error)||(null===b||void 0===b||null===(a=b.userPhone)||void 0===a?void 0:a.error)),d=i&&!n;C({paymentEnabled:d,isContactDetailValid:d})};return Object(j.jsxs)("div",{className:"checkoutContactInfoContainer",children:[Object(j.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[M(E===c.M?Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.SOMEONE_ELSE_COLLECTING_ORDER):Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.SIGN_IN_TO_YOUR_ACCOUNT),null,"".concat(null!==b&&void 0!==b&&b.isMobile?"txt-align-center":""," ").concat(E===c.M?c.M:"")),Object(j.jsxs)("div",{className:"contactInfoContent  col-sm-8 col-12",children:[E!==c.M&&R(null===b||void 0===b?void 0:b.userParams,h,"contactInfo-button-checkout col-12"),E!==c.M&&(null===b||void 0===b?void 0:b.showSignUpBtn)&&F({userParams:null===b||void 0===b?void 0:b.userParams,signUpBtnClickHandler:p,btnClassName:"contactInfo-button-checkout col-12"}),E!==c.M&&(null===b||void 0===b?void 0:b.guestCheckoutAllowed)&&L(e),E===c.M&&!(null!==b&&void 0!==b&&b.isCateringSomeOneElseContactDetailsEnabled)&&w(e,"col-12"),E===c.M&&(null===b||void 0===b?void 0:b.isCateringSomeOneElseContactDetailsEnabled)&&G(e)]})]}),(null===b||void 0===b?void 0:b.isEnableGustUser)&&E!==c.M&&Object(j.jsxs)("div",{className:"row row-cols-12",children:[M(Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.CONTINUE_AS_A_GUEST),null,"mt-0px-imp"),(null===b||void 0===b||null===(a=b.guestCheckoutFormConfig)||void 0===a||null===(n=a.fieldsConfig)||void 0===n?void 0:n.length)&&Object(j.jsxs)("div",{className:"mt-4 contactInfoContent col-12 col-sm-7 d-flex",children:[Object(j.jsxs)("div",{className:"col-12 ".concat(null!==b&&void 0!==b&&b.isMobile?"editForm":""),children:[Object(j.jsx)(K.a,{formConfig:{...null===b||void 0===b?void 0:b.guestCheckoutFormConfig,checkoutDetails:b,updateCheckoutDetails:C,enablePhoneTile:T}}),Object(j.jsx)("div",{children:(null===(d=window)||void 0===d?void 0:d.OnetrustActiveGroups)&&!(null!==(u=JSON.stringify(null===(v=window)||void 0===v?void 0:v.OnetrustActiveGroups))&&void 0!==u&&u.includes(c.A))&&Object(X.a)(q)}),(null===b||void 0===b?void 0:b.openOtpModal)&&Object(j.jsx)(J.a,{updateCheckoutDetails:C,closeOtpModalHandlerCheckout:$,fromCheckout:!0,otpSendTo:null===b||void 0===b||null===(m=b.userPhone)||void 0===m?void 0:m.value,accessToken:null===b||void 0===b?void 0:b.guestOtpTokenResponse,callValidateOtpAPI:e=>{((e,t,l)=>{null===l||void 0===l||l.dispatch(Object(A.f)({otp:e,accessToken:null===l||void 0===l?void 0:l.guestOtpTokenResponse,otpId:null===l||void 0===l?void 0:l.guestOtpId})),!Object(s.le)()&&x()})(e,0,b)},callResendOtpAPI:z,isOtpMatch:(null===b||void 0===b?void 0:b.guestOtpValidationMessge)===c.Cc,hideError:Q,invalidOtpCount:null===b||void 0===b?void 0:b.guestOtpValidationFailedAttemptsCount,numberOfDigitsTobeMasked:null===b||void 0===b?void 0:b.numberOfDigitsTobeMasked,maskedNumberOfDigit:null===b||void 0===b?void 0:b.maskedNumberOfDigit,checkoutDetails:b})]}),(null===b||void 0===b?void 0:b.paymentEnabled)&&(null===b||void 0===b?void 0:b.isClickAddPayment)&&U({checkoutDetails:b,updateCheckoutDetails:C,className:"mt-0px-imp float-right"}),(null===b||void 0===b?void 0:b.enableGuestOtpCheckout)&&(null===b||void 0===b?void 0:b.openGuestPhoneNumberChangeModal)&&Object(Y.a)(b,C,(()=>{C({openGuestPhoneNumberChangeModal:!1})}))]})]})]})};var ee=a.a.memo(Z),te=l(55);const le=()=>{Object(P.c)()},oe=()=>{Object(P.a)()};var ae=e=>{var t,l,a,i,n,d,r,u,v,m,b,h,p,C,E;const{checkoutDetails:N,updateCheckoutDetails:T,displayFor:x=null}=e,{dispatch:I,userFullName:f,userFirstName:P,userLastName:_,userPhone:y,userEmail:k,termsPolicyCheckbox:S,guestCheckOutFieldsValidated:M,cateringSomeOneElseContactDetails:R,phoneMarketingOpt:F,enableCookieAcceptance:w}=N,{contentReducer:L}=Object(O.c)((e=>e)),B=Object(O.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),V=Object(O.c)((e=>e.tenantReducer)),W=null===V||void 0===V||null===(t=V.componentOptions)||void 0===t||null===(l=t.web)||void 0===l||null===(a=l.checkout)||void 0===a?void 0:a.hideNonfilledOptionalfields;return Object(o.useEffect)((()=>{T({isEnableFullName:!Object(s.le)()}),B.loggedIn||(I(Object(D.k)()),Object(Y.e)(T))}),[]),Object(o.useEffect)((()=>{var e,t,l,o;if((null===L||void 0===L||null===(e=L.guestContentData)||void 0===e||null===(t=e.items)||void 0===t||null===(l=t[0])||void 0===l||null===(o=l.fields)||void 0===o?void 0:o.formField.length)>0){var a,i,n;const e=null!==(a=window)&&void 0!==a&&a.OnetrustActiveGroups?null===(i=JSON.stringify(null===(n=window)||void 0===n?void 0:n.OnetrustActiveGroups))||void 0===i?void 0:i.includes(c.A):!w;T({guestCheckoutFormConfig:{fieldsConfig:Object(Y.d)(L,e,F,N,W),isFormValid:!1,isFormReadOnly:null===N||void 0===N?void 0:N.isClickAddPayment,onFormChangeHandler:Y.c}})}}),[null===L||void 0===L?void 0:L.guestContentData,null===(i=window)||void 0===i?void 0:i.OnetrustActiveGroups]),Object(o.useEffect)((()=>{var e,t,l;null!==N&&void 0!==N&&null!==(e=N.userPhone)&&void 0!==e&&e.value&&null!==N&&void 0!==N&&N.guestOtpTokenResponse&&I(Object(A.a)({phone:null===N||void 0===N||null===(t=N.userPhone)||void 0===t||null===(l=t.value)||void 0===l?void 0:l.split(" ").join(""),countrycode:null===N||void 0===N?void 0:N.countryCodePhoneNumber,accessToken:null===N||void 0===N?void 0:N.guestOtpTokenResponse}))}),[null===N||void 0===N?void 0:N.guestOtpTokenResponse]),Object(o.useEffect)((()=>{var e,t;null!==N&&void 0!==N&&N.validateOTPResponse&&I(Object(A.a)({phone:null===N||void 0===N||null===(e=N.userPhone)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.split(" ").join(""),countrycode:null===N||void 0===N?void 0:N.countryCodePhoneNumber,accessToken:null===N||void 0===N?void 0:N.guestOtpTokenResponse}))}),[null===N||void 0===N?void 0:N.validateOTPResponse]),Object(o.useEffect)((()=>{var e;(null===N||void 0===N||!N.openOtpModal)&&(null===N||void 0===N?void 0:N.guestOtpId)&&(null===N||void 0===N||null===(e=N.userPhone)||void 0===e?void 0:e.value)&&T({openOtpModal:!0})}),[null===N||void 0===N?void 0:N.guestOtpId]),Object(o.useEffect)((()=>{(null===N||void 0===N?void 0:N.openOtpModal)&&(null===N||void 0===N?void 0:N.guestOtpValidationMessge)===c.Cc&&T({openOtpModal:!1,guestOtpCheckoutValidated:!0})}),[null===N||void 0===N?void 0:N.guestOtpValidationMessge]),Object(o.useEffect)((()=>{null!==N&&void 0!==N&&N.openOtpModal&&(null===N||void 0===N?void 0:N.guestOtpValidationFailedAttemptsCount)===(null===N||void 0===N?void 0:N.maximumFailedOtpCount)&&(null===N||void 0===N?void 0:N.guestOtpValidationMessge)===c.Bc&&(T({openOtpModal:!1,guestOtpCheckoutValidated:!1}),Object(g.o)(N,T))}),[null===N||void 0===N?void 0:N.guestOtpValidationMessge,null===N||void 0===N?void 0:N.guestOtpValidationFailedAttemptsCount]),Object(o.useEffect)((()=>{(null===N||void 0===N?void 0:N.openOtpModal)&&(null===N||void 0===N?void 0:N.guestOtpValidationMessge)===c.Bc&&T({guestOtpCheckoutValidated:!1})}),[null===N||void 0===N?void 0:N.guestOtpValidationMessge,null===N||void 0===N?void 0:N.guestOtpValidationFailedAttemptsCount]),Object(o.useEffect)((()=>{var e,t;null!==N&&void 0!==N&&null!==(e=N.guestCheckoutFormConfig)&&void 0!==e&&null!==(t=e.fieldsConfig)&&void 0!==t&&t.length&&(T({guestCheckoutFormConfig:{...null===N||void 0===N?void 0:N.guestCheckoutFormConfig,isFormReadOnly:null===N||void 0===N?void 0:N.isClickAddPayment}}),Object(g.q)(N))}),[null===N||void 0===N?void 0:N.isClickAddPayment]),Object(o.useEffect)((()=>{Object(s.M)(document.title,null===f||void 0===f?void 0:f.error,null===f||void 0===f?void 0:f.errorMessage)}),[null===f||void 0===f?void 0:f.errorMessage,null===f||void 0===f?void 0:f.error]),Object(o.useEffect)((()=>{Object(s.M)(document.title,null===P||void 0===P?void 0:P.error,null===P||void 0===P?void 0:P.errorMessage)}),[null===P||void 0===P?void 0:P.errorMessage,null===P||void 0===P?void 0:P.error]),Object(o.useEffect)((()=>{Object(s.M)(document.title,null===_||void 0===_?void 0:_.error,null===_||void 0===_?void 0:_.errorMessage)}),[null===_||void 0===_?void 0:_.errorMessage,null===_||void 0===_?void 0:_.error]),Object(o.useEffect)((()=>{Object(s.M)(document.title,null===y||void 0===y?void 0:y.error,null===y||void 0===y?void 0:y.errorMessage)}),[null===y||void 0===y?void 0:y.errorMessage,null===y||void 0===y?void 0:y.error]),Object(o.useEffect)((()=>{Object(s.M)(document.title,null===k||void 0===k?void 0:k.error,null===k||void 0===k?void 0:k.errorMessage)}),[null===k||void 0===k?void 0:k.errorMessage,null===k||void 0===k?void 0:k.error]),Object(o.useEffect)((()=>{Object(g.O)(N,T)}),[f,P,_,k,y,S,M,null===R||void 0===R?void 0:R.userFirstName,null===R||void 0===R?void 0:R.userLastName,null===R||void 0===R?void 0:R.userEmail,null===R||void 0===R?void 0:R.userPhone,null===N||void 0===N||null===(n=N.collectionPoint)||void 0===n?void 0:n.name,null===N||void 0===N?void 0:N.guestOtpCheckoutValidated]),Object(o.useEffect)((()=>{var e,t;Object(te.k)(null===N||void 0===N?void 0:N.marketingOptCheckbox,null===N||void 0===N||null===(e=N.marketingOptInVal)||void 0===e?void 0:e.Email,null===N||void 0===N||null===(t=N.marketingOptInVal)||void 0===t?void 0:t.Phone,null===N||void 0===N?void 0:N.showTermsConditions)}),[null===N||void 0===N||null===(d=N.marketingOptInVal)||void 0===d?void 0:d.Email,null===N||void 0===N||null===(r=N.marketingOptInVal)||void 0===r?void 0:r.Phone]),Object(o.useEffect)((()=>{var e,t;x===c.M&&Object(s.M)(document.title,null===R||void 0===R||null===(e=R.userFirstName)||void 0===e?void 0:e.error,null===R||void 0===R||null===(t=R.userFirstName)||void 0===t?void 0:t.errorMessage)}),[null===R||void 0===R||null===(u=R.userFirstName)||void 0===u?void 0:u.errorMessage,null===R||void 0===R||null===(v=R.userFirstName)||void 0===v?void 0:v.error]),Object(o.useEffect)((()=>{var e,t;x===c.M&&Object(s.M)(document.title,null===R||void 0===R||null===(e=R.userLastName)||void 0===e?void 0:e.error,null===R||void 0===R||null===(t=R.userLastName)||void 0===t?void 0:t.errorMessage)}),[null===R||void 0===R||null===(m=R.userLastName)||void 0===m?void 0:m.errorMessage,null===R||void 0===R||null===(b=R.userLastName)||void 0===b?void 0:b.error]),Object(o.useEffect)((()=>{var e,t;x===c.M&&Object(s.M)(document.title,null===R||void 0===R||null===(e=R.userPhone)||void 0===e?void 0:e.error,null===R||void 0===R||null===(t=R.userPhone)||void 0===t?void 0:t.errorMessage)}),[null===R||void 0===R||null===(h=R.userPhone)||void 0===h?void 0:h.errorMessage,null===R||void 0===R||null===(p=R.userPhone)||void 0===p?void 0:p.error]),Object(o.useEffect)((()=>{var e,t;x===c.M&&Object(s.M)(document.title,null===R||void 0===R||null===(e=R.userEmail)||void 0===e?void 0:e.error,null===R||void 0===R||null===(t=R.userEmail)||void 0===t?void 0:t.errorMessage)}),[null===R||void 0===R||null===(C=R.userEmail)||void 0===C?void 0:C.errorMessage,null===R||void 0===R||null===(E=R.userEmail)||void 0===E?void 0:E.error]),Object(j.jsx)(ee,{...e,updateGustUserContactDetails:t=>Object(g.N)(t,null===e||void 0===e?void 0:e.checkoutDetails,null===e||void 0===e?void 0:e.updateCheckoutDetails),updateCateringSomeOneElseContactDetails:t=>Object(g.u)(t,null===e||void 0===e?void 0:e.checkoutDetails,null===e||void 0===e?void 0:e.updateCheckoutDetails),signInBtnClickHandler:le,signUpBtnClickHandler:oe,continueAsaGustBtnClickHandler:()=>((e,t)=>{null!==e&&void 0!==e&&e.isEnableGustUser||(t({isEnableGustUser:!0}),(null===e||void 0===e?void 0:e.enableGuestOtpCheckout)&&Object(g.o)(e,t))})(null===e||void 0===e?void 0:e.checkoutDetails,null===e||void 0===e?void 0:e.updateCheckoutDetails)})},ie=l(1310),ne=l(35);var de=e=>{const{tenantId:t,basketId:l}=null===e||void 0===e?void 0:e.checkoutDetails,o=Object(O.b)();return((e,t)=>Object(j.jsx)(n.a,{...e,testId:"CheckPriceSummaryView",importPath:"CHECKOUT_PRICE_SUMMARY_VIEW",removeCouponHandler:t}))(e,(e=>{o(Object(ne.p)({basketId:l,tenantId:t,couponCode:e}))}))},se=l(1293),re=l(186),ce=l(449);const ue=(e,t)=>{switch(t){case re.a.COMPOSITE:case re.a.PERCENTAGE:return null===e||void 0===e?void 0:e.calculatedValue;case re.a.ABSOLUTE:return null===e||void 0===e?void 0:e.value;default:return}},ve=(e,t,l)=>{var o,a,n;const{donationsButtonData:d,setDonationsButtonData:c,updateCheckoutDetails:u,cartTotal:v,donationChargeType:O,checkoutDetails:m}=l,b=null===d||void 0===d||null===(o=d.donationChargeOption)||void 0===o?void 0:o.find((t=>(null===t||void 0===t?void 0:t.name)===(null===e||void 0===e?void 0:e.name))),j=null===d||void 0===d||null===(a=d.donationChargeOption)||void 0===a?void 0:a.map(((e,l)=>({...e,isDefault:t===l}))),h=null!==m&&void 0!==m&&null!==(n=m.userParams)&&void 0!==n&&n.loggedIn?{...m,guestCheckOutFieldsValidated:!0}:m;c({...d,donationChargeOption:j,showDonationsCustomFields:(null===b||void 0===b?void 0:b.name)===(null===re.a||void 0===re.a?void 0:re.a.OTHERS),customAmount:"",addDonationBtnHandler:!0,buttonText:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.ADD_DRIVER_TIP),editButtonShow:!1,showCurrencyField:!1,inputFiledValidErrormsg:""}),(null===b||void 0===b?void 0:b.name)===(null===re.a||void 0===re.a?void 0:re.a.NOT_NOW)?(u({driverdeliveryTip:0,total:v,driverTipDisplayAmount:"",paymentEnabled:Object(g.r)(m),isCustomTipSelected:!0,finalAmount:Object(s.g)(v,null===m||void 0===m?void 0:m.currencyConversionFactor),isAddTipeSelected:!1}),Object(g.O)(h,u)):(null===b||void 0===b?void 0:b.name)===(null===re.a||void 0===re.a?void 0:re.a.OTHERS)?u({driverdeliveryTip:1,total:v,driverTipDisplayAmount:"",paymentEnabled:!1,isClickAddPayment:!1,tender:{name:""},isCustomTipSelected:!1,finalAmount:Object(s.g)(v+ue(e,O),null===m||void 0===m?void 0:m.currencyConversionFactor),isAddTipeSelected:!1}):(u({driverdeliveryTip:ue(e,O),total:v+ue(e,O),driverTipDisplayAmount:ue(e,O),paymentEnabled:Object(g.r)(m),isCustomTipSelected:!0,finalAmount:Object(s.g)(v+ue(e,O),null===m||void 0===m?void 0:m.currencyConversionFactor),isAddTipeSelected:!1,tender:{name:"",payload:{}},isClickAddPayment:!1}),Object(g.O)(h,u))},Oe=(e,t)=>{const{donationsButtonData:l,setDonationsButtonData:o,cartSubTotal:a,currencyConversionFactor:n}=t,d=e.target.value;Number((d*n).toFixed(2))>Number(a)?o({...l,customAmount:d,inputFiledValidErrormsg:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIPPING_EXCEEDED_MSG)}):""!==d&&(isNaN(d)||Number(d)<1)?o({...l,customAmount:d,inputFiledValidErrormsg:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIPPING_INVALID_MSG)}):o({...l,customAmount:d,inputFiledValidErrormsg:""})},me=e=>{const{donationsButtonData:t,setDonationsButtonData:l,updateCheckoutDetails:o,guestCheckOutFieldsValidated:a,userParams:n,cartTotal:d,currencyConversionFactor:c}=e;l({...t,addDonationBtnHandler:!1,editButtonShow:!0,buttonText:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.UPDATE_DRIVER_TIP)}),o({driverdeliveryTip:Number(null===t||void 0===t?void 0:t.customAmount)*c,total:Number(d)+Number(null===t||void 0===t?void 0:t.customAmount)*c,finalAmount:Object(s.g)(Number(d)+Number(null===t||void 0===t?void 0:t.customAmount)*c,c),driverTipDisplayAmount:Number(null===t||void 0===t?void 0:t.customAmount)*c,paymentEnabled:!!(null!==n&&void 0!==n&&n.loggedIn||a),isCustomTipSelected:!0,isAddTipeSelected:!0}),Object(s.Cf)(Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIP_ADDED_TOAST_MESSAGE),"","favorites-added-toast")},be=e=>{const{donationsButtonData:t,setDonationsButtonData:l,updateCheckoutDetails:o,checkoutDetails:a}=e;l({...t,customAmount:"",inputFiledValidErrormsg:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIPPING_INVALID_MSG),editButtonShow:!1,buttonText:Object(i.translateWithI18Next)(null!==a&&void 0!==a&&a.isAddTipeSelected?null===r.a||void 0===r.a?void 0:r.a.UPDATE_DRIVER_TIP:null===r.a||void 0===r.a?void 0:r.a.ADD_DRIVER_TIP),showCurrencyField:!1}),o({paymentEnabled:!1,isClickAddPayment:!1,tender:{name:""},isCustomTipSelected:!1})},je=e=>{const{donationsButtonData:t,setDonationsButtonData:l,updateCheckoutDetails:o}=e;l({...t,addDonationBtnHandler:!0,editButtonShow:!1,buttonText:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.UPDATE_DRIVER_TIP)}),o({paymentEnabled:!1,isClickAddPayment:!1,tender:{name:""},isCustomTipSelected:!1})},he=(e,t)=>{switch(null===e||void 0===e?void 0:e.name){case null===re.a||void 0===re.a?void 0:re.a.NOT_NOW:return Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.NOT_NOW);case null===re.a||void 0===re.a?void 0:re.a.OTHERS:return Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.OTHER);default:return(t===(null===re.a||void 0===re.a?void 0:re.a.PERCENTAGE)||t===(null===re.a||void 0===re.a?void 0:re.a.COMPOSITE))&&"".concat(null===e||void 0===e?void 0:e.value).concat(t!==(null===re.a||void 0===re.a?void 0:re.a.VALUE)?c.fg:"")}},pe=(e,t,l,o)=>{switch(null===e||void 0===e?void 0:e.name){case null===re.a||void 0===re.a?void 0:re.a.NOT_NOW:case null===re.a||void 0===re.a?void 0:re.a.OTHERS:return;default:return"".concat(Object(s.K)(t===(null===re.a||void 0===re.a?void 0:re.a.ABSOLUTE)?null===e||void 0===e?void 0:e.value:null===e||void 0===e?void 0:e.calculatedValue,{currencySymbol:l,currencyConversionFactor:o}))}},Ce=e=>{switch(null===e||void 0===e?void 0:e.name){case null===re.a||void 0===re.a?void 0:re.a.NOT_NOW:case null===re.a||void 0===re.a?void 0:re.a.OTHERS:return"donationtext";default:return""}},Ee=e=>{const{donationsButtonData:t,setDonationsButtonData:l}=e;l({...t,showCurrencyField:!0})},Ne=(e,t)=>{const{donationsButtonData:l,setDonationsButtonData:o}=t;o({...l,showCurrencyField:!1,inputFiledValidErrormsg:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIPPING_INVALID_MSG)})};var ge=e=>{const{checkoutDetails:t,updateCheckoutDetails:l}=e,{currencySymbol:a,currencyConversionFactor:n,driverTippingChargeType:d,driverTippingChargeOption:u,cartTotal:v,guestCheckOutFieldsValidated:O,userParams:m,cartSubTotal:b,driverTipDefaultSelected:h}=t,[p,C]=Object(o.useState)({donationChargeOption:null===u||void 0===u?void 0:u.map((e=>({...e,displayChargeAmount:he(e,d),containerClassName:d!==re.a.COMPOSITE?"donationtext":Ce(e),displayNonPercentageAmount:d!==(null===re.a||void 0===re.a?void 0:re.a.PERCENTAGE)?pe(e,d,a,n):""}))).filter((e=>e.isSelected)),inputFiledValidErrormsg:"",customAmount:"",addDonationBtnHandler:!0,showDonationsCustomFields:!1,showNonDonationPercentage:d!==(null===re.a||void 0===re.a?void 0:re.a.PERCENTAGE),donationRegexPattern:c.pb,editButtonShow:!1,buttonText:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.ADD_DRIVER_TIP),showCurrencyField:!1,paymentAllowed:!(null===m||void 0===m||!m.loggedIn)||O});return Object(o.useEffect)((()=>{null!==m&&void 0!==m&&m.loggedIn||C({...p,paymentAllowed:O})}),[O]),Object(o.useEffect)((()=>{const e=null===h||void 0===h?void 0:h[0];(null===e||void 0===e?void 0:e.name)!==(null===re.a||void 0===re.a?void 0:re.a.NOT_NOW)&&(null===e||void 0===e?void 0:e.name)!==(null===re.a||void 0===re.a?void 0:re.a.OTHERS)?(l({driverdeliveryTip:ue(e,d),total:v+ue(e,d),finalAmount:Object(s.g)(v+ue(e,d),null===t||void 0===t?void 0:t.currencyConversionFactor),driverTipDisplayAmount:ue(e,d)}),C({...p,showDonationsCustomFields:!1})):(null===e||void 0===e?void 0:e.name)!==(null===re.a||void 0===re.a?void 0:re.a.NOT_NOW)?(l({isCustomTipSelected:!1}),C({...p,showDonationsCustomFields:!0})):(l({driverdeliveryTip:0}),C({...p,showDonationsCustomFields:!1}))}),[]),Object(j.jsx)(ce.a,{donationsButtonData:p,setDonationsButtonData:C,cartTotal:v,currencySymbol:a,currencyConversionFactor:n,updateCheckoutDetails:l,donationChargeType:d,onClickDonationHandler:ve,onClickDonationAddHandler:me,onChangeInputHandler:Oe,onClearDonationTextHandler:be,onEditDonationTextHandler:je,title:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIP_YOUR_DRIVER_DESC),shortDesc:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.TIP_YOUR_DRIVER),manualEditButtonTitle:Object(i.translateWithI18Next)(null===r.a||void 0===r.a?void 0:r.a.EDIT),guestCheckOutFieldsValidated:O,cartSubTotal:b,userParams:m,handleFocus:Ee,handleBlur:Ne,checkoutDetails:t})},Te=l(190),xe=l(263);var Ie=e=>{const{checkoutDetails:t}=e,{isMobile:l,profile:o,dispatch:a,showProfileEditOption:n}=t,{PERSONAL_INFO:d,EDIT:s,NAME:u,EMAIL_ADDRESS:v,MOBILE_NUMBER:O}=Te.a,{firstName:m,lastName:h,email:p,phone:C}=o,{ACCOUNT_SETTING:E}=r.a,N=()=>Object(j.jsx)("div",{className:"edit-input edit-info-link",children:(null===t||void 0===t?void 0:t.showProfileEditOption)&&Object(j.jsx)(xe.a,{"data-testid":"edit-account-button-testid",onClickHandler:()=>(e=>{var t;null===e||void 0===e||null===(t=e.history)||void 0===t||t.push({pathname:null===c.Ce||void 0===c.Ce?void 0:c.Ce.ACCOUNT}),a(Object(b.d)({key:E,value:E}))})(e),children:Object(i.translateWithI18Next)(s)})});return Object(j.jsx)("div",{className:"checkoutMemberContactDetails",children:Object(j.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(j.jsxs)("div",{className:"personal-card-left-side",children:[Object(i.translateWithI18Next)(d),l&&N()]}),Object(j.jsxs)("div",{className:"personal-card-right-side",children:[!l&&N(),Object(j.jsxs)("div",{className:"personal-info-section",children:[Object(j.jsxs)("div",{className:"personal-data-view",children:[Object(j.jsx)("div",{children:Object(i.translateWithI18Next)(u)}),Object(j.jsxs)("div",{children:[" ",m," ",h]})]}),p&&Object(j.jsxs)("div",{className:"personal-data-view",children:[Object(j.jsx)("div",{children:Object(i.translateWithI18Next)(v)}),Object(j.jsxs)("div",{children:[" ",p]})]}),Object(j.jsxs)("div",{className:"personal-data-view",children:[Object(j.jsx)("div",{children:Object(i.translateWithI18Next)(O)}),Object(j.jsxs)("div",{children:[" ",C]})]})]})]})]})})},fe=l(107),Ae=l(89);var De=e=>{var t,l,a,n,d;const{CHECKOUT_TITLES:r,FORM_NAMES:c,AGREEMENT_LABEL:u}=Ae.c,{checkoutDetails:v,updateCheckoutDetails:O}=e,{Ellipse:m}=y.a,{isMobile:b}=v,[h,p]=Object(o.useState)({value:!0,errorMessage:"",error:!1}),[C,E]=Object(o.useState)({value:null!==v&&void 0!==v&&null!==(t=v.profile)&&void 0!==t&&t.firstName?"".concat(Object(s.ud)(null===v||void 0===v||null===(l=v.profile)||void 0===l?void 0:l.firstName)," ").concat(Object(s.ud)(null===v||void 0===v||null===(a=v.profile)||void 0===a?void 0:a.lastName)):"",errorMessage:"",error:!1}),[N,g]=Object(o.useState)({value:Object(s.ud)(null===v||void 0===v||null===(n=v.profile)||void 0===n?void 0:n.email),errorMessage:"",error:!1}),[T,x]=Object(o.useState)({value:Object(s.ud)(null===v||void 0===v||null===(d=v.profile)||void 0===d?void 0:d.phone),errorMessage:"",error:!1});Object(o.useEffect)((()=>{O({...v,userSubscription:null===h||void 0===h?void 0:h.value})}),[h]),Object(o.useEffect)((()=>{(()=>{var e;""===(null===C||void 0===C?void 0:C.value)||null!==C&&void 0!==C&&C.error||""===(null===N||void 0===N?void 0:N.value)||null!==N&&void 0!==N&&N.error||""===(null===T||void 0===T?void 0:T.value)||null!==T&&void 0!==T&&T.error||!Object(Y.b)(v)?O({...v,isClickAddPayment:!1,tender:{name:"",payload:{}},guestOtpCheckoutValidated:!1,userEmail:{value:"",errorMessage:"",error:!1},userPhone:{value:"",errorMessage:"",error:!1},userFullName:{value:"",errorMessage:"",error:!1}}):""==(null===v||void 0===v||null===(e=v.tender)||void 0===e?void 0:e.name)&&O({...v,paymentEnabled:!0,userFullName:C,userFirstName:C,userLastName:C,userEmail:N,userPhone:T,userSubscription:null===h||void 0===h?void 0:h.value,cartDataCustomer:{...null===v||void 0===v?void 0:v.cartDataCustomer,firstName:null===C||void 0===C?void 0:C.value,lastName:null===C||void 0===C?void 0:C.value,phoneNumber:null===T||void 0===T?void 0:T.value,email:null===N||void 0===N?void 0:N.value}})})()}),[C,N,T,h,null===v||void 0===v?void 0:v.address2]);const I=e=>{const t=e.target.value,l=e.target.name,o=e.target.checked;Object(fe.i)(l===c.SUBSCRIPTION,(()=>p({...Object(fe.h)(h,o)}))),Object(fe.i)(l===c.FULL_NAME,(()=>E({...Object(fe.e)(C,t)}))),Object(fe.i)(l===c.PHONE,(()=>x({...Object(fe.f)(T,t)}))),Object(fe.i)(l===c.EMAIL,(()=>g({...Object(fe.d)(N,t)})))};return Object(j.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(j.jsx)("div",{className:"labelContent contact-label pl-25px  col-sm-4 col-12",children:Object(j.jsx)("h2",{children:Object(i.translateWithI18Next)(r.CONTACT_INFO)})}),Object(j.jsxs)("div",{className:"contactInfoContent  col-sm-8 col-12",children:[!b&&Object(j.jsx)("p",{className:"mandatory-note",children:Object(i.translateWithI18Next)(Ae.c.mandatorynote)}),Object(j.jsx)(_.a,{className:Object(fe.j)(C.error),placeholder:"Full Name*",onChange:I,onBlur:I,inputTestId:"form-fullname",name:c.FULL_NAME,value:C.value,autocomplete:"off",maxlength:"26"}),Object(j.jsxs)("div",{id:"userFullName",className:Object(fe.b)(C.error),children:[C.error&&Object(j.jsx)("img",{src:m,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:C.errorMessage})]}),Object(j.jsx)(_.a,{className:Object(fe.j)(T.error),placeholder:"Phone Number*",onChange:I,onBlur:I,inputTestId:"form-phone",name:c.PHONE,value:T.value,autocomplete:"off",maxlength:"10"}),Object(j.jsxs)("div",{id:"userFullName",className:Object(fe.b)(T.error),children:[T.error&&Object(j.jsx)("img",{src:m,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:T.errorMessage})]}),Object(j.jsx)(_.a,{className:Object(fe.j)(N.error),placeholder:"Email*",onChange:I,onBlur:I,inputTestId:"form-email",name:c.EMAIL,value:N.value,autocomplete:"off"}),Object(j.jsxs)("div",{id:"userEmail",className:Object(fe.b)(N.error),children:[N.error&&Object(j.jsx)("img",{src:m,alt:"error",className:"mr-2"}),Object(j.jsx)("span",{role:"alert",children:N.errorMessage})]}),Object(j.jsxs)("div",{className:"d-flex mt-20px mb-20px",children:[Object(j.jsx)("input",{tabIndex:"0",id:c.SUBSCRIPTION,type:"checkbox",name:c.SUBSCRIPTION,className:"common_checkbox mt-10px",value:h.value,onChange:I,checked:h.value}),Object(j.jsx)("label",{for:c.SUBSCRIPTION,title:!0,className:"form-check-label",children:Object(j.jsx)("span",{className:"agreeTxt",children:Object(i.translateWithI18Next)(u)})})]})]})]})};t.default=e=>{var t;const{updateCheckoutDetails:l,checkoutDetails:a}=e,{type:n,userParams:d,showPreValidationPaymentContactError:u,secondarycontact:v,isCateringSomeOneElseContactDetailsAreValid:O,isContactDetailValid:m,displayDeliveryTipping:b,tender:h,enableTipping:p,enablePickupMethodDuringCheckout:C,showDisplayNotifyMessage:E,enablePickupOption:g,enableCheckoutGuestSignInUser:T,profile:x,showProfileDetailOnCheckout:I,showProfileEditOption:A,guestCheckOutFieldsValidated:D,enableAddress2DetailsPanel:P}=a;return Object(o.useEffect)((()=>{var t;null!==h&&void 0!==h&&h.name&&(null===h||void 0===h?void 0:h.name)===(null===c.Vd||void 0===c.Vd?void 0:c.Vd.PAY_BY_CASH)?l({enableTipping:!1,driverdeliveryTip:0,total:null===e||void 0===e||null===(t=e.checkoutDetails)||void 0===t?void 0:t.cartTotal,driverTipDisplayAmount:0}):l({enableTipping:!0})}),[null===h||void 0===h?void 0:h.name]),Object(j.jsxs)(se.a,{...e,children:[T&&!(null!==d&&void 0!==d&&d.loggedIn)&&Object(j.jsx)(ae,{"col-mob-left":!0,"col-left":!0,...e}),I&&A&&(null===d||void 0===d?void 0:d.loggedIn)&&x&&Object(j.jsx)(Ie,{"col-mob-left":!0,"col-left":!0,...e}),Object(j.jsx)(N,{"col-mob-left":!0,"col-left":!0,...e}),(null===d||void 0===d?void 0:d.loggedIn)&&(null===v||void 0===v||null===(t=v.toLowerCase())||void 0===t?void 0:t.includes(null===n||void 0===n?void 0:n.toLowerCase()))&&Object(j.jsx)(ae,{"col-mob-left":!0,"col-left":!0,...e,displayFor:c.M}),Object(s.Jd)(n)&&Object(j.jsx)(f,{"col-mob-left":!0,"col-left":!0,...e}),Object(s.Od)(n)&&Object(j.jsx)(f,{"col-mob-left":!0,"col-left":!0,...e}),(g||C)&&Object(s.ge)(n)&&Object(j.jsx)(f,{"col-mob-left":!0,"col-left":!0,...e}),!A&&(null===d||void 0===d?void 0:d.loggedIn)&&x&&Object(j.jsx)(De,{"col-mob-left":!0,"col-left":!0,...e}),!(null!==d&&void 0!==d&&d.loggedIn)&&!T&&Object(j.jsx)(ae,{"col-mob-left":!0,"col-left":!0,...e}),Object(j.jsx)(de,{"col-mob-left":!0,"col-right":!0,...e}),(!(null!==d&&void 0!==d&&d.loggedIn)&&!Object(s.Hd)(n)&&u&&(P?!D:!m)||!O)&&Object(j.jsx)("div",{"col-mob-left":!0,"col-left":!0,className:"row row-cols-12 mt-10px no-bg","data-testid":"contactdetail-alert",children:Object(X.c)(Object(i.translateWithI18Next)(Object(s.Vd)(n)?null===r.a||void 0===r.a?void 0:r.a.EVENT_ADD_CONTACT_TO_ENABLE_PAYMENT:null===r.a||void 0===r.a?void 0:r.a.ADD_CONTACT_TO_ENABLE_PAYMENT))}),b&&p&&Object(s.Jd)(n)&&Object(j.jsx)(ge,{"col-mob-left":!0,"col-left":!0,...e}),Object(j.jsx)(ie.a,{"col-mob-left":!0,"col-left":!0,...e})]})}}}]);