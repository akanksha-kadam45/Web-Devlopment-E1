(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[23],{1119:function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return i}));var s=c(210),a=c(2);const n=e=>Object(a.jsx)(s.a,{testId:"header-container-test",importPath:"HEADER_CONTAINER",...e}),i=e=>Object(a.jsx)(s.a,{testId:"header-container-test",importPath:"SECONDARY_HEADER_CONTAINER",...e})},1150:function(e,t,c){},1151:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return l}));var s=c(3),a=c.n(s);const n=a.a.createContext({}),i=!0;function r(e){let{baseColor:t,highlightColor:c,width:s,height:a,borderRadius:n,circle:r,direction:l,duration:o,enableAnimation:d=i}=e;const u={};return"rtl"===l&&(u["--animation-direction"]="reverse"),"number"===typeof o&&(u["--animation-duration"]="".concat(o,"s")),d||(u["--pseudo-element-display"]="none"),"string"!==typeof s&&"number"!==typeof s||(u.width=s),"string"!==typeof a&&"number"!==typeof a||(u.height=a),"string"!==typeof n&&"number"!==typeof n||(u.borderRadius=n),r&&(u.borderRadius="50%"),"undefined"!==typeof t&&(u["--base-color"]=t),"undefined"!==typeof c&&(u["--highlight-color"]=c),u}function l(e){let{count:t=1,wrapper:c,className:s,containerClassName:l,containerTestId:o,circle:d=!1,style:u,...j}=e;var b,h,m;const v=a.a.useContext(n),O={...j};for(const[a,n]of Object.entries(j))"undefined"===typeof n&&delete O[a];const p={...v,...O,circle:d},f={...u,...r(p)};let x="react-loading-skeleton";s&&(x+=" ".concat(s));const g=null!==(b=p.inline)&&void 0!==b&&b,N=[],E=Math.ceil(t);for(let n=0;n<E;n++){let e=f;if(E>t&&n===E-1){const c=null!==(h=e.width)&&void 0!==h?h:"100%",s=t%1,a="number"===typeof c?c*s:"calc(".concat(c," * ").concat(s,")");e={...e,width:a}}const c=a.a.createElement("span",{className:x,style:e,key:n},"\u200c");g?N.push(c):N.push(a.a.createElement(a.a.Fragment,{key:n},c,a.a.createElement("br",null)))}return a.a.createElement("span",{className:l,"data-testid":o,"aria-live":"polite","aria-busy":null!==(m=p.enableAnimation)&&void 0!==m?m:i},c?N.map(((e,t)=>a.a.createElement(c,{key:t},e))):N)}function o(e){let{children:t,...c}=e;return a.a.createElement(n.Provider,{value:c},t)}},1304:function(e,t,c){"use strict";var s=c(3),a=c.n(s),n=c(28),i=c(6),r=c(15),l=c(46),o=c(62),d=c(132),u=c(220),j=c(2);var b=e=>{let{category:t,children:c}=e;return Object(j.jsxs)("div",{children:[t&&Object(j.jsx)("div",{className:"preferences-item-category",children:Object(j.jsx)("label",{htmlFor:t,children:t})}),c]})};var h=e=>{let{dataChecked:t,dataUnChecked:c,isChecked:s,onToggleChange:a}=e;const n=e=>{null!==e&&(null===a||void 0===a||a(e))};return Object(j.jsxs)("div",{className:"switch-button",children:[Object(j.jsx)("div",{"data-testid":"switch-button-testid",className:"switch-button ".concat(s?"active":""),onClick:()=>n(!0),children:t}),Object(j.jsx)("div",{className:"switch-button ".concat(s?"":"active"),onClick:()=>n(!1),children:c})]})};var m=e=>{let{property:t,onToggleChange:c}=e;return Object(j.jsx)("div",{className:"communication-preferences-item",children:Object(j.jsxs)("div",{className:"preferences-item-container",children:[t.subTitle&&Object(j.jsxs)("div",{className:"preferences-item-title",children:[" ",Object(j.jsx)("label",{htmlFor:t.subTitle,children:t.subTitle})]}),t.copy&&Object(j.jsxs)("div",{className:"preferences-sub-title",children:[" ",Object(j.jsx)("label",{htmlFor:t.copy,children:t.copy})]}),Object(j.jsx)("div",{className:"switch-button-container",children:Object(j.jsx)(h,{dataChecked:t.status.checkedLabel,dataUnChecked:t.status.unCheckedLabel,onToggleChange:()=>{c(t,!t.status.isChecked)},isChecked:t.status.isChecked})})]})})},v=c(412),O=c(4);var p=e=>{let{content:t,data:c,onPreferenceDataChange:a}=e;const{PREFERENCES_COMMUNICATION_PREFERENCES:r}=O.a,[l,o]=Object(s.useState)(Object(v.j)(t,c)),[d]=Object(s.useState)({...c});Object(s.useEffect)((()=>{o(Object(v.j)(t,c))}),[t,c]);const u=Object(n.c)((e=>{var t,c,s,a,n,i;return null!==(t=null===(c=e.tenantReducer)||void 0===c||null===(s=c.componentOptions)||void 0===s||null===(a=s.web)||void 0===a||null===(n=a.accountPage)||void 0===n||null===(i=n.preferenceCenter)||void 0===i?void 0:i.showUnsubscribeAllButton)&&void 0!==t&&t})),h=(e,c)=>{if(e.status.isChecked=c,e.code===v.a.globalOptOut&&e.status.isChecked&&(null!==l&&void 0!==l?l:[]).forEach((t=>{t.code!==e.code&&(t.status.isChecked=!1)})),e.code===v.a.globalOptOut&&!e.status.isChecked){const c=Object(v.j)(t,d)||[];(null!==l&&void 0!==l?l:[]).forEach((t=>{var s,a,n,i;t.code!==e.code&&(t.status.isChecked=null!==(s=null===(a=c.filter((e=>e.code===t.code)))||void 0===a||null===(n=a[0])||void 0===n||null===(i=n.status)||void 0===i?void 0:i.isChecked)&&void 0!==s&&s)}))}e.code!==v.a.globalOptOut&&e.status.isChecked&&((null!==l&&void 0!==l?l:[]).filter((e=>e.code===v.a.globalOptOut))[0].status.isChecked=!1),o(l),a(l)};return Object(j.jsxs)("div",{"data-testid":"preferences-testid",className:"preferences-card",children:[Object(j.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(i.translateWithI18Next)(r)}),Object(j.jsx)("div",{className:"preferences-card-right-side",children:Object(j.jsx)("div",{className:"preferences-container",children:Object(j.jsx)("div",{className:"preferences-item",children:l.map((e=>e.code!==v.a.globalOptOut||u?Object(j.jsxs)(s.Fragment,{children:[e.code===v.a.globalOptOut&&Object(j.jsx)("hr",{className:"divider"},"hr-".concat(e.code)),Object(j.jsx)(b,{category:e.title,children:Object(j.jsx)(m,{property:e,onToggleChange:h})},e.code)]},"fragment-".concat(e.code)):null))})})})]})};var f=e=>{let{data:t,onToggleChange:c,isChecked:s}=e;return Object(j.jsxs)("div",{className:"meal-list-item",children:[Object(j.jsx)("input",{id:t.title,checked:s,className:"meal-item-checkbox ".concat(s?"checked":""),value:t.title,type:"checkbox",onChange:e=>{c(e.target.value)}}),Object(j.jsx)("label",{className:"meal-item-text",htmlFor:t.title,children:t.title}),Object(j.jsx)(l.a,{srcFile:t.image})]})};var x=e=>{let{data:t,selectedMeals:c,onToggleChange:s}=e;const a=e=>{if(c)return c.includes(e.title)},n=e=>{s(e)},{PREFERENCES_MEAL_PREFERENCE:r,PREFERENCES_MEAL_PREFERENCE_DESCRIPTION:l}=O.a;return Object(j.jsxs)("div",{className:"meal-list-card","data-testid":"meal-checkbox",children:[Object(j.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(i.translateWithI18Next)(r)}),Object(j.jsxs)("div",{className:"preferences-card-right-side",children:[Object(j.jsx)("div",{className:"meal-description",children:Object(i.translateWithI18Next)(l)}),null===t||void 0===t?void 0:t.map(((e,t)=>{var c;return Object(j.jsx)("div",{children:Object(j.jsx)(f,{data:e,onToggleChange:n,isChecked:null!==(c=a(e))&&void 0!==c&&c})},t)}))]})]})},g=c(264);var N=()=>Object(j.jsxs)("div",{"data-testid":"communication-thankyou-container",className:"communication-thankyou-container",children:[Object(j.jsx)("div",{className:"communication-thankyou-confirm-icon",children:Object(j.jsx)(g.a,{src:r.a.ThankYou})}),Object(j.jsx)("div",{className:"communication-main-text",children:Object(i.translateWithI18Next)(O.a.PREFERENCES_THANK_YOU)}),Object(j.jsx)("div",{className:"communication-subTitle-text",children:Object(i.translateWithI18Next)(O.a.PREFERENCES_THANK_COMMENT_MSG)})]});var E=e=>{let{variant:t}=e;return Object(j.jsxs)("div",{"data-testid":"communication-error-container",className:"communication-error-container",children:[Object(j.jsx)("div",{className:"communication-error-icon",children:Object(j.jsx)(g.a,{src:r.a.CartError})}),Object(j.jsx)("div",{className:"communication-main-text",children:Object(i.translateWithI18Next)(O.a.PREFERENCES_ERROR)}),Object(j.jsx)("div",{className:"communication-subTitle-text",children:Object(i.translateWithI18Next)(O.a.PREFERENCES_ERROR_MSG)})]})},C=c(1151);c(1150);var R=()=>Object(j.jsx)(C.a,{baseColor:"#f8f9fa",highlightColor:"#e3e3e3",children:Object(j.jsx)("div",{className:"communication-preferences-container",children:Object(j.jsxs)("div",{"data-testid":"preferences-skeleton-testid",className:"preferences-card preferences-card-skeleton",children:[Object(j.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(j.jsx)(C.b,{height:50})}),Object(j.jsx)("div",{className:"preferences-card-right-side",children:Object(j.jsx)("div",{className:"preferences-container",children:Object(j.jsx)("div",{className:"preferences-item",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{class:"preferences-item-category",children:Object(j.jsx)(C.b,{width:"50%"})}),[1,2,3,4,5].map(((e,t)=>Object(j.jsx)("div",{class:"communication-preferences-item",children:Object(j.jsxs)("div",{class:"preferences-item-container",children:[Object(j.jsx)("div",{class:"preferences-item-title",children:Object(j.jsx)(C.b,{width:"50%"})}),Object(j.jsx)("div",{class:"preferences-sub-title",children:Object(j.jsx)(C.b,{})}),Object(j.jsx)("div",{class:"switch-button-container",children:Object(j.jsx)("div",{class:"switch-button",children:Object(j.jsx)("div",{class:"switch-button",children:Object(j.jsx)(C.b,{width:50})})})})]})},t)))]})})})})]})})}),k=c(59),S=c(128);t.a=e=>{var t,c,b;let{updateMenu:h,variant:m="account"}=e;const v=Object(n.b)(),{PREFERENCES_SAVE_PREFERENCES:f,PREFERENCES_COMMUNICATION_PREFERENCES:g}=O.a,C=Object(n.c)((e=>e.profileReducer||null)),{SingleArrowback:I}=r.a,P=Object(n.c)((e=>e.tenantReducer||null)),[w,y]=Object(s.useState)([...new Set]),T=new URLSearchParams(Object(o.h)().search),_=T.has("src")&&T.get("src").startsWith("mobile"),M=Object(n.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),F=null===M||void 0===M||null===(t=M.headerData)||void 0===t?void 0:t.communicationPreferences,A=null===M||void 0===M||null===(c=M.headerData)||void 0===c||null===(b=c.mealPreferences)||void 0===b?void 0:b.map((e=>{var t,c,s;return{title:e.fields.title,image:null===(t=e.fields.desktopImage)||void 0===t||null===(c=t.fields)||void 0===c||null===(s=c.file)||void 0===s?void 0:s.url}})),W=Object(n.c)((e=>{var t,c,s,a,n,i;return null!==(t=null===(c=e.tenantReducer)||void 0===c||null===(s=c.componentOptions)||void 0===s||null===(a=s.web)||void 0===a||null===(n=a.accountPage)||void 0===n||null===(i=n.preferenceCenter)||void 0===i?void 0:i.showMealPreferences)&&void 0!==t&&t})),U=Object(d.b)(S.c),D=Object(n.c)((e=>e.commPreferencesReducer)),[G,H]=Object(s.useState)({mealPreferences:[]}),[L,B]=Object(s.useState)({}),[z,K]=Object(s.useState)(!1),[Y,J]=Object(s.useState)();let q=function(){const{search:e}=Object(o.h)();return a.a.useMemo((()=>new URLSearchParams(e)),[e])}();const V=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus}));Object(s.useEffect)((()=>{const e=null===C||void 0===C?void 0:C.customerId,t=q.get("id"),c=q.get("src");B({userId:null!==t&&void 0!==t?t:e,src:null!==c&&void 0!==c?c:"web",queryUserId:t,sessionUserId:e,authenticated:null===V||void 0===V?void 0:V.loggedIn})}),[v,null===C||void 0===C?void 0:C.customerId,q,null===P||void 0===P?void 0:P.brazeMparticle,null===V||void 0===V?void 0:V.loggedIn]),Object(s.useEffect)((()=>{null!==L&&void 0!==L&&L.userId&&null!==L&&void 0!==L&&L.src&&"123"!==(null===P||void 0===P?void 0:P.brazeSMSGroupId)&&v(S.a.fetch({params:{customerId:L.userId,src:L.src,smsSubscriptionGroupId:null===P||void 0===P?void 0:P.brazeSMSGroupId}}))}),[L,v,null===P||void 0===P?void 0:P.brazeSMSGroupId]),Object(s.useEffect)((()=>{!1===(null===D||void 0===D?void 0:D.loading)&&!1===(null===D||void 0===D?void 0:D.updating)&&(H(U),y(U.mealPreferences))}),[null===D||void 0===D?void 0:D.loading,null===D||void 0===D?void 0:D.updating]),Object(s.useEffect)((()=>{if(z&&!1===(null===D||void 0===D?void 0:D.updating)){const e=null===D||void 0===D?void 0:D.error;J(e?"error":"success"),K(!1),window.scrollTo(0,0)}}),[z,null===D||void 0===D?void 0:D.updating,L.src,null===D||void 0===D?void 0:D.error,h]),Object(s.useEffect)((()=>{J(""),null!==D&&void 0!==D&&D.loading&&J("loading"),null!==D&&void 0!==D&&D.loading||null===D||void 0===D||!D.error||J("error")}),[null===D||void 0===D?void 0:D.error,null===D||void 0===D?void 0:D.loading]),Object(s.useEffect)((()=>{"account"===m&&"success"===Y&&(Q(O.a.PREFERENCES_SUCCESS_MSG),J("")),"account"===m&&"error"===Y&&(X(O.a.PREFERENCES_ERROR_MSG),J(""))}),[m,Y]);const Q=e=>{k.b.dark(Object(j.jsx)("div",{"data-testid":"preferences-success-toast",className:"img-text-div",children:Object(j.jsx)("span",{className:"text",children:Object(i.translateWithI18Next)(e)})}),{hideProgressBar:!0,position:k.b.POSITION.BOTTOM_CENTER,autoClose:5e3,closeOnClick:!0})},X=e=>{k.b.error(Object(j.jsx)("div",{"data-testid":"preferences-success-toast",className:"img-text-div",children:Object(j.jsx)("span",{className:"text",children:Object(i.translateWithI18Next)(e)})}),{hideProgressBar:!0,position:k.b.POSITION.BOTTOM_CENTER,autoClose:5e3,closeOnClick:!0})},Z=()=>{if(null!==D&&void 0!==D&&D.loading||null!==D&&void 0!==D&&D.updating)return;const e={...G,mealPreferences:w};H(e),K(!0),v(S.a.update({params:{customerId:L.userId,src:L.src,smsSubscriptionGroupId:null===P||void 0===P?void 0:P.brazeSMSGroupId},data:{...e}}))},$=e=>{w.includes(e)?y(w.filter((t=>t!==e))):y([...w,e])},ee=e=>{const t={...G};(null!==e&&void 0!==e?e:[]).forEach((e=>{t[e.code]=e.status.isChecked})),H(t)},te=()=>Object(j.jsxs)("div",{className:"communication-preferences-container",children:[Object(j.jsx)(p,{content:F,data:G,onPreferenceDataChange:ee}),W&&Object(j.jsx)(x,{data:A,selectedMeals:w,onToggleChange:$}),Object(j.jsx)("div",{className:"save-preferences-container",children:Object(j.jsx)(u.b,{"data-testid":"save-communication-preferences",className:"save-preferences-button",loading:null===D||void 0===D?void 0:D.updating,variant:u.a.tertiary,onClick:Z,children:Object(i.translateWithI18Next)(f)})})]});return Object(j.jsxs)("div",{className:"communication-preferences-page","data-testid":"communication-preferences-container-testid",children:[!_&&Object(j.jsxs)("div",{className:"account-settings-header-mobile",children:[Object(j.jsx)("img",{className:"backArrow-account-setting",onClick:()=>h(""),src:I,alt:"back btn"}),Object(j.jsx)("span",{className:"account-setting-text-header",children:Object(i.translateWithI18Next)(g)})]}),Object(j.jsxs)("div",{className:"communication-preferences-heading-alignment",children:["email"===m&&Object(j.jsx)(l.a,{srcFile:r.a.Strips,className:"preferences-strips-icon","data-testid":"preferences-strips-icon"}),Object(j.jsx)("p",{className:"communication-preferences-text-heading",children:Object(i.translateWithI18Next)(g)})]}),(()=>{switch(Y){case"loading":return Object(j.jsx)(R,{});case"success":return"email"===m?Object(j.jsx)(N,{}):te();case"error":return"email"===m?Object(j.jsx)(E,{}):te();default:return te()}})()]})}},612:function(e,t,c){"use strict";c.r(t);var s=c(1119),a=c(1304),n=c(28),i=c(5),r=c(62),l=c(2);t.default=()=>{const{headerData:{header:e={}}={}}=Object(n.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),t=Object(i.gc)(e),c=new URLSearchParams(Object(r.h)().search),o=c.has("src")&&c.get("src").startsWith("mobile");return Object(l.jsx)("div",{className:"email-communication-preferences-page",children:Object(l.jsxs)("div",{className:"account-desktop-container",children:[!o&&Object(l.jsx)("div",{"data-testid":"email-communication-preferences-header-testid",children:Object(l.jsx)(s.b,{contentData:t,checkoutHeader:!1,showOrderSummaryHeader:!1,showBackToCart:!1,showNeedHelp:!1,showMobileKfcLogo:!0,hideNeedHelpModal:!0})}),Object(l.jsx)("div",{"data-testid":"email-communication-preferences-testid",className:"account-section-right account-gloabal-container grid-container",children:Object(l.jsx)("div",{className:"email-communication-preferences-container",children:Object(l.jsx)(a.a,{variant:"email"})})})]})})}}}]);