(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[27],{1189:function(e,t,n){"use strict";n(3);var i=n(214),c=n(172),s=n(266),l=n(2);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?Object(i.a)(Object(s.documentToHtmlString)(e).replace(/<p>/gi,t).replace(/<\/p>/gi,t)):""},d=e=>{let{data:t}=e;const{html:n,css:i,javascript:s}=t,d=o(n),a=o(i),u=o(s,"\n\n");return Object(l.jsxs)(l.Fragment,{children:[(s||i)&&Object(l.jsxs)(c.a,{children:[s&&Object(l.jsx)("script",{type:"text/javascript",children:u}),i&&Object(l.jsx)("style",{type:"text/css",children:a})]}),n&&Object(l.jsx)("div",{dangerouslySetInnerHTML:{__html:d}})]})};d.defaultProps={},t.a=d},615:function(e,t,n){"use strict";n.r(t);var i=n(6),c=n(51),s=n(14),l=n(3),o=n(62),d=n(28),a=n(424),u=n(71),r=n(115),j=n(20),b=n.n(j),v=n(446),O=n(1189),p=n(4),f=n(11),m=n(2);const h=(e,t,n,c,l,d)=>{var a;const{body:u=[]}=null!==(a=t.fields[0])&&void 0!==a?a:{},{AGREE_WITH_TERMS_AND_CONDITIONS:r}=p.a;return Object(m.jsx)(o.b,{...e,render:()=>Object(m.jsxs)(m.Fragment,{children:[null===u||void 0===u?void 0:u.map(((e,t)=>Object(m.jsx)(O.a,{data:null===e||void 0===e?void 0:e.fields,index:t}))),Object(m.jsxs)("form",{name:"rakutenLogin",method:"POST",action:Object(s.a)(f.Cb,"https://pointcard.rakuten.co.jp/id-link/kfc"),children:[Object(m.jsx)("input",{TYPE:"hidden",name:"client_sid",value:c}),Object(m.jsx)("input",{TYPE:"hidden",name:"time_stamp",value:l}),Object(m.jsx)("input",{type:"hidden",name:"verify_key",value:d})]}),Object(m.jsxs)("button",{"data-type":"primary",className:"button-contained kfc-button",onClick:n,children:[Object(i.translateWithI18Next)(r)," "]})]})})};t.default=e=>{var t;let{...n}=e;const i=Object(d.c)((e=>e.profileReducer)),j=null===i||void 0===i?void 0:i.customerId,O=Object(d.b)(),p=Object(o.h)(),x=null!==(t=Object(d.c)((e=>{let{contentReducer:{navigationLinkResponse:{fields:t=[]}={},isContentfulLoading:n=!0}={}}=e;return{fields:t,isLoading:n}})))&&void 0!==t?t:{},[g,y]=Object(l.useState)(!0),[S,k]=Object(l.useState)(null),[L,E]=Object(l.useState)(null),[T,_]=Object(l.useState)(!0),[I,P]=Object(l.useState)(""),A=JSON.stringify(null===x||void 0===x?void 0:x.fields);Object(l.useEffect)((()=>P(Object(c.c)(j.toLowerCase()))),[j]);const C=()=>{const e=Object(s.a)(f.Bb,"3vaILWvIRQMHtxkd0NATjLQCm5xm56xomYli7YPAhzo="),t=Object(c.d)(),i=I+e+t,l=(new TextEncoder).encode(i);crypto.subtle.digest("SHA-256",l).then((e=>{const i=Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""),c=h(n,x,C,I,t,i);k(c),document.querySelector('[name="rakutenLogin"]').submit()}))};return Object(l.useLayoutEffect)((()=>{O(Object(r.g)({cmsClient:Object(u.a)(),query:{content_type:"brandPage","fields.url":"/rakuten-terms-condition",include:"5",locale:"ja-JP"}}))}),[O]),Object(l.useEffect)((()=>{E(((e,t)=>{let n=e;if(null!==e&&void 0!==e&&e.includes("/true")||null!==e&&void 0!==e&&e.includes("/false")){var i;const c=null!==(i=null===e||void 0===e?void 0:e.includes("/true"))&&void 0!==i?i:!(null!==e&&void 0!==e&&e.includes("/false"));null===t||void 0===t||t(c),n=(null===e||void 0===e?void 0:e.split("/".concat(c)))[0]}return n})(null===p||void 0===p?void 0:p.pathname)),_(!0)}),[null===p||void 0===p?void 0:p.pathname]),Object(l.useEffect)((()=>{null!==x&&void 0!==x&&x.isLoading||y(null===x||void 0===x?void 0:x.isLoading)}),[null===x||void 0===x?void 0:x.isLoading,A]),Object(l.useEffect)((()=>{if(!b()(null===x||void 0===x?void 0:x.fields)&&!b()(L)&&T){_(!1);const e=h(n,x,C,I,Object(c.d)(),"");k(e),y(!1)}}),[T,null===x||void 0===x?void 0:x.fields,L]),g?Object(m.jsx)(v.a,{isInProgress:!0}):S?Object(m.jsx)(m.Fragment,{children:S}):Object(m.jsx)(o.b,{component:a.a})}}}]);