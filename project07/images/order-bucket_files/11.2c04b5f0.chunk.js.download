(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[11,115],{1097:function(e,t,i){var n=i(327),l=i(213),o=i(330);e.exports=function(e){return function(t,i,d){var r=Object(t);if(!l(t)){var s=n(i,3);t=o(t),i=function(e){return s(r[e],e,r)}}var a=e(t,i,d);return a>-1?r[s?t[a]:a]:void 0}}},1102:function(e,t,i){var n=i(1097)(i(405));e.exports=n},1104:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return o}));var n=i(1);function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:n.qk,payload:{data:e,tenantId:t},successCallback:i,errorCallback:l}}function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:n.lk,menuPayload:e,exclusionPayload:t,successCallback:i}}},1105:function(e,t,i){var n=i(268),l=i(597);e.exports=function(e){return l(n(e).toLowerCase())}},1113:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(210),l=i(2);const o=e=>Object(l.jsx)(n.a,{testId:"account-container-test",importPath:"FOOTER_PAGE",...e})},1114:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(1);function l(e){return{type:n.he,payload:e}}},1119:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return d}));var n=i(210),l=i(2);const o=e=>Object(l.jsx)(n.a,{testId:"header-container-test",importPath:"HEADER_CONTAINER",...e}),d=e=>Object(l.jsx)(n.a,{testId:"header-container-test",importPath:"SECONDARY_HEADER_CONTAINER",...e})},1120:function(e,t,i){var n=i(598),l=i(596),o=i(599),d=4294967295,r=Math.min;e.exports=function(e,t){if((e=o(e))<1||e>9007199254740991)return[];var i=d,s=r(e,d);t=l(t),e-=d;for(var a=n(s,t);++i<e;)t(i);return a}},1121:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s}));var n=i(3);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}var o=function(e){var t=Object(n.useRef)(e);return t.current=e,t},d=function(e){var t=void 0===e?{}:e,i=t.requestOptions,d=t.debounce,r=void 0===d?200:d,s=t.cache,a=void 0===s?86400:s,c=t.cacheKey,u=t.googleMaps,v=t.callbackName,j=t.defaultValue,b=void 0===j?"":j,O=t.initOnMount,m=void 0===O||O,h=Object(n.useState)(!1),p=h[0],g=h[1],N=Object(n.useState)(b),x=N[0],f=N[1],E=Object(n.useState)({loading:!1,status:"",data:[]}),I=E[0],T=E[1],D=Object(n.useRef)(null),R=o(i),S=o(u),y=c?"upa-"+c:"upa",C=Object(n.useCallback)((function(){var e;if(!D.current){var t=window.google,i=S.current,n=(null==i?void 0:i.places)||(null==t||null==(e=t.maps)?void 0:e.places);n?(D.current=new n.AutocompleteService,g(!0)):console.error("\ud83d\udca1 use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library")}}),[]),_=Object(n.useCallback)((function(){T({loading:!1,status:"",data:[]})}),[]),A=Object(n.useCallback)((function(){try{sessionStorage.removeItem(y)}catch(e){}}),[]),P=Object(n.useCallback)(function(e,t){var i;return function(){for(var n=this,l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];null!==i&&(clearTimeout(i),i=null),i=setTimeout((function(){return e.apply(n,o)}),t)}}((function(e){if(e){T((function(e){return l({},e,{loading:!0})}));var t={};try{t=JSON.parse(sessionStorage.getItem(y)||"{}")}catch(i){}a&&(t=Object.keys(t).reduce((function(e,i){return t[i].maxAge-Date.now()>=0&&(e[i]=t[i]),e}),{}))[e]?T({loading:!1,status:"OK",data:t[e].data}):D.current.getPlacePredictions(l({},R.current,{input:e}),(function(n,l){if(T({loading:!1,status:l,data:n||[]}),a&&"OK"===l){t[e]={data:n,maxAge:Date.now()+1e3*a};try{sessionStorage.setItem(y,JSON.stringify(t))}catch(i){}}}))}else _()}),r),[r,_]),w=Object(n.useCallback)((function(e,t){void 0===t&&(t=!0),f(e),D.current&&t&&P(e)}),[P]);return Object(n.useEffect)((function(){if(!m)return function(){return null};var e=window.google;return S.current||null!=e&&e.maps||!v?C():window[v]=C,function(){window[v]&&delete window[v]}}),[v,C]),{ready:p,value:x,suggestions:I,setValue:w,clearSuggestions:_,clearCache:A,init:C}},r=function(e){var t=new window.google.maps.Geocoder;return new Promise((function(i,n){t.geocode(e,(function(t,l){"OK"!==l&&n(l),!e.address&&e.componentRestrictions&&(console.error("\ud83d\udca1 use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions."),i(t)),i(t)}))}))},s=function(e){return new Promise((function(t,i){try{var n=e.geometry.location,l=n.lat,o=n.lng;t({lat:l(),lng:o()})}catch(d){i(d)}}))}},1178:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return d}));const n=20,l=5e3,o=15e3,d=18e4},1207:function(e,t,i){"use strict";i.d(t,"p",(function(){return v})),i.d(t,"o",(function(){return j})),i.d(t,"l",(function(){return b})),i.d(t,"f",(function(){return O})),i.d(t,"m",(function(){return m})),i.d(t,"n",(function(){return h})),i.d(t,"h",(function(){return p})),i.d(t,"j",(function(){return g})),i.d(t,"i",(function(){return N})),i.d(t,"g",(function(){return x})),i.d(t,"k",(function(){return f})),i.d(t,"r",(function(){return I})),i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return R})),i.d(t,"d",(function(){return S})),i.d(t,"c",(function(){return y})),i.d(t,"s",(function(){return C})),i.d(t,"v",(function(){return _})),i.d(t,"q",(function(){return A})),i.d(t,"u",(function(){return P})),i.d(t,"w",(function(){return w})),i.d(t,"e",(function(){return L})),i.d(t,"t",(function(){return k}));var n=i(171),l=i(123),o=i(35),d=i(5),r=i(1111),s=i(0),a=i(1178),c=i(24),u=i(49);const v=e=>E(e)===s.Pd.STAGED_ACCEPTED,j=e=>E(e)===s.Pd.PICKUP_DELIVERY_DINE_IN,b=e=>Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.DELIVERY&&j(e),O=e=>Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.DELIVERY&&(b(e)||p(e)||g(e)||N(e)||x(e)),m=e=>O(e)&&(null===e||void 0===e?void 0:e.deliveryPartner),h=e=>O(e)&&!N(e)&&!x(e),p=e=>E(e)===s.Pd.DELIVERY_DISTA_CREATE_ASSIGN,g=e=>E(e)===s.Pd.DELIVERY_DISTA,N=e=>E(e)===s.Pd.DELIVERY_DISTA_DELIVERED,x=e=>E(e)===s.Pd.CANCELLED,f=e=>g(e)||x(e)||N(e),E=e=>{switch(Object(d.rf)(null===e||void 0===e?void 0:e.status)){case s.Rd.STAGED:case s.Rd.ACCEPTED:return c.b.shouldGoogleSpotIgnoreOloFailure?s.Pd.PICKUP_DELIVERY_DINE_IN:s.Pd.STAGED_ACCEPTED;case s.Rd.SENT_TO_POS_COMPLETED:if(Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.PICKUP||Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.DINE_IN||Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.DELIVERY||Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.CHRISTMAS_ORDERING)return s.Pd.PICKUP_DELIVERY_DINE_IN;break;case s.Rd.CREATED:case s.Rd.ASSIGNED:return s.Pd.DELIVERY_DISTA_CREATE_ASSIGN;case s.Rd.PICKED_UP:case s.Rd.OUT_FOR_DELIVERY:case s.Rd.ARRIVED:return s.Pd.DELIVERY_DISTA;case s.Rd.DELIVERED:return s.Pd.DELIVERY_DISTA_DELIVERED;case s.Rd.CANCELLED:case s.Rd.CANCEL:return Object(d.rf)(null===e||void 0===e?void 0:e.service)===s.Lb.DELIVERY?s.Pd.CANCELLED:s.Pd.FAILED;case s.Rd.SENT_TO_POS_FAILED:case s.Rd.PAYMENT_FAILED:return s.Pd.FAILED}},I=(e,t,i)=>{if(null!==e&&void 0!==e&&e.orderAcceptedLoading)return Promise.resolve(!1);switch(E(e)){case s.Pd.STAGED_ACCEPTED:return t(!0),Promise.resolve(!1);case s.Pd.PICKUP_DELIVERY_DINE_IN:return t(!1),Promise.resolve(!0);case s.Pd.DELIVERY_DISTA_CREATE_ASSIGN:case s.Pd.DELIVERY_DISTA:case s.Pd.DELIVERY_DISTA_DELIVERED:case s.Pd.CANCELLED:return t(!1),Promise.resolve(!1);case s.Pd.FAILED:return localStorage.setItem(s.Ud.STATUS_TEXT,s.Ud.FAILED),Object(d.ef)(i),Promise.resolve(!1)}},T=e=>{let{dispatch:t,orderDetails:i,orderAccepted:n,cartData:l,userOrderState:r,appStateReducer:a,isBasketLoading:u,status:v,qrCodeScanTime:j}=e;if(v){const e=a.userStatus,v=c.b.shouldGoogleSpotIgnoreOloFailure||Object(d.rf)(null===n||void 0===n?void 0:n.status)===s.Rd.SENT_TO_POS_COMPLETED;Object(d.l)(v,!u,null===l||void 0===l?void 0:l.id,e.localized,null===i||void 0===i?void 0:i.tenantId)&&Object(d.I)(t,o.f,null===i||void 0===i?void 0:i.tenantId,r,j)}},D=(e,t,i)=>{t&&(i=setTimeout((()=>{t(e),i&&clearTimeout(i)}),a.c))},R=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o={emailId:null===t||void 0===t?void 0:t.userEmail,phoneNo:null===t||void 0===t?void 0:t.userPhone,orderNo:null===t||void 0===t?void 0:t.posOrderId,tenantId:null===t||void 0===t?void 0:t.tenantId},d=i+1;e(Object(l.d)(o,(()=>D(d,n,null))))},S=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o={orderId:null===t||void 0===t?void 0:t.orderId,tenantId:null===t||void 0===t?void 0:t.tenantId,customerId:(null===t||void 0===t?void 0:t.customerId)||null},d=i+1;e(Object(n.f)(o,(()=>D(d,l,null))))},y=function(e,t){var i,l;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;const c=null===s||void 0===s||null===(i=s.componentOptions)||void 0===i||null===(l=i.homePage)||void 0===l?void 0:l.enableGuestOrderTracking;null!==t&&void 0!==t&&t.isExternalTrackOrder?R(e,t,o,d):c&&null!==t&&void 0!==t&&t.isActiveGuestTracking&&Object(r.l)(t)||null!==t&&void 0!==t&&t.orderTrackingEmail?function(e,t){var i;let l,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0;try{const e=new URL(null===t||void 0===t?void 0:t.otu);l=new URLSearchParams(e.search).get("PhoneNo")}catch(c){console.error("Error extracting phone number:",c),l="0"}const s={orderId:(null===t||void 0===t?void 0:t.orderId)||(null===t||void 0===t||null===(i=t.postOrderDetails)||void 0===i?void 0:i.id)||(null===t||void 0===t?void 0:t.orderTrackingID),tenantId:null===t||void 0===t?void 0:t.tenantId,Email:null!==t&&void 0!==t&&t.orderTrackingViewEnabled?null===t||void 0===t?void 0:t.orderTrackingEmail:l},a=o+1;e(Object(n.g)(s,(e=>{let i=!1;e.errors&&e.errors.length>0&&(i=!0),null!==t&&void 0!==t&&t.orderTrackingViewEnabled&&r({...t,orderTrackingHasError:i}),D(a,d,null)})))}(e,t,o,d,a):S(e,t,o,d,s)},C=(e,t,i,n,l,o,r,c)=>{null!==t&&void 0!==t&&t.orderId||null!==t&&void 0!==t&&t.orderTrackingID?0===i||v(n)&&i<a.a?y(e,t,i,l,r,c):v(n)&&i>=a.a&&(localStorage.setItem("paymentStatus",s.Ud.FAILED),Object(d.ef)(o)):Object(d.Ye)(o)},_=(e,t,i,n,l)=>{n&&b(e)?Object(d.ef)(l):null!==e&&void 0!==e&&e.status&&(null===e||void 0===e?void 0:e.status)!==(null===t||void 0===t?void 0:t.status)?i({...t,status:null===e||void 0===e?void 0:e.status,orderAcceptedLoading:null===e||void 0===e?void 0:e.orderAcceptedLoading,deliveryPartner:null===e||void 0===e?void 0:e.deliveryPartner,fulfillmentDateTime:null===e||void 0===e?void 0:e.fulfillmentDateTime,requestedDateTime:null===e||void 0===e?void 0:e.requestedDateTime,deliveryDetails:null===e||void 0===e?void 0:e.deliveryDetails,store:null===e||void 0===e?void 0:e.store,otu:(null===e||void 0===e?void 0:e.otu)||(null===t||void 0===t?void 0:t.otu),isActiveGuestTracking:(null===e||void 0===e?void 0:e.isActiveGuestTracking)||(null===t||void 0===t?void 0:t.isActiveGuestTracking),deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1}):i({...t,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1,fulfillmentDateTime:null===e||void 0===e?void 0:e.fulfillmentDateTime,requestedDateTime:null===e||void 0===e?void 0:e.requestedDateTime,deliveryDetails:null===e||void 0===e?void 0:e.deliveryDetails,deliveryPartner:null===e||void 0===e?void 0:e.deliveryPartner,otu:(null===e||void 0===e?void 0:e.otu)||(null===t||void 0===t?void 0:t.otu),isActiveGuestTracking:(null===e||void 0===e?void 0:e.isActiveGuestTracking)||(null===t||void 0===t?void 0:t.isActiveGuestTracking),store:null===e||void 0===e?void 0:e.store})},A=(e,t,i)=>{if(b(e)&&!t){const e=setTimeout((()=>{e&&clearTimeout(e)}),a.d)}},P=(e,t,i,n)=>{var l,o,d,r,s,a,c,u,v,j,b,O,m;const h=null===(l=new URLSearchParams(window.location.search))||void 0===l?void 0:l.get("orderId"),p=(null===(o=new URLSearchParams(window.location.search))||void 0===o?void 0:o.get("email"))||(null===(d=new URLSearchParams(window.location.search))||void 0===d?void 0:d.get("PhoneNo")),g=null===(r=window)||void 0===r||null===(s=r.location)||void 0===s||null===(a=s.pathname)||void 0===a?void 0:a.includes("order-tracking");return h!==(null===(c=t)||void 0===c?void 0:c.id)&&null!==(u=t)&&void 0!==u&&u.id&&g&&(t={}),{...w(e,t,!1,i),orderAcceptedLoading:(null===(v=t)||void 0===v?void 0:v.orderAcceptedLoading)||!1,deliveryPartner:null,deliveryDistaRetryCountFlag:0,operatingTime:(null===n||void 0===n||null===(j=n.store)||void 0===j||null===(b=j.summary)||void 0===b?void 0:b.timings)||(null===(O=t)||void 0===O||null===(m=O.store)||void 0===m?void 0:m.timings),...h&&{orderTrackingID:h},...p&&{orderTrackingEmail:p},...g&&{orderTrackingViewEnabled:!0}}},w=function(e,t){var i,n,l,o,d,r,s,a;let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const j={orderId:(null===t||void 0===t?void 0:t.id)||(null===u||void 0===u?void 0:u.id),customerId:(null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.id)||(null===u||void 0===u||null===(n=u.customer)||void 0===n?void 0:n.id),tenantId:e,service:(null===t||void 0===t?void 0:t.service)||(null===u||void 0===u?void 0:u.service),status:(null===t||void 0===t?void 0:t.status)||(null===u||void 0===u?void 0:u.status),orderTime:(null===t||void 0===t?void 0:t.fulfillmentDateTime)||(null===u||void 0===u?void 0:u.fulfillmentDateTime),deliveryPartner:(null===t||void 0===t?void 0:t.deliveryPartner)||(null===u||void 0===u?void 0:u.deliveryPartner),posOrderId:(null===t||void 0===t?void 0:t.posOrderId)||(null===u||void 0===u?void 0:u.posOrderId),userEmail:(null===t||void 0===t||null===(l=t.customer)||void 0===l?void 0:l.email)||(null===u||void 0===u||null===(o=u.customer)||void 0===o?void 0:o.email),userPhone:(null===t||void 0===t||null===(d=t.customer)||void 0===d?void 0:d.phoneNumber)||(null===t||void 0===t||null===(r=t.customer)||void 0===r?void 0:r.phone)||(null===u||void 0===u||null===(s=u.customer)||void 0===s?void 0:s.phoneNumber),postOrderDetails:t,isExternalTrackOrder:c,isActiveGuestTracking:null===t||void 0===t?void 0:t.isActiveGuestTracking,otu:null===t||void 0===t?void 0:t.otu};var b,O,m;null!==v&&void 0!==v&&null!==(a=v.storesWithStatus)&&void 0!==a&&a.length&&(j.operatingTime=null===v||void 0===v||null===(b=v.storesWithStatus)||void 0===b||null===(O=b[0])||void 0===O||null===(m=O.summary)||void 0===m?void 0:m.timings);return j},L=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=(e=>{var t;return null!==e&&void 0!==e&&e.orderAccepted&&Object.keys(null===e||void 0===e?void 0:e.orderAccepted).length&&null!==e&&void 0!==e&&null!==(t=e.orderAccepted)&&void 0!==t&&t.id?null===e||void 0===e?void 0:e.orderAccepted:null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return null===n&&(n=(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.pastOrderResponse)&&void 0!==t&&t.length&&null!==e&&void 0!==e&&e.pastOrderResponse[0].id?null===e||void 0===e?void 0:e.pastOrderResponse[0]:null})(e),i&&null===n&&(n=t&&Object.keys(null===t||void 0===t?void 0:t.postOrderDetails).length?null===t||void 0===t?void 0:t.postOrderDetails:{})),n||{}},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(localStorage.getItem(s.gd.PAYMENT_STATUS)!==s.Ud.FAILED){var i,o,d,r;if(t&&(null===(i=window)||void 0===i||null===(o=i.location)||void 0===o?void 0:o.pathname)===(null===s.Ce||void 0===s.Ce?void 0:s.Ce.PAYMENT_SUCCESS)||(null===(d=window)||void 0===d||null===(r=d.location)||void 0===r?void 0:r.pathname)===(null===s.Ce||void 0===s.Ce?void 0:s.Ce.CHECKOUT))return!1;(e=>{e(Object(n.h)())})(e),(e=>{e(Object(l.e)())})(e)}(e=>{e(Object(u.z)())})(e),(e=>{e(Object(l.a)({value:[]}))})(e),sessionStorage.removeItem(s.gd.ORDER_TRACKING)}},1230:function(e,t,i){"use strict";var n=i(3),l=i(5),o=i(144),d=i(0),r=i(15),s=i(2);const a=e=>{const{isOpen:t,handleClose:i,OrderReducerData:a}=e,[c,u]=Object(n.useState)(Object(l.de)(window.innerWidth)),v=window.google,{RedMarker:j,BlackMarker:b}=r.a;Object(n.useEffect)((()=>(window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O)})));const O=()=>{u(Object(l.de)(window.innerWidth))},m=c?{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"LookUpmap-modal",showCloseBtn:!0,closeButtonHandler:i,autoFocus:!0}:{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"LookUpmap-modal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:i,autoFocus:!0};function h(){var e,t,i,n;const l=new v.maps.DirectionsService,o=new v.maps.DirectionsRenderer,d=new v.maps.Map(document.getElementById("maps"),{zoom:16,center:{lat:Number(null===a||void 0===a||null===(e=a.store)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude),lng:Number(null===a||void 0===a||null===(i=a.store)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.longitude)}});o.setMap(d),function(e,t){var i,n,l,o,d,r,s,c,u,j,O,m;const h={lat:Number(null===a||void 0===a||null===(i=a.store)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.latitude),lng:Number(null===a||void 0===a||null===(l=a.store)||void 0===l||null===(o=l.location)||void 0===o?void 0:o.longitude)},p=new v.maps.Map(document.getElementById("maps"),{zoom:16,center:h});e.route({origin:{lat:Number(null===a||void 0===a||null===(d=a.store)||void 0===d||null===(r=d.location)||void 0===r?void 0:r.latitude),lng:Number(null===a||void 0===a||null===(s=a.store)||void 0===s||null===(c=s.location)||void 0===c?void 0:c.longitude)},destination:{lat:Number(null===a||void 0===a||null===(u=a.store)||void 0===u||null===(j=u.location)||void 0===j?void 0:j.latitude),lng:Number(null===a||void 0===a||null===(O=a.store)||void 0===O||null===(m=O.location)||void 0===m?void 0:m.longitude)},travelMode:v.maps.TravelMode.DRIVING},((e,i)=>{if("OK"===i){t.setDirections(e);var n=e.routes[0].legs[0];new v.maps.Marker({position:n.end_location,map:p,visible:!0,icon:b,title:"Delivery-Location"})}else new v.maps.Map(document.getElementById("maps"),{zoom:6,center:{lat:20.5937,lng:78.9629}})}))}(l,o)}return Object(n.useEffect)((()=>{null!==(null===a||void 0===a?void 0:a.deliveryAddress)&&null!==(null===a||void 0===a?void 0:a.store)&&Object(l.rf)(null===a||void 0===a?void 0:a.service)===Object(l.rf)(d.yb)?h():Object(l.rf)(null===a||void 0===a?void 0:a.service)!==Object(l.rf)(d.fe)&&Object(l.rf)(null===a||void 0===a?void 0:a.service)!==Object(l.rf)(d.Eb)||null===(null===a||void 0===a?void 0:a.store)||function(){var e,t,i,n;const l={lat:Number(null===a||void 0===a||null===(e=a.store)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude),lng:Number(null===a||void 0===a||null===(i=a.store)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.longitude)},o=new v.maps.Map(document.getElementById("maps"),{zoom:16,center:l});new v.maps.Marker({position:l,map:o,visible:!0,icon:j,title:"KFC Store"})}()})),Object(s.jsx)("div",{children:t&&Object(s.jsx)(o.a,{...m,children:Object(s.jsx)("div",{children:Object(s.jsx)("div",{id:"maps"})})})})};a.defaultProps={isOpen:!1,closeModal:null},t.a=a},1259:function(e,t,i){"use strict";var n=i(6),l=i(1178),o=i(3),d=i(5),r=i(273),s=i(2);t.a=e=>{const{CURRENT_ORDER:t="",PROCESSING:i="",PROCESSING_YOUR:a="",ORDER_READY_IN_JUST:c="",SECOND:u="",CONFIRMING_YOUR_ORDER:v="",READY_IN_JUST_A_SECOND:j=""}=r.a,[b,O]=Object(o.useState)(Object(d.de)(window.innerWidth)),m=()=>{const e=Object(d.de)(window.innerWidth);O(e)};return Object(o.useEffect)((()=>{window.addEventListener("resize",m)}),[b]),Object(o.useEffect)((()=>{if(e.retryCount>=0&&e.retryCount<=l.a){const t=document.getElementById("progressBarContainer"),i=document.getElementById("progressBar");console.log(t.offsetWidth);const n=t.offsetWidth/l.a*(e.retryCount+1);console.log(n),i.style.width=n+"px"}}),[e.retryCount]),Object(s.jsx)("div",{children:b?Object(s.jsx)("div",{className:"orderConfirmScreenMob","data-testid":"orderConfirmItems-component",children:Object(s.jsxs)("div",{className:"statusBar",children:[Object(s.jsx)("div",{className:"currentStatusMob",children:Object(n.translateWithI18Next)(t)}),Object(s.jsx)("div",{id:"progressBarContainer",className:"ProgressMob",children:Object(s.jsx)("div",{id:"progressBar",className:"barMob","data-testid":"load-component"})}),Object(s.jsx)("div",{className:"progressBarMob",children:Object(n.translateWithI18Next)(i)}),Object(s.jsx)("div",{className:"confirmOrderMobile",children:Object(n.translateWithI18Next)(a)}),Object(s.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(n.translateWithI18Next)(c)]}),Object(s.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(n.translateWithI18Next)(u)]})]})}):Object(s.jsx)("div",{className:"orderConfirmScreen","data-testid":"orderConfirmItems-component",children:Object(s.jsxs)("div",{className:"statusBar",children:[Object(s.jsx)("div",{className:"currentStatus",children:Object(n.translateWithI18Next)(t)}),Object(s.jsx)("div",{id:"progressBarContainer",className:"Progress",children:Object(s.jsx)("div",{id:"progressBar",className:"bar"})}),Object(s.jsx)("div",{className:"progressBar",children:Object(n.translateWithI18Next)(i)}),Object(s.jsx)("div",{className:"confirmOrder",children:Object(n.translateWithI18Next)(v)}),Object(s.jsxs)("div",{className:"confirmOrder",children:[" ",Object(n.translateWithI18Next)(j)," "]})]})})})}},985:function(e,t,i){"use strict";i.r(t),i.d(t,"PaymentProcess",(function(){return Le}));var n=i(424),l=i(3),o=i.n(l),d=i(28),r=i(85),s=i(1113),a=i(115),c=i(422),u=i(1259),v=i(5),j=i(41),b=i(332),O=i(144),m=i(404),h=i(273),p=i(6),g=i(4),N=i(15),x=i(46),f=i(2);const E=e=>{const{isOpen:t=!1,handleClose:i,onSave:n,tenantReducer:o={},OrderReducerData:r={}}=e,{SPECIAL_CHAR_ERROR:s,OCCASION_NAME_LENGTH_ERROR:a,EMPTY_NAME_ERROR:c,CANCEL:u,SAVE:E}=g.a,{tenantId:I=""}=o,{id:T="",customer:{id:D="",phoneNumber:R=""}={}}=r,[S,y]=Object(l.useState)(Object(v.de)(window.innerWidth)),[C,_]=Object(l.useState)(!0),[A,P]=Object(l.useState)({value:"",errorMessage:"",error:!1}),{THANKYOU:w="",WE_SAVED:L="",GIVE_A_NAME:k="",FAVORITES_ORDERS_REGEX:F}=h.a,W=(e,t)=>{let i={...e};i.value=t;const n=null===F||void 0===F?void 0:F.test(t);return t?n?t.length<3?(i.error=!0,i.errorMessage=Object(p.translateWithI18Next)(a),_(!0)):(i.error=!1,i.errorMessage="",_(!1)):(i.error=!0,i.errorMessage=Object(p.translateWithI18Next)(s)):(i.error=!0,i.errorMessage=Object(p.translateWithI18Next)(c),_(!0)),i},M=e=>{const t=e.target.value;(()=>{P({...W(A,t)})})()},B=Object(d.b)();Object(l.useEffect)((()=>(window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)})));const V=()=>{y(Object(v.de)(window.innerWidth))},U=S?{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"save-order-modal",showCloseBtn:!0,closeButtonHandler:i,autoFocus:!0}:{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"save-order-modal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:i,autoFocus:!0};return Object(f.jsx)("div",{children:t&&Object(f.jsx)(O.a,{...U,children:Object(f.jsxs)("div",{className:"modalContants",children:[Object(f.jsx)("div",{className:"fontstyle",children:Object(p.translateWithI18Next)(w)}),Object(f.jsx)("div",{className:"fontstyle",children:Object(p.translateWithI18Next)(L)}),Object(f.jsx)("div",{className:"fontstyle",children:Object(p.translateWithI18Next)(k)}),S?Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"inputbox",children:Object(f.jsx)(m.a,{value:A.value,className:"inputfield",placeholder:"Name This Order","data-testid":"modal-coupon-input-field",onChange:M})}),A.error&&Object(f.jsxs)("div",{id:"saveTrackOrderScreen",className:"error-text",children:[Object(f.jsx)(x.a,{srcFile:N.a.Error,className:"location-alert-icon mr-1"}),Object(f.jsx)("span",{role:"alert",children:A.errorMessage})]})]}):Object(f.jsxs)("div",{className:"inputbox trackOrderScreen",children:[Object(f.jsx)(m.a,{value:A.value,className:"inputfield",placeholder:"Name This Order","data-testid":"modal-coupon-input-field",onChange:M}),A.error&&Object(f.jsxs)("div",{id:"saveTrackOrderScreen",className:"error-text",children:[Object(f.jsx)(x.a,{srcFile:N.a.Error,className:"location-alert-icon mr-1"}),Object(f.jsx)("span",{className:"error-msg",role:"alert",children:A.errorMessage})]})]}),Object(f.jsxs)("div",{className:"buttonItems",children:[Object(f.jsx)(j.a,{"data-testid":"coupon-button-one",className:"button whiteButton blackBorder closebtn-cls",onClick:e=>(console.log("close"),void i()),children:Object(p.translateWithI18Next)(u)}),Object(f.jsx)(j.a,{"data-testid":"coupon-button-two",className:"button blackButton blackBorder save-button",onClick:e=>(e=>{let t={...A};e.stopPropagation(),console.log("saved"),""!==A.value?(B(Object(b.a)({customerId:D,tenantId:I,phoneNumber:R},{orderId:T,name:A.value})),n(!0),i()):(t.error=!0,t.errorMessage=Object(p.translateWithI18Next)(h.a.SAVE_ORDER_NAME_ERROR),_(!0),P(t))})(e),disabled:C,children:Object(p.translateWithI18Next)(E)})]})]})})})};E.defaultProps={isOpen:!1,closeModal:null};var I=E,T=i(440),D=i(1230),R=i(24),S=i(12),y=i(414),C=i(271),_=i(71),A=i(169);const{phoneImg:P,Direction:w}=N.a,{GST:L,YOUR_ORDER:k,ORDER:F,ORDER_FROM_CAPS:W,GET_DIRECTION:M,SUB_TOTAL:B,TOTAL:V,largeCarryBagText:U,addHopeText:H,SEARCH_IN_CART:G,DELIVERY:Y,PICKUP:K,ONLY_IMAGE:z,DELIVERY_FEE:q,DISCOUNT_TEXT:J,HH_MM:X,HH_MM_A:Q,TOTAL_GST_INCLUDED:Z}=h.a,$=(e,t,i)=>null===e||void 0===e?void 0:e.filter((e=>{var n,l;return(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name)!==t&&(null===e||void 0===e||null===(l=e.item)||void 0===l?void 0:l.name)!==i})),ee=e=>{null===e||void 0===e||e.substr(0,null===e||void 0===e?void 0:e.indexOf(" "));const t=null===e||void 0===e?void 0:e.substr((null===e||void 0===e?void 0:e.indexOf(" "))+1);return(null===t||void 0===t?void 0:t.slice(0,3))+"-"+(null===t||void 0===t?void 0:t.slice(3,6))+"-"+(null===t||void 0===t?void 0:t.slice(6))},te=(e,t,i)=>Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(L)}),Object(f.jsxs)("span",{className:"amount",children:[e,Object(y.e)(null===t||void 0===t?void 0:t.inclusiveTaxTotal,i)," "]})]}),ie=e=>(null===e||void 0===e?void 0:e.toUpperCase())===Y?Object(p.translateWithI18Next)(q):Object(p.translateWithI18Next)(h.a.RESTAURANT_HANDLING_CHARGE),ne=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={};const d=null===e||void 0===e?void 0:e.filter((e=>"in-delivery-charge"!==(null===e||void 0===e?void 0:e.chargeType)));var r,s;return l?(o=null===e||void 0===e?void 0:e.find((e=>"in-delivery-charge"===(null===e||void 0===e?void 0:e.chargeType))),Object(f.jsxs)(f.Fragment,{children:[d&&d.map((function(e,l){return Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:ie(n)}),Object(f.jsxs)("span",{className:"amount",children:[t,Object(y.e)(null===e||void 0===e?void 0:e.amount,i)," "]})]},l)})),(null===(r=o)||void 0===r?void 0:r.amount)>0&&Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(null===g.a||void 0===g.a?void 0:g.a.IN_DELIVERY_FEE)}),Object(f.jsxs)("span",{className:"amount",children:[t,Object(y.e)(null===(s=o)||void 0===s?void 0:s.amount,i)," "]})]})]})):d&&d.map((function(e,l){return Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:ie(n)}),Object(f.jsxs)("span",{className:"amount",children:[t,Object(y.e)(null===e||void 0===e?void 0:e.amount,i)," "]})]},l)}))},le=e=>{var t,i,n,l,o,d,r,s,a,c,u;return[null!==(t=null===e||void 0===e||null===(i=e.deliveryAddress)||void 0===i||null===(n=i.addressLines)||void 0===n?void 0:n.join(" "))&&void 0!==t?t:"",null!==(l=null===e||void 0===e||null===(o=e.deliveryAddress)||void 0===o?void 0:o.city)&&void 0!==l?l:"",null!==(d=null===e||void 0===e||null===(r=e.deliveryAddress)||void 0===r?void 0:r.state)&&void 0!==d?d:"",null!==(s=null===e||void 0===e||null===(a=e.deliveryAddress)||void 0===a?void 0:a.country)&&void 0!==s?s:"",null!==(c=null===e||void 0===e||null===(u=e.deliveryAddress)||void 0===u?void 0:u.pinCode)&&void 0!==c?c:""].filter((e=>e)).join(" ").trim()},oe=e=>null!==e&&void 0!==e&&e.id?(null===(null===e||void 0===e?void 0:e.posOrderId)||""===(null===e||void 0===e?void 0:e.posOrderId))&&(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.posOrderId):"",de=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"line",children:Object(y.d)(null===e||void 0===e?void 0:e.item,t,i)}),Object(f.jsxs)("div",{className:"price",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(B)}),Object(f.jsxs)("span",{className:"amount",children:[t,null===e||void 0===e?void 0:e.subTotal]})]}),(null===e||void 0===e?void 0:e.taxValue)&&Object(f.jsx)("div",{children:te(t,e,i)}),Object(f.jsx)("div",{children:ne(null===e||void 0===e?void 0:e.additionalCharges,t,i,null===e||void 0===e?void 0:e.service,n)}),(null===e||void 0===e?void 0:e.discountTotal)>0&&Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(J)}),Object(f.jsxs)("span",{className:"amount",children:[" ","- ",t,null===e||void 0===e?void 0:e.discountTotal]})]})]})},re=function(e,t,i,n,l){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(null===e||void 0===e?void 0:e.service)===Y?function(e,t,i,n){var l,o,d,r,s,a,c,u;let j=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const b=Object(v.kb)(null===e||void 0===e?void 0:e.operatingHours),O=Object(S.S)(Object(v.vc)(b),X,Q),m=Object(S.S)(Object(v.ub)(b),X,Q);return Object(f.jsxs)("div",{className:"Bill",children:[!(null!==e&&void 0!==e&&e.orderTrackingViewEnabled)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{className:"orderFrom",children:Object(p.translateWithI18Next)("deliveryAddress")}),Object(f.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.fullAddressDetails})]}),(null===e||void 0===e?void 0:e.instruction)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{className:"orderFrom",children:Object(p.translateWithI18Next)("instructions")}),Object(f.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.instruction})]}),Object(f.jsx)("h2",{className:"orderFrom",children:Object(p.translateWithI18Next)("preparedBy")}),Object(f.jsxs)("div",{className:"place",children:[Object(f.jsxs)("span",{className:"fnt-bld mob-display",children:[null===e||void 0===e?void 0:e.storeName," "]}),(null===b||void 0===b?void 0:b.length)&&Object(f.jsxs)("span",{className:"hrs-view mob-display",children:["Hours: ","".concat(O,"-").concat(m)]})]}),de(e,t,i,j),Boolean(null===e||void 0===e?void 0:e.addHopeDataExistsId)&&Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(H)}),Object(f.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.addHopeDataPrice})]}),(null===e||void 0===e?void 0:e.total)&&Object(f.jsxs)("div",{className:"totalAmount",children:[Object(f.jsxs)("span",{className:"total",children:[Object(p.translateWithI18Next)(Z),":"]}),Object(f.jsxs)("span",{className:"total",children:[t,null===e||void 0===e?void 0:e.total]})]}),!(null!==e&&void 0!==e&&e.orderTrackingViewEnabled)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{class:"hr-payment-type"}),Object(f.jsxs)("div",{className:"totalAmount mt-5",children:[Object(f.jsx)("span",{className:"total",children:Object(p.translateWithI18Next)("Payment")}),Object(f.jsx)("span",{className:"total payment-type",children:(null===n||void 0===n||null===(l=n.fields)||void 0===l?void 0:l.displayFormat)===z?Object(f.jsx)("img",{src:null===n||void 0===n||null===(o=n.fields)||void 0===o||null===(d=o.icon)||void 0===d||null===(r=d.fields)||void 0===r||null===(s=r.desktopImage)||void 0===s||null===(a=s.fields)||void 0===a||null===(c=a.file)||void 0===c?void 0:c.url,alt:"paymentMethod"}):Object(f.jsx)("span",{children:null===n||void 0===n||null===(u=n.fields)||void 0===u?void 0:u.displayName})})]})]})]})}(e,i,n,t,o):((e,t,i,n,l)=>{var o,d,r,s,a,c,u,v;return Object(f.jsxs)("div",{className:"Bill",children:[Object(f.jsxs)("div",{className:"orderTitle",children:[Object(f.jsx)("h2",{className:"yourOrder",children:Object(p.translateWithI18Next)(k)}),Object(f.jsxs)("span",{className:"orderId",children:[Object(f.jsx)("span",{className:"OrderClass",children:Object(p.translateWithI18Next)(F)}),null===e||void 0===e?void 0:e.orderId]})]}),Object(f.jsx)("div",{className:"orderingDateTime",children:"".concat(null===e||void 0===e?void 0:e.orderingDate," ").concat(Object(p.translateWithI18Next)("At")," ").concat(null===e||void 0===e?void 0:e.orderingTime)}),!(null!==e&&void 0!==e&&e.orderTrackingViewEnabled)&&Object(f.jsxs)("div",{className:"postorder-payment-details",children:[Object(f.jsx)("h2",{className:"payment-header",children:Object(p.translateWithI18Next)("paymentHeader")}),Object(f.jsx)("div",{className:"payment-details",children:(null===t||void 0===t||null===(o=t.fields)||void 0===o?void 0:o.displayFormat)===z?Object(f.jsx)("img",{src:null===t||void 0===t||null===(d=t.fields)||void 0===d||null===(r=d.icon)||void 0===r||null===(s=r.fields)||void 0===s||null===(a=s.desktopImage)||void 0===a||null===(c=a.fields)||void 0===c||null===(u=c.file)||void 0===u?void 0:u.url,alt:"paymentMethod"}):Object(f.jsx)("span",{className:"payment-completed",children:null===t||void 0===t||null===(v=t.fields)||void 0===v?void 0:v.displayName})})]}),Object(f.jsx)("h2",{className:"orderFrom",children:Object(p.translateWithI18Next)(W)}),Object(f.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.storeName}),!(null!==e&&void 0!==e&&e.orderTrackingViewEnabled)&&Object(f.jsx)("div",{className:"Address",children:null===e||void 0===e?void 0:e.addressLines}),Object(f.jsxs)("div",{className:"ContactDetail",children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("img",{src:P,alt:"",className:"phoneIcon"}),Object(f.jsx)("span",{className:"phoneNum",children:Object(f.jsx)("a",{href:"tel:{orderDetails?.phoneNumber}",className:"anchorTag",children:null===e||void 0===e?void 0:e.phoneNumberFormat})})]}),Object(f.jsxs)("span",{children:[Object(f.jsx)("img",{src:w,alt:"",className:"phoneIcon"}),Object(f.jsx)("span",{"data-testid":"get-direction",tabIndex:"0",className:"phoneNum",onClick:()=>l(),children:Object(p.translateWithI18Next)(M)})]})]}),de(e,i,n),(null===e||void 0===e?void 0:e.service)===K&&(null===e||void 0===e?void 0:e.carryBagDataExistsId)&&Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(U)}),Object(f.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.carryBagDataPrice})]}),Boolean(null===e||void 0===e?void 0:e.addHopeDataExistsId)&&Object(f.jsxs)("div",{className:"priceList",children:[Object(f.jsx)("span",{className:"fonts",children:Object(p.translateWithI18Next)(H)}),Object(f.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.addHopeDataPrice})]}),(null===e||void 0===e?void 0:e.total)&&Object(f.jsxs)("div",{className:"totalAmount",children:[Object(f.jsx)("span",{className:"total",children:Object(p.translateWithI18Next)(V)}),Object(f.jsxs)("span",{className:"total",children:[i,null===e||void 0===e?void 0:e.total]})]})]})})(e,t,i,n,l)};var se=e=>{var t;let{orderReducerData:i={},tenantReducer:n={},getDirectionClickForMaps:o,enableAccordion:r,isOpenAccordion:s,orderDetailsObj:a={}}=e;const{tenders:c}=i,{currencySymbol:u,currencyConversionFactor:j,addHope:b,carryBag:O,showCustomDeliveryFee:m}=n,{tendersContent:h}=Object(d.c)((e=>null===e||void 0===e?void 0:e.paymentsContentReducer)),{items:g}=h,N=Object(d.b)();Object(l.useEffect)((()=>{N(Object(C.a)({object:Object(_.a)(),contentFull:{content_type:"tenders",include:5,select:"sys.id,fields"}}))}),[]);const[x,E]=Object(l.useState)({fields:{displayFormat:""}}),[I,T]=Object(l.useState)({service:"",orderId:"",storeName:"",phoneNumber:"",subTotal:0,taxValue:[],additionalCharges:[],discountTotal:0,total:"",item:[],addHopeDataExistsId:"",carryBagDataExistsId:"",addHopeDataPrice:"",carryBagDataPrice:"",orderingDate:"",orderingTime:"",fullAddressDetails:"",instruction:"",addressLines:"",inclusiveTaxTotal:"",operatingHours:null===a||void 0===a||null===(t=a.operatingTime)||void 0===t?void 0:t.operatingHours});return Object(l.useEffect)((()=>{if(null!==i&&void 0!==i&&i.id){var e,t,l,o,d,r,s;const c=Object(v.hb)(b,O)?Object(y.i)(i,b,O,G,void 0,void 0,n):{};T({service:null===i||void 0===i||null===(e=i.service)||void 0===e?void 0:e.toUpperCase(),orderId:oe(i),storeName:null===i||void 0===i||null===(t=i.store)||void 0===t?void 0:t.name,phoneNumber:null===i||void 0===i||null===(l=i.store)||void 0===l?void 0:l.phoneNumber,phoneNumberFormat:ee(null===i||void 0===i||null===(o=i.store)||void 0===o?void 0:o.phoneNumber),subTotal:Object(y.e)(null===i||void 0===i?void 0:i.subTotal,j),taxValue:null===i||void 0===i?void 0:i.taxLines,additionalCharges:null===i||void 0===i?void 0:i.additionalChargeLines,discountTotal:Object(y.e)(null===i||void 0===i?void 0:i.discountTotal,j),total:Object(y.e)(null===i||void 0===i?void 0:i.total,j),item:$(null===i||void 0===i?void 0:i.foodLines,b,O),addHopeDataExistsId:(null===c||void 0===c?void 0:c.addHopeDataExistsId)||"",carryBagDataExistsId:(null===c||void 0===c?void 0:c.carryBagDataExistsId)||"",addHopeDataPrice:(null===c||void 0===c?void 0:c.addHopeDataPrice)||"",carryBagDataPrice:(null===c||void 0===c?void 0:c.carryBagDataPrice)||"",orderingDate:Object(v.Cb)(null===i||void 0===i?void 0:i.orderingDateTime),orderingTime:Object(v.bd)(null===i||void 0===i?void 0:i.orderingDateTime),fullAddressDetails:le(i),instruction:null===i||void 0===i?void 0:i.instruction,addressLines:null===i||void 0===i||null===(d=i.store)||void 0===d||null===(r=d.address)||void 0===r?void 0:r.addressLines,inclusiveTaxTotal:null===i||void 0===i?void 0:i.inclusiveTaxTotal,operatingHours:null===a||void 0===a||null===(s=a.operatingTime)||void 0===s?void 0:s.operatingHours,orderTrackingViewEnabled:null===a||void 0===a?void 0:a.orderTrackingViewEnabled}),(async()=>{await R.b.BindOrder()})()}}),[null===i||void 0===i?void 0:i.id,b,O]),Object(l.useEffect)((()=>{Object(v.hb)(null===g||void 0===g?void 0:g.length,null===c||void 0===c?void 0:c.length)&&g.forEach((e=>{var t,i,n;i=c,n=E,(t=e).fields.title===i[0].type&&n(t)}))}),[c,g]),r?function(e,t,i,n,l,o){let d=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(f.jsx)("div",{className:"accordion-bill",children:Object(f.jsxs)("div",{className:"accordion-bill-info",children:[Object(f.jsx)("div",{class:"circle-topp"}),Object(f.jsx)("div",{className:"accordion-Title",children:Object(f.jsx)("div",{className:"bill-accordian",id:null===e||void 0===e?void 0:e.orderId,children:Object(f.jsx)(A.a,{cssClass:"bill-container",header:"".concat(Object(p.translateWithI18Next)(F)," ").concat(null===e||void 0===e?void 0:e.orderId),open:!o,onClickHandler:e=>{var t,i,n,l,o,d;const r=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(i=t.parentElement)||void 0===i||null===(n=i.parentElement)||void 0===n?void 0:n.parentElement;null!==r&&void 0!==r&&null!==(l=r.classList)&&void 0!==l&&l.contains("terms-accordian-open")?null===r||void 0===r||null===(o=r.classList)||void 0===o||o.remove("terms-accordian-open"):null===r||void 0===r||null===(d=r.classList)||void 0===d||d.add("terms-accordian-open")},children:Object(f.jsx)("div",{className:"bill-accordian-description",children:re(e,t,i,n,l,d)})})})}),Object(f.jsx)("div",{class:"circle-bottomm"})]})})}(I,x,u,j,o,s,m):re(I,x,u,j,o,m)},ae=i(59);const ce=(e,t)=>!e&&t.loggedIn&&Object(f.jsx)("div",{className:"linebreak"});var ue=e=>{let{orderReducerData:t={},userParams:i={},tenantReducer:n={},orderDetails:o={}}=e;const[d,r]=Object(l.useState)(!1),[s,a]=Object(l.useState)(!1),[c,u]=Object(l.useState)(Object(v.de)(window.innerWidth)),[b,O]=Object(l.useState)(!1),[m,g]=Object(l.useState)(""),[N,x]=Object(l.useState)(""),{SAVE_YOUR_ORDERS_AND_CHECKOUT_FASTER:E="",SAVED_TO_FAVORITE_MENU:R="",SAVE_THIS_Order:S=""}=h.a,C=()=>{const e=Object(v.de)(window.innerWidth);u(e)};Object(l.useEffect)((()=>{window.addEventListener("resize",C)}),[c]),Object(l.useEffect)((()=>{s&&(ae.b.dark(Object(f.jsx)("div",{className:"img-text-div",children:Object(f.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(f.jsx)("img",{src:T.a,alt:"tick",className:"TickImg"}),Object(p.translateWithI18Next)(R)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:ae.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{ae.b.dismiss()}),4e3))}),[s]);const _=()=>{Object(y.f)(O)};return Object(l.useEffect)((()=>{if(t.id){g(t.service);const e=t.fulfillmentDateTime,i=Object(v.bd)(e);x(i)}}),[t]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"OrderReceivedContainer",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("div",{className:"NotifyOrderPlaced",children:Object(f.jsxs)("div",{className:"tickimage",children:["DELIVERY"===m.toUpperCase()?Object(f.jsx)("div",{children:Object(y.a)(t,N)}):Object(f.jsx)("div",{children:Object(y.b)(t,N,m)}),ce(s,i),i.loggedIn&&!(null!==o&&void 0!==o&&o.orderTrackingViewEnabled)&&Object(f.jsx)("div",{children:!s&&Object(f.jsxs)("div",{className:"savingdiv",children:[Object(f.jsx)("span",{className:"saving",children:Object(p.translateWithI18Next)(E)}),Object(f.jsx)("span",{className:"saveButton",children:Object(f.jsx)(j.a,{"data-testid":"save-logged-order",className:"button transparent-btn black-border",onClick:()=>Object(y.h)(r),ariaLable:Object(p.translateWithI18Next)(S),children:Object(p.translateWithI18Next)(S)})})]})})]})}),Object(f.jsx)(se,{orderReducerData:t,tenantReducer:n,getDirectionClickForMaps:_,orderDetailsObj:o})]})}),d&&Object(f.jsx)("div",{children:Object(f.jsx)(I,{"data-testid":"confirm-modal",isOpen:d,handleClose:()=>r(!1),onSave:()=>Object(y.c)(a,!0),tenantReducer:n,OrderReducerData:t})}),b&&Object(f.jsx)("div",{children:Object(f.jsx)(D.a,{"data-testid":"map-modal",isOpen:b,handleClose:()=>O(!1),OrderReducerData:t})})]})},ve=i(0);const{CallIcon:je}=N.a;var be=e=>{var t,i,n,l,o,d;let{orderReducerData:r={},orderDetails:s={},isMobile:a=!1}=e;const{deliveryPartner:c,store:u={}}=r,{CREATED:v,ASSIGNED:j,PICKED_UP:b,OUT_FOR_DELIVERY:O,ARRIVED:m}=ve.Rd,h=(null===s||void 0===s||null===(t=s.status)||void 0===t?void 0:t.toUpperCase())===v,g=(null===s||void 0===s||null===(i=s.status)||void 0===i?void 0:i.toUpperCase())===j||(null===s||void 0===s||null===(n=s.status)||void 0===n?void 0:n.toUpperCase())===b||(null===s||void 0===s||null===(l=s.status)||void 0===l?void 0:l.toUpperCase())===O,N=(null===s||void 0===s||null===(o=s.status)||void 0===o?void 0:o.toUpperCase())===m,x=(null===s||void 0===s||null===(d=s.status)||void 0===d?void 0:d.toUpperCase())!==v;return Object(f.jsx)("div",{className:"delivery-info-daas",children:Object(f.jsxs)("div",{className:"info-content",children:[Object(f.jsxs)("div",{className:"dis-flex-first",children:[Object(f.jsx)("div",{className:"left-sec head-text mr-set",children:Object(f.jsx)("span",{children:Object(p.translateWithI18Next)("contactKFC")})}),(null===c||void 0===c?void 0:c.rider_phone)&&x&&!a&&Object(f.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("contact")})," ",Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})]}),a&&g&&Object(f.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})," ",Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("isOnTheWay")})]}),a&&N&&Object(f.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name}),Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("arrvingSoon")})]})]}),Object(f.jsxs)("div",{className:"dis-flex-sec",children:[h&&Object(f.jsx)("div",{className:"left-sec mr-set created-driverstatus",children:Object(f.jsxs)("span",{className:"set-opacity",children:[Object(p.translateWithI18Next)("findingDriver"),"..."]})}),!a&&g&&Object(f.jsxs)("div",{className:"left-sec mr-set",children:[Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})," ",Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("isOnTheWay")})]}),!a&&N&&Object(f.jsxs)("div",{className:"left-sec mr-set",children:[Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name}),Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("arrvingSoon")})]}),a&&x&&(null===c||void 0===c?void 0:c.rider_phone)&&Object(f.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("contact")})," ",Object(f.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})]}),x&&Object(f.jsxs)("div",{className:"rgt-sec algn-rgt mr-set",children:[a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{src:je,alt:" "}),Object(f.jsx)("a",{href:"tel:"+(null===c||void 0===c?void 0:c.rider_phone),className:"anchorTags",children:Object(f.jsx)("span",{className:"contact-text",children:Object(p.translateWithI18Next)("call")})})]}),!a&&Object(f.jsx)("span",{className:"contact-text-mob",children:null===c||void 0===c?void 0:c.rider_phone})]})]}),Object(f.jsx)("div",{className:"hr-line"}),Object(f.jsx)("div",{className:"dis-flex-sec",children:Object(f.jsx)("div",{className:"left-sec mr-set",children:Object(f.jsx)("span",{className:"set-opacity",children:Object(p.translateWithI18Next)("kfcRestaraunt")})})}),Object(f.jsxs)("div",{className:"dis-flex-sec",children:[Object(f.jsx)("div",{className:"left-sec mr-set",children:Object(f.jsx)("strong",{children:null===u||void 0===u?void 0:u.name})}),Object(f.jsxs)("div",{className:"rgt-sec algn-rgt mr-set",children:[a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{src:je,alt:" "}),Object(f.jsx)("a",{href:"tel:"+(null===u||void 0===u?void 0:u.phoneNumber),className:"anchorTags",children:Object(f.jsx)("span",{className:"contact-text",children:Object(p.translateWithI18Next)("call")})})]}),!a&&Object(f.jsx)("span",{className:"contact-text-mob",children:null===u||void 0===u?void 0:u.phoneNumber})]})]})]})})},Oe=i(406);const me=e=>{let{orderDetails:t={}}=e;const{TRACK_ORDER:i}=Oe.d;return Object(f.jsx)("iframe",{sandbox:"allow-same-origin allow-scripts",title:Object(p.translateWithI18Next)(i),src:(()=>{var e;const i=null===t||void 0===t||null===(e=t.deliveryPartner)||void 0===e?void 0:e.tracking_url;return(i&&-1===i.indexOf(Oe.c)?Oe.c:"")+i})()})};var he=i(1207),pe=i(1120),ge=i.n(pe);const Ne=e=>{var t;let{orderDetails:i,status:n,imageSrc:l,statusMessage:o,getTime:d,cardToFill:r,showProgressBar:s}=e;const{ESTIMATED_ARRIVAL:a,ASK_FOR_OTP:c}=g.a,{SENT_TO_POS_COMPLETED:u}=ve.Rd;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"estimated-arrival estimated-arrival-refund ".concat(n,"-delivery"),children:Object(p.translateWithI18Next)(a)}),Object(f.jsx)("div",{className:"idAndTime time-delivery",children:Object(f.jsx)("div",{className:"red",children:d((e=>{var t,i;return null!==e&&void 0!==e&&null!==(t=e.orderTime)&&void 0!==t&&null!==(i=t.toString())&&void 0!==i&&i.includes("-")?null===e||void 0===e?void 0:e.fulfillmentDateTime:null===e||void 0===e?void 0:e.orderTime})(i))})}),l&&Object(f.jsx)("img",{src:l,alt:n}),s&&Object(f.jsx)("div",{className:"progress-bar-list",children:(()=>{let e=[];return 0!==r&&ge()(5,(t=>{e.push(Object(f.jsx)("div",{id:"progressBarContainer",className:"ProgressDelivery ".concat(t+1<=r?"selectedBar":"Bar")},t))})),e})()}),Object(f.jsx)("div",{className:"allSet allset-delivery ".concat(n,"-delivery-allSet"),children:Object(p.translateWithI18Next)(o)}),n!==u&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"estimated-arrival estimated-arrival-refund driver-msg",children:Object(p.translateWithI18Next)(c)}),Object(f.jsx)("div",{className:"idAndTime time-delivery",children:Object(f.jsx)("div",{className:"red otp",children:null===i||void 0===i||null===(t=i.deliveryPartner)||void 0===t?void 0:t.otp})})]})]})};var xe=o.a.memo(Ne),fe=i(1178);const{ConfirmedImg:Ee,TakeAwayImg:Ie,TakeawayCompleted:Te}=N.a,De=e=>Object(v.jb)(Object(he.g)(e),Object(he.i)(e))?Object(he.i)(e)?"distaIframeContainer-delivered":Object(he.g)(e)?"distaIframeContainer-cancelled":"":"";var Re=e=>{let{orderDetails:t={},orderReducerData:i={},tenantReducer:n={}}=e;const{DELIVERED:o,SENT_TO_POS_COMPLETED:d,CREATED:r,ASSIGNED:s,CANCEL:a}=ve.Rd,{ORDER_RECEIVED:c,ORDER_READY:u,FOUND_DRIVER:j}=g.a,[b,O]=Object(l.useState)({imageSrc:"",statusMessage:"",showProgressBar:!1}),[m,h]=Object(l.useState)(0),[p,N]=Object(l.useState)(!1),[x,E]=Object(l.useState)(Object(v.de)(window.innerWidth)),I=()=>{const e=Object(v.de)(window.innerWidth);E(e)};Object(l.useEffect)((()=>{window.addEventListener("resize",I)}),[x]);const T=Object(he.j)(t)&&!Object(he.i)(t),D=()=>Object(f.jsx)(se,{orderReducerData:i,tenantReducer:n,enableAccordion:"true",isOpenAccordion:T,orderDetailsObj:t});Object(l.useEffect)((()=>{O((e=>{switch(Object(v.rf)(null===e||void 0===e?void 0:e.status)){case d:if(h(1),!p){const e=setTimeout((()=>{N(!0),e&&clearTimeout(e)}),fe.d)}return{imageSrc:Ee,statusMessage:c,showProgressBar:!p};case r:return h(2),{imageSrc:Ie,statusMessage:u,showProgressBar:!0};case s:return h(3),{imageSrc:Te,statusMessage:j,showProgressBar:!0};case o:case a:return h(0),{imageSrc:"",statusMessage:"",showProgressBar:!1}}})(t))}),[null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag,null===i||void 0===i?void 0:i.id]);const R=T?"adjust-delivery-info bill-accordion-section":"bill-accordion-section";return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"OrderReceivedContainer",children:[Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("div",{className:"NotifyOrderPlaced ".concat(De(t)," ").concat(Object(he.k)(t)?" distaIframeContainer":""),children:Object(he.k)(t)?Object(f.jsx)(me,{orderDetails:t}):Object(f.jsx)("div",{className:"tickimage",children:Object(f.jsx)("div",{children:Object(f.jsx)(xe,{orderDetails:t,status:Object(v.rf)(null===t||void 0===t?void 0:t.status),imageSrc:null===b||void 0===b?void 0:b.imageSrc,statusMessage:null===b||void 0===b?void 0:b.statusMessage,getTime:v.bd,cardToFill:m,showProgressBar:null===b||void 0===b?void 0:b.showProgressBar})})})}),!x&&!Object(he.j)(t)&&!Object(he.i)(t)&&D()]}),Object(f.jsxs)("div",{className:R,children:[(Object(he.h)(t)||Object(he.j)(t))&&Object(f.jsx)(be,{isMobile:x,orderReducerData:i,orderDetails:t}),Object(he.j)(t)&&D(),x&&!Object(he.j)(t)&&!Object(he.i)(t)&&D()]})]})})},Se=i(1119),ye=i(73),Ce=i(1108),_e=i(87);const Ae=(e,t,i,n,l)=>{var o,d;const{additionalChargeLines:r,foodLines:s,paymentReferences:a,total:c,inclusiveTaxTotal:u}=e,{couponCode:j="",discountTotal:b=""}=Object(v.zb)(e),{localized:O=!1,loggedIn:m=!1}=Object(v.sd)(i),h=Object(v.od)(O,m),p=[];let g;var N,x;(null===s||void 0===s||s.forEach(((e,i)=>{var n,l,o,d,r,s,a;const c=[];null===e||void 0===e||null===(n=e.item)||void 0===n||null===(l=n.modGrps)||void 0===l||l.forEach((e=>{var t,i;c.push(null===e||void 0===e||null===(t=e.modifiers)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.name)}));const{categoryId:u="",categoryName:v="",content:j=""}=null===e||void 0===e?void 0:e.item;null===p||void 0===p||p.push({currency:ve.p.INR,discount:b/t,item_name:(null===e||void 0===e||null===(o=e.item)||void 0===o||null===(d=o.dname)||void 0===d||null===(r=d[0])||void 0===r?void 0:r.value)||ve.Fd,item_id:(null===e||void 0===e||null===(s=e.item)||void 0===s?void 0:s.id)||ve.Fd,price:(null===e||void 0===e||null===(a=e.item)||void 0===a?void 0:a.unitPrice)/t||ve.Fd,item_variant:c.join(", ")||ve.Fd,quantity:(null===e||void 0===e?void 0:e.quantity)||ve.Fd,item_category:v,item_list_name:v,item_list_id:u,product_tags:(null===j||void 0===j?void 0:j.allergenList)||ve.Fd,index:i})})),l)?g=l:g=null!==R.b&&void 0!==R.b&&R.b.shouldGoogleSpotIgnoreOloFailure&&null!==R.b&&void 0!==R.b&&R.b.transactionId?null===R.b||void 0===R.b?void 0:R.b.transactionId:null!==(N=null===a||void 0===a||null===(x=a[0])||void 0===x?void 0:x.transactionId)&&void 0!==N?N:ve.Fd;Object(_e.e)(h,{affiliation:ve.p.ONLINE_STORE,transaction_id:g,value:c?c/t:ve.Fd,tax:u?u/t:ve.Fd,shipping:"delivery-charge"===(null===r||void 0===r||null===(o=r[0])||void 0===o?void 0:o.chargeType)?(null===r||void 0===r||null===(d=r[0])||void 0===d?void 0:d.amount)/t:ve.Fd,currency:ve.p.INR,coupon:j,items:p||ve.Fd})};var Pe=e=>{let{orderReducerData:t={},userParams:i={},tenantReducer:n={}}=e;const[o,d]=Object(l.useState)(!1),[r,s]=Object(l.useState)(!1),[a,c]=Object(l.useState)(Object(v.de)(window.innerWidth)),{SAVE_YOUR_ORDERS_AND_CHECKOUT_FASTER:u,SAVED_TO_FAVORITE_MENU:b,SAVE_THIS_Order:O,REORDER_FAVOURITES:m,CREATE_KFC_ACCOUNT:g}=h.a,N=()=>{const e=Object(v.de)(window.innerWidth);c(e)};return Object(l.useEffect)((()=>{window.addEventListener("resize",N)}),[a]),Object(l.useEffect)((()=>{r&&(ae.b.dark(Object(f.jsx)("div",{className:"img-text-div",children:Object(f.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(f.jsx)("img",{src:T.a,alt:"tick",className:"TickImg"}),Object(p.translateWithI18Next)(b)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:ae.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{ae.b.dismiss()}),4e3))}),[r]),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:i.loggedIn?Object(f.jsx)("div",{children:!r&&Object(f.jsxs)("div",{className:"savingdivDelivery",children:[Object(f.jsx)("span",{className:"savingText",children:Object(p.translateWithI18Next)(u)}),Object(f.jsx)("span",{className:"saveButton",children:Object(f.jsx)(j.a,{"data-testid":"save-logged-order",className:"button transparent-btn black-border",onClick:()=>Object(y.h)(d),ariaLable:Object(p.translateWithI18Next)(O),children:Object(p.translateWithI18Next)(O)})})]})}):Object(f.jsx)("div",{children:!r&&Object(f.jsxs)("div",{className:"savingdivDelivery",children:[Object(f.jsx)("span",{className:"savingText",children:Object(p.translateWithI18Next)(m)}),Object(f.jsx)("span",{className:"saveButton",children:Object(f.jsx)(j.a,{"data-testid":"save-guest-order",className:"button transparent-btn black-border",onClick:()=>Object(y.j)(t,100),ariaLable:Object(p.translateWithI18Next)(g),children:Object(p.translateWithI18Next)(g)})})]})})}),o&&Object(f.jsx)("div",{children:Object(f.jsx)(I,{"data-testid":"confirm-modal",isOpen:o,handleClose:()=>d(!1),onSave:()=>Object(y.c)(s,!0),tenantReducer:n,OrderReducerData:t})})]})},we=i(55);const Le=e=>{var t,i,j,b,O,m,h,p;let g=null,N=null;const{userOrderState:x}=Object(l.useContext)(r.a),{tenantReducer:E,appStateReducer:I,orderReducer:T,postOrderReducer:D,cartReducer:S,storesReducer:y}=Object(d.c)((e=>e)),C=Object(d.c)((e=>{var t,i;return null===e||void 0===e||null===(t=e.postOrderReducer)||void 0===t||null===(i=t.cashTranscationResponse)||void 0===i?void 0:i.transactionId})),A=(Object(d.c)((e=>{let{menuReducer:{flatResponse:t}}=e;return t})),Object(d.b)()),{userStatus:P}=I,{cartData:w,isBasketLoading:L,qrCodeScanTime:k}=S,F=null===E||void 0===E||null===(t=E.componentOptions)||void 0===t||null===(i=t.homePage)||void 0===i?void 0:i.enableGuestOrderTracking,W=Object(v.Sd)(x.dispositionNew)?JSON.parse(localStorage.getItem(ve.gd.DISPOSITION_NEW)):x.dispositionNew,[M,B]=Object(l.useState)(Object(he.u)(null===E||void 0===E?void 0:E.tenantId,Object(he.e)(D,T,{},!1),null===T||void 0===T||null===(j=T.response)||void 0===j?void 0:j.order,W)),{checkout:{showPaymentProcessing:V}={}}=null!==(b=null===E||void 0===E||null===(O=E.componentOptions)||void 0===O?void 0:O.web)&&void 0!==b?b:{},[U,H]=Object(l.useState)(!0),[G,Y]=Object(l.useState)(0),[K,z]=Object(l.useState)(!1),[q,J]=Object(l.useState)(!1),[X,Q]=Object(l.useState)(!1),Z=null===(m=window)||void 0===m||null===(h=m.location)||void 0===h||null===(p=h.pathname)||void 0===p?void 0:p.includes("order-tracking"),$=Object(d.c)((e=>e.appStateReducer.userStatus));Object(l.useEffect)((()=>{window.scrollTo(0,0)})),Object(l.useEffect)((()=>{var e;F&&null!==M&&void 0!==M&&M.status&&(null===M||void 0===M?void 0:M.status)!==(null===ve.Rd||void 0===ve.Rd||null===(e=ve.Rd.SENT_TO_POS_FAILED)||void 0===e?void 0:e.toLowerCase())&&Object(v.Jd)(null===M||void 0===M?void 0:M.service)&&(null===M||void 0===M||!M.orderTrackingViewEnabled)&&Object(Ce.r)(M)}),[M]);const ee=e=>Object(he.t)(A,e);Object(l.useEffect)((()=>(window.removeEventListener("beforeunload",(()=>ee(!0)),!0),window.addEventListener("beforeunload",(()=>ee(!0))),localStorage.removeItem(ve.gd.ADD_TO_ORDER),()=>{window.removeEventListener("beforeunload",(()=>ee(!0)),!0),B({}),Object(he.t)(A)})),[]),Object(l.useEffect)((()=>{const t=Object(he.e)(D,T,{},!1);if(t&&Object.keys(t).length){if(!Object(he.p)(t)&&!X){var i,n,l;(e=>{var t;const i=[{storeId:null===e||void 0===e||null===(t=e.store)||void 0===t?void 0:t.storeId,channel:R.b.channel,service:null===e||void 0===e?void 0:e.service}],n=null===E||void 0===E?void 0:E.tenantId;A(Object(ye.d)({data:i,tenantId:n,isFavoritePage:!1}))})(t);const{currencyConversionFactor:e}=E;(null===T||void 0===T||null===(i=T.response)||void 0===i||null===(n=i.order)||void 0===n||null===(l=n.tenders[0])||void 0===l?void 0:l.type)!==ve.Vd.PAY_BY_CASH&&Ae(t,e,P),Q(!0)}Object(he.q)(t,q,J);let d=M;var o;if(0===(null===M||void 0===M?void 0:M.deliveryDistaRetryCountFlag)||null!==M&&void 0!==M&&M.isActiveGuestTracking||null!==M&&void 0!==M&&M.orderTrackingViewEnabled)d=Object(he.u)(null===E||void 0===E?void 0:E.tenantId,Object(he.e)(D,T,{},!1),null===T||void 0===T||null===(o=T.response)||void 0===o?void 0:o.order,W),d={...d,isActiveGuestTracking:!0,deliveryDistaRetryCountFlag:null===M||void 0===M?void 0:M.deliveryDistaRetryCountFlag};Object(he.v)(t,d,B,q,e)}}),[null===D||void 0===D?void 0:D.orderAccepted,null===T||void 0===T?void 0:T.pastOrderResponse]),Object(l.useEffect)((()=>{const t=C,i=Object(he.e)(D,T,{},!1),{currencyConversionFactor:n}=E;var l,o,d;i&&Object.keys(i).length&&(Object(he.q)(i,q,J),Object(he.v)(i,M,B,q,e),(null===T||void 0===T||null===(l=T.response)||void 0===l||null===(o=l.order)||void 0===o||null===(d=o.tenders[0])||void 0===d?void 0:d.type)===ve.Vd.PAY_BY_CASH&&Ae(i,n,P,0,t))}),[C]);const te=()=>{const t=Object(he.e)(D,T,{},!1);Object(he.s)(A,M,G,t,Y,e,E,B)};Object(l.useEffect)((()=>{var e,t;const{currencyConversionFactor:i,currencySymbol:n,currencyShortName:l}=E;let o=localStorage.getItem("wasInActiveOrders");const d=null===E||void 0===E||null===(e=E.componentOptions)||void 0===e||null===(t=e.homePage)||void 0===t?void 0:t.enableGuestOrderTracking;if(U&&null!==M&&void 0!==M&&M.orderId&&!Object(v.le)()){var r,s,a,c,u,j;const e={currencySymbol:n,currencyShortName:l,currencyConversionFactor:i,storeName:null===T||void 0===T||null===(r=T.response)||void 0===r||null===(s=r.order)||void 0===s||null===(a=s.store)||void 0===a?void 0:a.name,orderId:null===T||void 0===T||null===(c=T.response)||void 0===c||null===(u=c.order)||void 0===u?void 0:u.id,...null===T||void 0===T||null===(j=T.response)||void 0===j?void 0:j.order};"true"!==o&&!d&&Object(we.B)({orderDetails:e,userOrderState:x}),localStorage.setItem("wasInActiveOrders","false")}}),[U]),Object(l.useEffect)((()=>{U&&G>0&&te()}),[G]),Object(l.useEffect)((()=>{if(null!==E&&void 0!==E&&E.tenantId&&(V||sessionStorage.getItem(ve.gd.ORDER_TRACKING))){let n=JSON.parse(sessionStorage.getItem(ve.gd.ORDER_TRACKING));var e,t,i;if(n&&Object.keys(n).length)null===n||void 0===n||!n.postOrderDetails||0!==Object.keys(null===n||void 0===n?void 0:n.postOrderDetails).length&&null!==P&&void 0!==P&&P.loggedIn||Object(he.c)(A,n,void 0,void 0,E),B({...M,...n,deliveryDistaRetryCountFlag:null!==n&&void 0!==n&&n.postOrderDetails?1:0,operatingTime:null===y||void 0===y||null===(e=y.storesWithStatus)||void 0===e||null===(t=e[0])||void 0===t||null===(i=t.summary)||void 0===i?void 0:i.timings});else M&&te()}}),[null===E||void 0===E?void 0:E.tenantId]),Object(l.useEffect)((()=>{var e;A(Object(c.a)({object:Object(_.a)(),contentFull:{content_type:"marketConfig","fields.location":null===ie||void 0===ie||null===(e=ie.tenantReducerContent)||void 0===e?void 0:e.country,"fields.channel":R.b.channel,include:5}}))}),[A]),Object(l.useEffect)((()=>{A(Object(a.c)({object:Object(_.a)(),contentFull:{content_type:"landingPage","fields.pageType":"HomePage","fields.channel":R.b.channel,include:"5"},userStatus:P}))}),[A,P,null===E||void 0===E?void 0:E.tenantId]),Object(l.useEffect)((()=>{let t=null;if(U&&!Object(he.m)(M)){(async()=>{const t=Object(he.e)(D,T,{},!1),i=await Object(he.r)(t,H,e);Object(he.a)({dispatch:A,orderDetails:M,orderAccepted:t,cartData:w,userOrderState:x,appStateReducer:I,isBasketLoading:L,status:i,qrCodeScanTime:k})})()}return Object(he.f)(M)&&!K&&(z(!0),H(!1)),null!==M&&void 0!==M&&M.orderId&&Object(he.n)(M)&&(t=setTimeout((()=>{Object(he.c)(A,M,void 0,void 0,E)}),fe.b)),()=>{t&&clearTimeout(t)}}),[null===M||void 0===M?void 0:M.deliveryDistaRetryCountFlag]),Object(l.useEffect)((()=>{"giftCardPurchase"===localStorage.getItem(ve.gd.POST_PAYMENT_TYPE)&&(localStorage.setItem(ve.gd.PAYMENT_STATUS,ve.Ud.SUCCESS),Object(v.We)(e))}),[]);const ie=Object(d.c)((e=>({homePageContent:Object(v.wd)(e.contentReducer.response),marketPageContent:Object(v.wd)(e.marketConfigReducer.response),tenantReducerContent:Object(v.wd)(e.tenantReducer)})));if(ie.marketPageContent&&ie.tenantReducerContent&&ie.homePageContent){const{header:e={},footer:t={}}=Object(v.sd)(ie.marketPageContent.headerData);g=Object(v.gc)(e),N=Object(v.Wb)(t)}const ne=Object(v.q)(null===M||void 0===M?void 0:M.postOrderDetails,null===M||void 0===M?void 0:M.orderTrackingViewEnabled);return Object(f.jsx)(o.a.Fragment,{children:(ne||null!==M&&void 0!==M&&M.orderTrackingHasError)&&null!==M&&void 0!==M&&M.orderTrackingViewEnabled?Object(f.jsx)(n.a,{showTakeMeHomeBtn:!1}):Object(f.jsxs)("div",{className:"PostPaymentProcessComponent ".concat(Z?" order-tracking":""),children:[Object(v.Td)(g)&&!(null!==M&&void 0!==M&&M.orderTrackingViewEnabled)&&Object(f.jsx)(Se.b,{contentData:g,tenantReducerData:ie.tenantReducerContent,userParams:$,paymentHeader:!0,checkoutHeader:!1}),U&&Object(f.jsx)(u.a,{retryCount:G}),Object(he.o)(M)&&!Object(he.l)(M)&&Object(f.jsx)(ue,{orderReducerData:Object(he.e)(D,T,M),userParams:$,tenantReducer:E,orderDetails:M}),K&&Object(f.jsxs)("div",{children:[Object(f.jsx)(Re,{orderDetails:M,orderReducerData:Object(he.e)(D,T,M),tenantReducer:E}),!(null!==M&&void 0!==M&&M.orderTrackingViewEnabled)&&Object(f.jsx)(Pe,{orderReducerData:Object(he.e)(D,T,M),userParams:$,tenantReducer:E,orderDetails:M})]}),Object(v.Td)(N)&&!(null!==M&&void 0!==M&&M.orderTrackingViewEnabled)&&Object(f.jsx)(s.a,{contentData:N,history:e.history,tenantReducerData:ie.tenantReducerContent})]})})}}}]);