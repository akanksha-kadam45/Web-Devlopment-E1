(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[118],{1060:function(e,o,t){"use strict";t.r(o);var n=t(3),a=t.n(n),d=t(46),i=t(278),l=t(448),s=t(2);var c=e=>{var o,t;const{segmentedAddHopeData:n,isMobile:a,paymentData:c,donationsButtonData:r,updateAddHopeDetails:u,addHopeDetails:v}=e;return Object(s.jsxs)("div",{className:"add-hope-container",children:[Object(s.jsx)("div",{className:"add-hope-banner-block col-12",children:Object(s.jsx)(d.a,{className:"banner-image","data-testid":"product-image",srcFile:a?n.mobileImage:n.desktopImage,alt:"text"})}),Object(s.jsxs)("div",{className:"add-hope-content-area content-area wrapper-content",children:[Object(s.jsx)("p",{className:"addhope-display-paragraph",children:n.headLine}),Object(s.jsx)("h2",{className:"add-hope-title",children:n.shortText}),Object(s.jsx)("h5",{className:"add-hope-longtext",children:n.longText}),Object(s.jsx)("p",{className:"addhope-display-paragraph",children:n.richText1}),Object(s.jsx)("p",{className:"addhope-display-paragraph",children:n.richText2}),Object(s.jsx)("p",{className:"addhope-display-paragraph",children:n.richText3}),Object(s.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(s.jsx)("div",{className:" col-sm-2 col-12",children:Object(s.jsx)(d.a,{"data-testid":"product-image",srcFile:n.bucketImage,className:"add-hope-bucket-img",alt:"text"})}),Object(s.jsxs)("div",{className:"col-sm-8 col-12",children:[Object(s.jsx)("ul",{className:"add-hope-unordered-list",children:n.displayLine1&&n.displayLine1.split(" ").join("").split("").map((e=>Object(s.jsxs)("li",{className:"add-hope-list",children:[" ",e]})))}),Object(s.jsx)("span",{className:"add-hope-text-new",children:n.displayLine2})]})]})]}),Object(s.jsxs)("div",{className:"addHopeFormContainer",children:[Object(s.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(s.jsx)("div",{className:"labelContent-addHope info-label pl-25px col-sm-2 col-12",children:Object(s.jsx)("span",{children:n.addHopeFormTitle})}),Object(s.jsx)("div",{className:"donate-details px-25px col-sm-8 col-12",children:Object(s.jsx)("div",{className:"tip-text-donate",children:n.addHopeFormHeadLine})})]}),Object(s.jsxs)("div",{className:"donate-form-details px-25px col-sm-10 col-12",children:[(null===v||void 0===v||null===(o=v.addHopeFormConfig)||void 0===o||null===(t=o.fieldsConfig)||void 0===t?void 0:t.length)&&Object(s.jsx)("div",{className:"mt-4 contactInfoContent col-12  d-flex",children:Object(s.jsx)("div",{className:"col-12",children:Object(s.jsx)(i.a,{formConfig:{...null===v||void 0===v?void 0:v.addHopeFormConfig,addHopeDetails:v,updateAddHopeDetails:u}})})}),(null===r||void 0===r?void 0:r.isAddHopeButtonClicked)&&(null===c||void 0===c?void 0:c.redirectUri)&&Object(s.jsx)(l.a,{formData:c})]}),Object(s.jsx)("div",{className:"labelContent-addHope info-label-snapscan pl-25px ",children:Object(s.jsx)("span",{children:n.snapScanHeadline})}),Object(s.jsx)("div",{className:"donate-details-snapscan px-25px ",children:Object(s.jsx)("a",{href:n.snapScanExternalURL,children:Object(s.jsx)(d.a,{"data-testid":"product-image",srcFile:n.snapScanImage,alt:"text"})})})]})]})},r=t(20),u=t.n(r),v=t(62),p=t(0),m=t(5),h=t(199),b=t(412),D=t(4),O=t(6),j=t(49);const{ADDHOPE_ITEMS:g}=p.Oc,f=e=>{var o,t,n,a,d;const{AddHopeData:i,donationsButtonData:l,setDonationsButtonData:s,currencySymbol:c,tenantId:r,dispatch:u,currencyConversionFactor:v}=e,m=[];return null===i||void 0===i||null===(o=i.items)||void 0===o||null===(t=o[0])||void 0===t||null===(n=t.fields.body)||void 0===n||null===(a=n[3])||void 0===a||null===(d=a.fields)||void 0===d||d.formField.forEach((e=>{var o,t,n,a,d,i,j,g,f,y,I,F,w;const{fields:S,sys:{id:P}}=e,B={...S,className:"formElement",key:P,rules:{required:{value:!(null===e||void 0===e||null===(o=e.fields)||void 0===o||!o.required)&&(null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.required),message:"".concat(Object(O.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.INVALID_TEXT)," ").concat(null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.label)||void 0===a?void 0:a.toLowerCase())},pattern:{value:null!==e&&void 0!==e&&null!==(d=e.fields)&&void 0!==d&&d.pattern?RegExp(null===e||void 0===e||null===(i=e.fields)||void 0===i?void 0:i.pattern):null,message:"".concat(Object(O.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.INVALID_TEXT)," ").concat(null===e||void 0===e||null===(j=e.fields)||void 0===j||null===(g=j.label)||void 0===g?void 0:g.toLowerCase())},validate:o=>{var t,n,a;return(null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.type)!==p.Pc||(!Object(b.b)(h.a,o)||"".concat(Object(O.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.INVALID_TEXT)," ").concat(null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.label)||void 0===a?void 0:a.toLowerCase()))}},onChangeHandler:x,onBlurHandler:x,isMandatory:!(null===e||void 0===e||null===(f=e.fields)||void 0===f||!f.required)&&(null===e||void 0===e||null===(y=e.fields)||void 0===y?void 0:y.required),maxLength:null!==e&&void 0!==e&&null!==(I=e.fields)&&void 0!==I&&I.maxLength?null===e||void 0===e||null===(F=e.fields)||void 0===F?void 0:F.maxLength:""};"addHopePreAmount"!==(null===e||void 0===e||null===(w=e.fields)||void 0===w?void 0:w.name)?m.push(B):m.push({...B,name:"addHopePreAmount",type:"donationButtonGroup",donationsButtonData:l,onClickDonationHandler:H,currencySymbol:c,setDonationsButtonData:s,handleFocus:N,handleBlur:T,onChangeInputHandler:A,onClearDonationTextHandler:C,onClickDonationAddHandler:E,tenantId:r,dispatch:u,currencyConversionFactor:v})})),m},x=e=>{var o;const t=null===e||void 0===e||null===(o=e.getValueFromElements)||void 0===o?void 0:o.call(e),n={...null===e||void 0===e?void 0:e.addHopeDetails};n.addHopefirstName=null===t||void 0===t?void 0:t.addHopefirstName,n.addHopeLastName=null===t||void 0===t?void 0:t.addHopeLastName,n.addHopeEmail=null===t||void 0===t?void 0:t.addHopeEmail,n.addHopePreAmount=null===t||void 0===t?void 0:t.addHopePreAmount,null===e||void 0===e||e.updateAddHopeDetails({...n})},H=(e,o,t)=>{var n;const{donationsButtonData:a,setDonationsButtonData:d,currencySymbol:i}=t,l=null===a||void 0===a||null===(n=a.donationChargeOption)||void 0===n?void 0:n.map(((e,t)=>({...e,isDefault:o===t})));d({...a,donationChargeOption:l,addDonationBtnHandler:!0,editButtonShow:!1,showCurrencyField:!0,customAmount:e.displayNonPercentageAmount.split(i).join(""),defaultTipSelected:!0,inputFiledValidErrormsg:"",readOnly:!0})},N=e=>{const{donationsButtonData:o,setDonationsButtonData:t}=e;t({...o,showCurrencyField:!0,defaultTipSelected:!0})},T=(e,o)=>{const{donationsButtonData:t,setDonationsButtonData:n}=o,a=t.donationChargeOption.find((e=>!0===e.isSelected));n({donationChargeOption:t.donationChargeOption.map((e=>({...e,displayNonPercentageAmount:e.displayNonPercentageAmount,isDefault:e===a}))),showNonDonationPercentage:!0,showDonationsCustomFields:!0,addDonationBtnHandler:!0,donationRegexPattern:p.ob,customAmount:e.target.value,showCurrencyField:!!e.target.value,buttonText:p.h,inputFiledValidErrormsg:"",isAddHopeFlow:!0,defaultTipSelected:!0})},A=(e,o)=>{const{donationsButtonData:t,setDonationsButtonData:n}=o;parseInt(e.target.value)<1?((e,o,t)=>{t({donationChargeOption:o.donationChargeOption.map((e=>({...e,displayNonPercentageAmount:e.displayNonPercentageAmount,isDefault:!1===e}))),showNonDonationPercentage:!0,showDonationsCustomFields:!0,addDonationBtnHandler:!0,donationRegexPattern:p.ob,customAmount:e.target.value,showCurrencyField:!!e.target.value,buttonText:p.h,inputFiledValidErrormsg:Object(O.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.TIPPING_INVALID_MSG),isAddHopeFlow:!0,defaultTipSelected:!1})})(e,t,n):n({donationChargeOption:t.donationChargeOption.map((e=>({...e,displayNonPercentageAmount:e.displayNonPercentageAmount,isDefault:!1}))),showNonDonationPercentage:!0,showDonationsCustomFields:!0,addDonationBtnHandler:!0,inputFiledValidErrormsg:"",donationRegexPattern:p.ob,customAmount:e.target.value,showCurrencyField:!!e.target.value,buttonText:p.h,isAddHopeFlow:!0,defaultTipSelected:!1})},C=e=>{const{donationsButtonData:o,setDonationsButtonData:t}=e,n=o.donationChargeOption.find((e=>!0===e.isSelected));t({donationChargeOption:null===o||void 0===o?void 0:o.donationChargeOption.map((e=>({...e,isDefault:e===n}))),showNonDonationPercentage:!0,showDonationsCustomFields:!0,addDonationBtnHandler:!0,customAmount:"",inputFiledValidErrormsg:"",donationRegexPattern:p.ob,editButtonShow:!1,buttonText:p.h,showCurrencyField:!1,isAddHopeFlow:!0,defaultTipSelected:!0})},E=e=>{var o;const{donationsButtonData:t,dispatch:n,tenantId:a,setDonationsButtonData:d,currencyConversionFactor:i,addHopeDetails:l}=e;sessionStorage.setItem(p.Ne.POST_PAYMENT_TYPE,p.qe.ADD_HOPE_PURCHASE);const s=(new Date).toISOString().slice(0,-5);d({...t,addDonationBtnHandler:!0,isAddHopeButtonClicked:!0,isAddHopeFlow:!0});const c=null===t||void 0===t?void 0:t.donationChargeOption.find((e=>!0===e.isDefault)),r=null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.slice(1),u={firstName:null===l||void 0===l?void 0:l.addHopefirstName,lastName:null===l||void 0===l?void 0:l.addHopeLastName,email:null===l||void 0===l?void 0:l.addHopeEmail,miscPaymentTypeId:"add-hope-donate",amount:null!==t&&void 0!==t&&t.defaultTipSelected?(null===r||void 0===r?void 0:r.slice(0,-3))*i:(null===t||void 0===t?void 0:t.customAmount)*i,transactionDate:s,tenderType:"credit-card"};n(Object(j.w)({tenantId:a,data:u}))};var y=t(328),I=t(74),F=t(132),w=t(171),S=t(28);var P=()=>{var e;const[o,t]=Object(n.useState)(Object(m.de)(window.innerWidth)),[d,i]=Object(n.useState)({}),l=Object(F.a)(),r=Object(v.g)(),{tenantId:h,currencyConversionFactor:b}=Object(S.c)((e=>e.tenantReducer||{})),{addHopePayResponse:D}=Object(S.c)((e=>e.paymentsReducer||{})),O=null!==(e=Object(F.b)(I.c))&&void 0!==e?e:{},H=Object(S.c)((e=>{var o;return null===(o=e.tenantReducer)||void 0===o?void 0:o.currencySymbol})),[N,T]=Object(n.useState)({donationChargeOption:[],inputFiledValidErrormsg:"",customAmount:"",addDonationBtnHandler:!0,showDonationsCustomFields:!0,showNonDonationPercentage:!0,editButtonShow:!1,buttonText:d.addHopeButton,showCurrencyField:!1,defaultTipSelected:!1}),[A,C]=Object(n.useState)({}),E=Object(n.useCallback)((e=>{C&&C((o=>({...o,...e})))}),[]);Object(n.useEffect)((()=>{window.scrollTo(0,0)}),[]),Object(n.useEffect)((()=>(l(Object(y.a)()),l(Object(j.z)()),l(Object(w.h)()),()=>{l(I.a.resetReducer())})),[l]);const P=()=>{const e=Object(m.de)(window.innerWidth);t(e)};return Object(n.useEffect)((()=>{window.addEventListener(p.ye,P)}),[o]),Object(n.useEffect)((()=>{var e,o,t;u()(null===O||void 0===O?void 0:O.addHope)||i((e=>{var o;const t=null===(o=e.body)||void 0===o?void 0:o.map((e=>e.fields));var n,a,d,i,l,s,c,r,v,h,b,D,O,j,f,x,H,N,T,A,C,E,y,I,F,w,S,P,B,_,L,M,V,G,k,R,W;if(!u()(t)&&p.g===e.title)return{headLine:null===(n=t[1])||void 0===n?void 0:n.headline,longText:null===(a=t[1])||void 0===a?void 0:a.longText,desktopImage:Object(m.nd)(null===(d=t[0])||void 0===d||null===(i=d.image)||void 0===i||null===(l=i.fields)||void 0===l||null===(s=l.file)||void 0===s?void 0:s.url,g.ADDHOPE_IMAGE_WIDTH_DESKTOP,g.ADDHOPE_IMAGE_HEIGHT_DESKTOP),mobileImage:Object(m.nd)(null===(c=t[0])||void 0===c||null===(r=c.mobileImage)||void 0===r||null===(v=r.fields)||void 0===v||null===(h=v.file)||void 0===h?void 0:h.url,g.ADDHOPE_IMAGE_WIDTH_MOBILE,g.ADDHOPE_IMAGE_HEIGHT_MOBILE),shortText:null===(b=t[1])||void 0===b?void 0:b.shortText,richText1:null===(D=t[1])||void 0===D||null===(O=D.richText)||void 0===O||null===(j=O.content[0])||void 0===j||null===(f=j.content[0])||void 0===f?void 0:f.value,richText2:null===(x=t[1])||void 0===x||null===(H=x.richText)||void 0===H||null===(N=H.content[1])||void 0===N||null===(T=N.content[0])||void 0===T?void 0:T.value,richText3:null===(A=t[1])||void 0===A||null===(C=A.richText)||void 0===C||null===(E=C.content[2])||void 0===E||null===(y=E.content[0])||void 0===y?void 0:y.value,bucketImage:Object(m.nd)(null===(I=t[2])||void 0===I||null===(F=I.image)||void 0===F||null===(w=F.fields)||void 0===w||null===(S=w.file)||void 0===S?void 0:S.url,g.BUCKET_IMAGE_WIDTH_DESKTOP,g.BUCKET_IMAGE_HEIGHT_DESKTOP),displayLine1:null===(P=t[2])||void 0===P?void 0:P.headline,displayLine2:null===(B=t[2])||void 0===B?void 0:B.subHeadline,addHopeFormHeadLine:t[3].headline,addHopeFormTitle:t[3].title,addHopeButton:t[3].formField[5].fields.buttonText,snapScanHeadline:t[4].headline,snapScanImage:Object(m.nd)(null===(_=t[4])||void 0===_||null===(L=_.image)||void 0===L||null===(M=L.fields)||void 0===M||null===(V=M.file)||void 0===V?void 0:V.url,g.SNAPSCAN_IMAGE_HEIGHT_DESKTOP,g.SNAPSCAN_IMAGE_WIDTH_DESKTOP),snapScanExternalURL:t[4].cta.fields.externalurl,donationOptions:null===(G=t[3].formField)||void 0===G||null===(k=G[3])||void 0===k?void 0:k.fields.values,defaultDonationValue:null===(R=t[3].formField)||void 0===R||null===(W=R[3])||void 0===W?void 0:W.fields.defaultValue}})(null===O||void 0===O||null===(e=O.addHope)||void 0===e||null===(o=e.items)||void 0===o||null===(t=o[0])||void 0===t?void 0:t.fields))}),[null===O||void 0===O?void 0:O.addHope,r]),Object(n.useEffect)((()=>{if(!u()(d.donationOptions)){const e=d.defaultDonationValue;T({donationChargeOption:d.donationOptions.map((o=>({values:o,displayNonPercentageAmount:o,isDefault:o===e,isSelected:o===e}))),showNonDonationPercentage:!0,showDonationsCustomFields:!0,addDonationBtnHandler:!0,inputFiledValidErrormsg:"",customAmount:"",buttonText:d.addHopeButton,donationRegexPattern:p.ob,isAddHopeFlow:!0,defaultTipSelected:!0})}}),[d.donationOptions]),Object(n.useEffect)((()=>{if(!u()(N)){const e=null===O||void 0===O?void 0:O.addHope;E({addHopeFormConfig:{fieldsConfig:f({AddHopeData:e,donationsButtonData:N,setDonationsButtonData:T,currencySymbol:H,tenantId:h,dispatch:l,currencyConversionFactor:b}),isFormValid:!1,onFormChangeHandler:x}})}}),[N.donationChargeOption]),Object(s.jsx)(a.a.Fragment,{children:Object(s.jsx)(c,{isMobile:o,segmentedAddHopeData:d,donationsButtonData:N,paymentData:D,addHopeDetails:A,updateAddHopeDetails:E})})};o.default=P}}]);