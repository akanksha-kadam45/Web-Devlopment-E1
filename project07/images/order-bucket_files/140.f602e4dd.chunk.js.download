(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[140],{1076:function(e,i,d){"use strict";d.r(i);var o=d(3),t=d(28),l=d(0),r=d(59),n=d(6),c=d(1108),a=d(210),s=d(4),v=d(15),u=d(5),O=d(265),b=d(2);var j=e=>{var i,d;const{orderDetails:j,updateSetOrderDetails:m}=e,{orderSummarySaveYourOrderCompleted:p,service:f,orderStatus:D,enableRetryCountForPickupOrderTracking:T,displayOrderId:S}=j,g=Object(t.c)((e=>e.tenantReducer)),h=null===g||void 0===g||null===(i=g.componentOptions)||void 0===i||null===(d=i.homePage)||void 0===d?void 0:d.enableGuestOrderTracking;return Object(o.useEffect)((()=>{var e;h&&null!==j&&void 0!==j&&j.status&&(null===j||void 0===j?void 0:j.status)!==(null===l.Rd||void 0===l.Rd||null===(e=l.Rd.SENT_TO_POS_FAILED)||void 0===e?void 0:e.toLowerCase())&&Object(c.r)(j)}),[j]),Object(o.useEffect)((()=>{Object(u.qe)(f)&&(Object(u.le)()?m({orderSummaryInfoDetailsShowInAccordion:!0,pickupClosingSoonModal:!0}):m({orderSummaryInfoDetailsShowInAccordion:Object(u.Jd)(f)}))}),[f]),Object(o.useEffect)((()=>{Object(u.qe)(D)&&m({orderSummaryInfoDetailsOpenAccordion:T?Object(c.b)(j):!Object(O.Q)(j)})}),[D,S]),Object(o.useEffect)((()=>{p&&!Object(u.le)()&&(r.b.dark(Object(b.jsx)("div",{className:"img-text-div",children:Object(b.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(b.jsx)("img",{src:null===v.a||void 0===v.a?void 0:v.a.SaveNotifyTick,alt:"tick",className:"TickImg"}),Object(n.translateWithI18Next)(null===s.a||void 0===s.a?void 0:s.a.SAVED_THIS_ORDER_IN_MY_FAVORITE_MENU)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:r.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{r.b.dismiss()}),4e3))}),[p]),(e=>Object(b.jsx)(a.a,{...e,testId:"order_summary_view",importPath:"ORDER_SUMMARY_VIEW"}))(e)},m=d(1111),p=d(1326),f=d(132),D=d(74),T=d(20),S=d.n(T),g=d(73),h=d(12),E=d(399);i.default=e=>{var i,d,r,n,a,s,v,O,T,k,y,w,R,A,I;const C=Object(t.b)(),[_,N]=Object(o.useState)(c.o),[L,P]=Object(o.useState)(null),x=null!==(i=Object(f.b)(D.c))&&void 0!==i?i:{},{postOrderReducer:U,tenantReducer:F,storesReducer:M,profileReducer:B}=Object(t.c)((e=>e)),G=null===F||void 0===F?void 0:F.shouldCalculateEstimatedDeliveryTime,J=null===F||void 0===F?void 0:F.isUberServiceableEnabled,V=null===B||void 0===B?void 0:B.savedAddresses,Y=null===(d=new URLSearchParams(window.location.search))||void 0===d?void 0:d.get("orderId"),q=(null===(r=new URLSearchParams(window.location.search))||void 0===r?void 0:r.get("email"))||(null===(n=new URLSearchParams(window.location.search))||void 0===n?void 0:n.get("PhoneNo")),W=null===(a=window)||void 0===a||null===(s=a.location)||void 0===s||null===(v=s.pathname)||void 0===v?void 0:v.includes("order-tracking"),H=null===F||void 0===F?void 0:F.pastOrderTimeFormat,Q=()=>{var e,i,d;const{googleDistanceData:o}=M,t=null===o||void 0===o||null===(e=o[0])||void 0===e||null===(i=e.distance)||void 0===i||null===(d=i.duration)||void 0===d?void 0:d.value;if(t){const e=Object(h.i)(t,H);P(e)}};Object(o.useEffect)((()=>{W&&Y&&q&&z({orderTrackingID:Y,orderTrackingEmail:q,disableTrackingFields:!0})}),[W,q,Y]);const z=Object(o.useCallback)((e=>{N&&N((i=>({...i,...e})))}),[]);Object(o.useEffect)((()=>{var e;!S()(null===x||void 0===x?void 0:x.orderTracking)&&Object(c.p)(null===x||void 0===x?void 0:x.orderTracking,_,z,J&&Object(E.e)(null===_||void 0===_||null===(e=_.deliveryDetails)||void 0===e?void 0:e.partnerName))}),[null===_||void 0===_?void 0:_.orderStatus,null===x||void 0===x?void 0:x.orderTracking]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.orderSummarycontentData)&&Object(c.j)(_)}),[null===_||void 0===_?void 0:_.orderSummarycontentData]);const K=()=>Object(m.n)({dispatch:C,beforeUnload:!0,orderDetails:_});return Object(o.useEffect)((()=>(window.scrollTo(0,0),window.removeEventListener(l.v,K,!0),window.addEventListener(l.v,K,!0),Object(m.f)(C),Object(m.d)(C),()=>{localStorage.removeItem(l.gd.FROM_ORDERTRACING_BUTTON),window.removeEventListener(l.v,K,!0),Object(m.n)({dispatch:C,orderDetails:_})})),[]),Object(o.useEffect)((()=>(Object(m.k)({dispatch:C,orderDetails:_,updateSetOrderDetails:z,tenantReducer:F}),()=>{(null===_||void 0===_?void 0:_.dispatchDeliveryOrderTrackerTimer)&&clearTimeout(null===_||void 0===_?void 0:_.dispatchDeliveryOrderTrackerTimer)})),[null===_||void 0===_?void 0:_.retryCountForGetOrderTrackingStatus]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.pickupCancelOrder)&&Object(m.g)({dispatch:C,orderDetails:_,updateSetOrderDetails:z})}),[null===_||void 0===_?void 0:_.pickupCancelOrder]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.isPickupOrderUserConfirmedToCheckIn)&&Object(m.h)({dispatch:C,orderDetails:_,updateSetOrderDetails:z})}),[null===_||void 0===_?void 0:_.isPickupOrderUserConfirmedToCheckIn]),Object(o.useEffect)((()=>{var e,i,d,o,t,l,r,n,c,a,s,v,O,b,j,m,p;if(!G||null===U||void 0===U||null===(e=U.orderAccepted)||void 0===e||null===(i=e.deliveryAddress)||void 0===i||!i.location||null===U||void 0===U||null===(d=U.orderAccepted)||void 0===d||null===(o=d.deliveryDetails)||void 0===o||!o.riderLocation||null===U||void 0===U||!U.orderAccepted)return;const f={destination:["".concat(null===U||void 0===U||null===(t=U.orderAccepted)||void 0===t||null===(l=t.deliveryAddress)||void 0===l||null===(r=l.location)||void 0===r?void 0:r.latitude,",").concat(null===U||void 0===U||null===(n=U.orderAccepted)||void 0===n||null===(c=n.deliveryAddress)||void 0===c||null===(a=c.location)||void 0===a?void 0:a.longitude)],origin:["".concat(null===U||void 0===U||null===(s=U.orderAccepted)||void 0===s||null===(v=s.deliveryDetails)||void 0===v||null===(O=v.riderLocation)||void 0===O?void 0:O.latitude,",").concat(null===U||void 0===U||null===(b=U.orderAccepted)||void 0===b||null===(j=b.deliveryDetails)||void 0===j||null===(m=j.riderLocation)||void 0===m?void 0:m.longitude)],store:[""],googleConfig:Object(u.dc)(),distanceMetrics:null===F||void 0===F||null===(p=F.storeSearch)||void 0===p?void 0:p.distanceMetrics,setStatusFlag:!0,successCallback:Q};C(Object(g.g)(f))}),[null===U||void 0===U||null===(O=U.orderAccepted)||void 0===O||null===(T=O.deliveryDetails)||void 0===T?void 0:T.deliveryStatus,null===U||void 0===U||null===(k=U.orderAccepted)||void 0===k||null===(y=k.deliveryDetails)||void 0===y||null===(w=y.riderLocation)||void 0===w?void 0:w.latitude,null===U||void 0===U||null===(R=U.orderAccepted)||void 0===R||null===(A=R.deliveryDetails)||void 0===A||null===(I=A.riderLocation)||void 0===I?void 0:I.longitude,G]),Object(b.jsx)(p.a,{...e,orderDetails:_,updateSetOrderDetails:z,children:Object(b.jsx)(j,{...e,orderDetails:_,updateSetOrderDetails:z,arrivalTime:L,showDeliveryEstimatedTime:G,savedAddresses:V,pastOrderTimeFormat:H})})}}}]);