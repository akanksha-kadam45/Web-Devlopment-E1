(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[94],{1147:function(e,t,d){"use strict";var s=d(3),o=d.n(s),l=d(41),a=d(46),r=d(15),i=d(28),n=d(0),c=d(2);const{Error:u}=r.a,v=e=>{const{show:t,errorObj:d,isInProgress:s,comingFrom:r}=e,{firstBtnCTA:v,secondBtnCTA:O,firstBtnText:b,secondBtnText:h,errMsg:j,firstBtnClassName:p=""}=d,m=Object(i.c)((e=>{var t;return null!==(t=(e=>{var t;return null===(t=e.LoaderReducer)||void 0===t?void 0:t.isLoading})(e))&&void 0!==t?t:s}));return Object(c.jsx)(o.a.Fragment,{children:!m&&(t?Object(c.jsx)("div",{className:"err-container",children:Object(c.jsxs)("div",{"data-testid":"search-error-container",className:"alert-location-popup",children:[Object(c.jsx)(a.a,{srcFile:u,className:"location-alert-icon"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"location-error-message",children:j}),Object(c.jsxs)("div",{className:"location-error-button-section",children:[r!==n.a&&v&&Object(c.jsx)(l.a,{"data-testid":"first-btn-click",className:"button whiteButton blackBorder location-warning-button ".concat(p),onClickHandler:e=>v(e),children:b}),O&&Object(c.jsx)(l.a,{"data-testid":"second-btn-click",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>O(e),children:h})]})]})]})}):null)})};v.defaultProps={comingFrom:""};const O=o.a.memo(v);t.a=O},1172:function(e,t,d){"use strict";d.d(t,"a",(function(){return T}));var s=d(3),o=d.n(s),l=d(6),a=d(329),r=d.n(a),i=d(46),n=d(43),c=d(5),u=d(15),v=d(269),O=d(2);const{GoogleMapLocationImage:b,SuggestionItemSearchPin:h,clearTextIcon:j,Time_Clock:p}=u.a,{SUUGESTED_ITEMS_TEXT:m,ALLOWED_SUGGESTION_LIST:S,SUGGESTION_ACTIVE_COLOR:E,SUGGESTION_ACTIVE_OPACITY:g,BRAND_BLACK:x}=n.a,f=e=>{const{currentMarket:t,placeholder:d,storeSelection:s={},address:a,inputOnChange:n,handleSelectAddress:u,onSearchError:S,locationAlert:E,negativeScenarioAlert:g,inputRef:x,keyPress:f,onClearTextHandler:T,showAutoSuggestion:N,alreadySearched:y,setSuggestedAddress:D,filteredTypes:C,maxLength:I,filterConditions:_,isAddressNotChangable:A}=e,{placesSearchInput:R=!0}=s;return Object(O.jsx)("div",{className:"search-delivery-address",children:Object(O.jsx)("div",{className:"input-delivery-address",children:Object(O.jsx)(r.a,{value:a,onChange:n,onSelect:u,searchOptions:{componentRestrictions:{country:t},types:C},shouldFetchSuggestions:!0,onError:S,children:e=>{let{getInputProps:t,suggestions:s,getSuggestionItemProps:r,loading:n}=e;return Object(O.jsx)("div",{children:R&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.a,{"data-testid":"",srcFile:b,alt:" ",className:"google-location-img"}),Object(O.jsx)("input",{"data-testid":"store-search-input","aria-label":"Enter your delivery address",maxLength:I,className:"".concat(Object(c.ad)(Object(c.qd)(E,g),"store-search-input error-border mt-2","store-search-input mt-2")),...t({placeholder:d,ref:x}),onKeyUp:f,disabled:A}),a&&!A&&Object(O.jsx)("img",{src:j,alt:"clear-text-btn","data-testid":"clear-text-btn",className:"clearTextIcon",onClick:T}),Object(c.hb)(Object(c.pc)(s),N)?Object(O.jsx)("div",{className:"suggestion-list",children:Object(v.d)(s,_).map(((e,t)=>(null===D||void 0===D||D(s),Object(O.jsxs)(o.a.Fragment,{children:[0===t&&Object(O.jsx)("div",{className:"suggestion-items suggest-text",children:Object(l.translateWithI18Next)(m)}),Object(O.jsx)("div",{className:"suggestion-item-container",children:Object(O.jsx)("div",{...r(e,{className:"suggestion-items"}),children:Object(O.jsxs)("div",{className:"suggested-address-alignment-delivery",children:[Object(O.jsx)("div",{children:Object(O.jsx)(i.a,{"data-testid":"",srcFile:Object(c.ad)(y(e.description),p,h),alt:"googleMapLocation",className:"suggetion-pin"})}),Object(O.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]},null===e||void 0===e?void 0:e.id))))}):null]})})}})})})},T=o.a.memo(f)},1185:function(e,t,d){"use strict";d.d(t,"a",(function(){return E})),d.d(t,"b",(function(){return g}));var s=d(4),o=d(0),l=d(267);const{AUTO_SUGGESTIONS_DELIVERY_FILTER:a}=l.b,{DELIVERY:r}=o.Jb||{},{DELIVERY_PLACEHOLDER:i,SELECT_KFC_TITLE:n,DELIVERY_ADDRESS_TITLE:c,SWITCH_TO_TAKEAWAY_TEXT:u,RETRY_BTN_TEXT:v,DELIVERY_UNAVAILABLE_ERROR:O,STORE_CLOSE_ERROR_DELIVERY:b,SAVED_ADDRESS:h,DELIVER_TO_YOU:j,ORDER_MODE:p,SELECT_STORE_TEXT:m,START_ORDER:S}=s.a,E="FORM",g={["".concat(r,"_").concat(E)]:{placeholder:i,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:b,modalHeaderTitle:c,kfcStoresCountText:h,scheduleOrderScreenTitle:p,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:m,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:S,filteredTypes:a},["".concat(r,"_").concat("STORES")]:{serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},modalHeaderTitle:n,orderModeScreenErrorText:b,placeholder:i,kfcStoresCountText:j,scheduleOrderScreenTitle:p,shouldPopulateFirstSuggestion:!0,storeOpenBtnText:m,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:S,filteredTypes:a},["".concat(r,"_").concat("SAVED")]:{placeholder:i,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:b,modalHeaderTitle:c,kfcStoresCountText:h,scheduleOrderScreenTitle:p,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:m,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:S,filteredTypes:a}}},1186:function(e,t,d){"use strict";var s=d(3),o=d.n(s),l=d(28),a=d(41),r=d(6),i=d(4),n=d(394),c=d(85),u=d(43),v=d(80),O=d(132),b=d(2);const{SAVED_ADDRESS:h,START_ORDER:j,SAVED_ADDRESSES:p}=i.a,{SAVED_ADDRESS_LIMIT:m}=u.a,S=e=>{var t;const d=Object(O.a)(),{handleSelectAddress:o,savedAddresses:i=[],show:u,scheduleOrderDateFormat:S}=e,E=Object(l.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),g=null===E||void 0===E||null===(t=E.savedAddressPage)||void 0===t?void 0:t.showPrefectureAddAddressScreen,{userOrderStateDispatch:x}=Object(s.useContext)(c.a),f=null===i||void 0===i?void 0:i.sort(((e,t)=>(null===t||void 0===t?void 0:t.isPrimary)-(null===e||void 0===e?void 0:e.isPrimary))).slice(0,m),T=(null===i||void 0===i?void 0:i.length)>1?Object(r.translateWithI18Next)(p):Object(r.translateWithI18Next)(h),N=(null===i||void 0===i?void 0:i.length)>m?m:i.length;return u&&Object(b.jsxs)("div",{"data-testid":"saved-address-container",children:[Object(b.jsx)("div",{className:"savedAddress-store-count",children:Object(b.jsx)("span",{className:"saved-address-count-title",children:"".concat(T," (").concat(N,")")})}),null===f||void 0===f?void 0:f.map(((e,t)=>{var s,l;return Object(b.jsx)("div",{className:"savedAddress-module-card",children:Object(b.jsxs)("div",{className:"inside-card",children:[Object(b.jsxs)("div",{className:"address-section",children:[Object(b.jsxs)("div",{className:"address-type",children:[null===e||void 0===e?void 0:e.name,": "]}),g&&Object(b.jsx)("div",{className:"address",children:(null===e||void 0===e?void 0:e.addressLines)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e||null===(s=e.addressLines)||void 0===s||null===(l=s.filter(Boolean))||void 0===l?void 0:l.join(" ")," "]})}),!g&&Object(b.jsxs)("div",{className:"address",children:[(null===e||void 0===e?void 0:e.addressLines[0])&&Object(b.jsxs)("span",{children:[" ",Object(n.F)(null===e||void 0===e?void 0:e.addressLines[0]),", "]}),(null===e||void 0===e?void 0:e.addressLines[1])&&Object(b.jsxs)("span",{children:[" ",Object(n.F)(null===e||void 0===e?void 0:e.addressLines[1]),", "]}),(null===e||void 0===e?void 0:e.city)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.city,", "]}),(null===e||void 0===e?void 0:e.state)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.state," - "]}),(null===e||void 0===e?void 0:e.pinCode)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.pinCode,", "]}),(null===e||void 0===e?void 0:e.country)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.country," "]})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)(a.a,{className:"button redButton search-store-card-btn",onClickHandler:()=>Object(n.U)(e,x,o,d,v.d,S),"data-testid":"saved-start-order-click-test",children:Object(r.translateWithI18Next)(j)})})]})},"".concat(null===e||void 0===e?void 0:e.name,"-").concat(t))}))]})||null},E=o.a.memo(S);t.a=E},968:function(e,t,d){"use strict";d.r(t),d.d(t,"addressTitle",(function(){return ue})),d.d(t,"DeliveryAddressSearchFormModule",(function(){return ve}));var s=d(3),o=d.n(s),l=d(28),a=d(267),r=d(0),i=d(85),n=d(16),c=d(6),u=d(331),v=d(1185),O=d(73),b=d(66),h=d(5),j=d(415),p=d(399);const m=e=>{let{localizationData:t={},address:d={}}=e;const{chome:s="",cityTown:o="",postalCode:l="",prefecture:a=""}=d;return{chome:null===s||void 0===s?void 0:s.replace(/\s+/g,""),cityTown:o,localizationData:t,postalCode:null===l||void 0===l?void 0:l.replace("-",""),prefecture:null===a||void 0===a?void 0:a.replace(/\s+/g,"")}},S=e=>{let{chome:t="",cityTown:d="",localizationData:s={},prefecture:o=""}=e;const{[o]:{[d]:l}={}}=s;return(Object(h.mf)(l)||{})[t]},E=e=>{let{chome:t="",localizationData:d={},postalCode:s=""}=e;const{[s]:o={}}=d;return Object(h.mf)(o)[t]};var g=d(17),x=d(269),f=d(328),T=d(20),N=d.n(T),y=d(63),D=d(4),C=d(2);const I=e=>{const{loggedIn:t=!1,formContent:d={},storeSelection:s}=e,{signInLink:o}=s,{memberText:l="",singInLink:a={}}=d;return Object(C.jsx)("div",{className:"login-section",children:o&&Object(C.jsx)("span",{className:"delivery-member-signin",children:!t&&Object(p.g)(l,p.h,a)})})},_=o.a.memo(I);var A=d(1147);const R=e=>{const{defaultSelectedTabIndex:t,onTabSelection:d,tabsList:o}=e,[l,a]=Object(s.useState)(t);return Object(C.jsx)("div",{className:"toggle-tabs",children:o.map(((e,t)=>Object(C.jsx)("div",{className:"toggle-tabs-container",children:Object(C.jsx)("button",{className:"toggle-tabs-button ".concat(t===l?"selected":""),"aria-pressed":t===l,onClick:()=>(e=>{e!==l&&(a(e),d(e))})(t),children:Object(C.jsx)("span",{className:"toggle-tabs-button-text",children:Object(c.translateWithI18Next)(e.title)})})},e.id)))})};R.defaultProps={defaultSelectedTabIndex:0,onTabSelection:()=>null,tabsList:[]};var L=R,w=d(15);const{SearchIconGrey:P,SingleArrow:k,WhiteCloseButton:F}=w.a,B=e=>{const{cssClass:t,dropdownId:d,dropdownList:o,dropdownTitleText:l,enableSearch:r,onDropdownSelection:i,selectedText:n}=e,[u,v]=Object(s.useState)(o),[O,b]=Object(s.useState)(!1),[h,j]=Object(s.useState)(!1),[p,m]=Object(s.useState)(""),S=Object(s.useRef)(),E=Object(s.useCallback)((e=>{e&&e.focus()}),[]);Object(s.useEffect)((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const g=e=>{var t;null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation();const d=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"";m(d),(e=>{const t=e.toLowerCase();let d=o;t&&(d=null===o||void 0===o?void 0:o.filter((e=>-1!==e.toLowerCase().indexOf(t)))),v(d)})(d)},x=e=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),m(""),v(o)},f=e=>{j(e)},T=()=>{b(!O),x()};return Object(C.jsxs)("div",{className:"searchable-dropdown ".concat(t),ref:S,children:[l&&Object(C.jsx)("div",{className:"searchable-dropdown-title","aria-level":"1",role:"heading",children:n!==l||O?l:""}),Object(C.jsxs)("div",{id:d,className:"searchable-dropdown-value","data-testid":"searchable-dropdown-value-id",role:"listbox",tabIndex:"0",onClick:T,children:[Object(C.jsx)("div",{className:"selected-value",children:n===l&&O?"":n}),Object(C.jsx)("img",{src:k,alt:" ",className:"down-arrow-img ".concat(O?"dropdown-open":"")})]}),O&&Object(C.jsxs)("div",{className:"searchable-dropdown-options-container",children:[r&&Object(C.jsx)("div",{className:"searchable-dropdown-form-container",children:Object(C.jsxs)("form",{className:"searchable-dropdown-form",children:[Object(C.jsx)("img",{src:P,alt:" ",className:"search-icon"}),Object(C.jsx)("input",{className:"searchable-dropdown-input","data-testid":"searchable-dropdown-search-input",type:"text",ref:E,placeholder:Object(c.translateWithI18Next)(a.b.SEARCH),value:p,onChange:e=>g(e),onKeyDown:e=>(e=>{var t;"Enter"===e.key||13===e.keyCode?(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||null===(t=e.target)||void 0===t||t.blur()):"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),T())})(e),onFocus:()=>f(!0),onBlur:()=>f(!1)}),(h||p)&&Object(C.jsx)("button",{className:"clear-text","data-testid":"searchable-dropdown-clear-text",onClick:e=>x(e),children:Object(C.jsx)("img",{src:F,alt:" ",className:"search-icon"})})]})}),Object(C.jsx)("ul",{children:null===u||void 0===u?void 0:u.map((e=>Object(C.jsx)("li",{tabIndex:"0",onClick:t=>((e,t)=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),b(!O),i(t),x()})(t,e),className:"searchable-dropdown-option","data-testid":"searchable-dropdown-option-id",children:e},e)))})]})]})};B.defaultProps={cssClass:"",dropdownId:"",dropdownList:[],dropdownTitleText:"",enableSearch:!1,onDropdownSelection:()=>null,selectedText:""};var M=B,H=d(1172);const W=e=>{const{defaultPostalValue:t,verifyPostalCode:d}=e,[o,l]=Object(s.useState)(t),r=Object(s.useRef)(null);Object(s.useEffect)((()=>{t&&l(t)}),[t]),Object(s.useEffect)((()=>{var e;null===r||void 0===r||null===(e=r.current)||void 0===e||e.focus()}),[]);return Object(C.jsx)("div",{className:"delivery-address-section search-store-postal-content",children:Object(C.jsx)(H.a,{maxLength:8,onClearTextHandler:()=>{d(!1,""),l("")},placeholder:Object(c.translateWithI18Next)(a.b.SEARCH),address:o,inputOnChange:e=>{let t=e.replace(/[^\d ]+/g,"");t=t.length>3?t.replace(/(.{3})/,"$1-"):t;const s=t.length>=8;l(t),d(s,t)},inputRef:r})})};W.defaultProps={defaultPostalValue:"",verifyPostalCode:()=>null};var U=W,V=d(122),Y=d(46),G=d(41),z=d(1186),K=d(80),J=d(132);const{DISPOSITION_METHOD:X}=n.a,{CONFIRM_LOCATION:q,DELIVERY_SEARCH_TYPE:$,NO_STORE_WITH_DELIVERY:Q,OTHER_DELIVERY_SERVICES:Z,SEARCH_DELIVERY_LOCATION:ee,SPECIAL_NOTES:te,STORES_VARY_MESSAGE:de,SWITCH_TO_TAKE_AWAY:se,POSTAL_CODES:oe,PREFECTURES:le}=a.b;var ae=e=>{var t;const{changeFlow:d,deliveryLocalizationData:o,formContent:n,getStoreData:u,deliverySearchType:v,onDeliveryTypeChanged:T,isDeliveryLocalizationLoading:I,storesStatusError:R,saveAddressData:w,selectedAddress:P,setSelectedAddress:k,prefectureAddressScreen:F,addressName:B,isPrimaryAddress:H,closeModal:W,modalType:te,address:ae,isAccount:re,addressNameExist:ie=!1,updateSetOrderDetails:ne,isAddressFromOrderProcessing:ce}=e,ue=F?r.a:"",ve=Object(l.c)((e=>e.appStateReducer.userStatus)),{postalCodePrefix:Oe,tenantId:be="",scheduleOrderDateFormat:he,fieldAddressMaxLengthFlag:je}=Object(l.c)((e=>e.tenantReducer||{})),{headerData:{footer:pe={}}={}}=Object(l.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),me=Object(h.Yb)(pe),{loggedIn:Se}=Object(h.sd)(ve),{userOrderState:Ee,userOrderStateDispatch:ge}=Object(s.useContext)(i.a),xe=Object(l.b)(),[fe,Te]=Object(s.useState)(!1),[Ne,ye]=Object(s.useState)(0),[De,Ce]=Object(s.useState)(!1),[Ie,_e]=Object(s.useState)(!1),[Ae,Re]=Object(s.useState)(0),[Le,we]=Object(s.useState)(P),Pe=Object(p.c)(),ke=null===v||void 0===v?void 0:v.id,Fe=null!==ae&&void 0!==ae&&ae.pinCode?null===a.b||void 0===a.b?void 0:a.b.POSTAL_CODE:null===a.b||void 0===a.b?void 0:a.b.ADDRESS,Be=ae?Fe:null===a.b||void 0===a.b?void 0:a.b.POSTAL_CODE,Me=Math.max(0,Pe.findIndex((e=>e.id===Be))),[He,We]=Object(s.useState)(!1),Ue=Object(p.d)(),[Ve,Ye]=Object(s.useState)(!0),[Ge,ze]=Object(s.useState)({}),[Ke,Je]=Object(s.useState)(!1),Xe=Object(l.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t?void 0:t.isLoading)||!1})),qe=Object(l.c)((e=>{var t,d;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t||null===(d=t.response)||void 0===d?void 0:d.deliveryAggregators)||{}})),{savedAddresses:$e}=Object(l.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),Qe=!(null===$e||void 0===$e||!$e.length||!Se),Ze=Object(l.c)((e=>{var t,d;return null===e||void 0===e||null===(t=e.pwaStoragsReducer)||void 0===t||null===(d=t.pwaStorageState)||void 0===d?void 0:d.selectedFavouriteStoreAddress})),et={text:Q,cta:{label:se}},tt={header:Z,notice:de},dt=Object(J.a)();Object(s.useEffect)((()=>{var e;(Ae===(null===v||void 0===v||null===(e=v.fieldOrder)||void 0===e?void 0:e.length)||te)&&_e(!0)}),[v,Ie,Ae,te]),Object(s.useEffect)((()=>{N()(qe)&&!Xe&&xe(Object(f.d)())}),[qe,xe,Xe]),Object(s.useEffect)((()=>{var e;const t=d?JSON.parse(localStorage.getItem(r.gd.SELECTED_ADDRESS)):{},s=(null===Ee||void 0===Ee||null===(e=Ee.scheduleOrderData)||void 0===e?void 0:e.selectedAddress)||t;var o,l;s&&Object.keys(s).length>0&&(k(s),Re(null===v||void 0===v||null===(o=v.fieldOrder)||void 0===o?void 0:o.length),ye(null===v||void 0===v||null===(l=v.fieldOrder)||void 0===l?void 0:l.length))}),[Le]),Object(s.useEffect)((()=>{ke===g.d.address&&We(!(!(Ve&&P.prefecture&&P.cityTown&&P.chome&&P.streetDetailAddress)||ie)),ke===g.d.postalCode&&We(!(!(Ve&&P.postalCode&&P.chome&&P.streetDetailAddress)||ie))}),[ke,Ve,P.postalCode,P.prefecture,P.cityTown,P.chome,P.streetDetailAddress,We,ie]);Object(s.useEffect)((()=>{const e=ke===g.d.postalCode?oe:le,t=o[e];if(!I&&!N()(t)&&Object.keys(t).length>0){var d;const e=ke===g.d.postalCode?g.d.postalCode:g.d.prefecture,o=null===Ee||void 0===Ee||null===(d=Ee.scheduleOrderData)||void 0===d?void 0:d.storeId,a={[e]:t};let r={};if(null!==P&&void 0!==P&&P[e]&&(o||te)){r={...a};const e=(null===v||void 0===v?void 0:v.fieldOrder)||[];for(let t=1;t<e.length+1;t++){var s,l;const d=(null===(s=e[t])||void 0===s?void 0:s.id)||g.d.selectedStore,o=null===(l=e[t-1])||void 0===l?void 0:l.id,a=P[o].replace("-","");o&&a&&r[o]&&(r[d]=r[o][a])}}ze({...r,...Ge,...a})}te&&(dt(Object(K.d)({key:null===r.gd||void 0===r.gd?void 0:r.gd.SELECTED_ADDRESS,value:P})),we(P))}),[o,te]);const st=e=>{let{localizationData:t={},selectedAddress:d={}}=e;const{postalCode:s}=d,o=Boolean(s),l=o?E:S;return Object(j.a)(l,m)({address:d,localizationData:t[o?oe:le]})},ot=Object(s.useCallback)((async()=>{dt(Object(K.d)({key:null===r.gd||void 0===r.gd?void 0:r.gd.SELECTED_ADDRESS,value:P}));const e=Ge[g.d.selectedStore]||st({localizationData:o,selectedAddress:P});if(F&&re||ce){ce&&ne({savedAddressSucess:!0});const t=((e,t)=>{const{CITY_CODE:d,CHOME_CODE:s}=a.b,o=B||Object(p.b)($e);return{postalCode:null===e||void 0===e?void 0:e.postalCode,addressName:o,isPrimary:H,addressLines:[null===e||void 0===e?void 0:e.prefecture,null===e||void 0===e?void 0:e.cityTown,null===e||void 0===e?void 0:e.chome,null===e||void 0===e?void 0:e.streetDetailAddress,null===e||void 0===e?void 0:e.apartmentName,null===e||void 0===e?void 0:e.roomNumber,null===e||void 0===e?void 0:e.companyName,null===e||void 0===e?void 0:e.specialNote],customProperties:[{key:d,value:null===t||void 0===t?void 0:t[2].toString()},{key:s,value:null===t||void 0===t?void 0:t[1].toString()}]}})(P,e),{customerId:d,phoneNumber:s}=y.a.getInstance(),o=te?{addressId:null===ae||void 0===ae?void 0:ae.id,...t}:t;xe(Object(b.a)({customerId:d,phoneNumber:s,tenantId:be,data:o}));const l=te?Object(c.translateWithI18Next)(D.a.ADDRESS_UPDATED):Object(c.translateWithI18Next)(D.a.SAVED_DELIVERY_ADDRESS);Object(h.Cf)(l,"","favorites-added-toast"),ne&&ne({isOpenSaveDeliveryAddressModal:!1}),!ne&&W()}else{let t="";ke===g.d.postalCode&&(t+="".concat(Oe).concat(null===P||void 0===P?void 0:P.postalCode)),t+="".concat(null===P||void 0===P?void 0:P.prefecture).concat(null===P||void 0===P?void 0:P.cityTown),t+="".concat(null===P||void 0===P?void 0:P.chome).concat(null===P||void 0===P?void 0:P.streetDetailAddress);const d="".concat(null===P||void 0===P?void 0:P.apartmentName," ").concat(null===P||void 0===P?void 0:P.roomNumber," ").concat(null===P||void 0===P?void 0:P.companyName);Object(x.e)(t);const s=Ge[g.d.selectedStore]||e;s?(w(t,d,s),u(s)):Ye(!1)}}),[Ge,P,H,B]);Object(s.useEffect)((()=>{fe&&ot()}),[ot,fe]),Object(s.useEffect)((()=>{Ye(!R)}),[R]),Object(s.useEffect)((()=>{if(te){var e,t,d,s,o,l,a,r;const i=(null===ae||void 0===ae?void 0:ae.pinCode)||"",n=(null===ae||void 0===ae||null===(e=ae.addressLines)||void 0===e?void 0:e[0])||"",c=(null===ae||void 0===ae||null===(t=ae.addressLines)||void 0===t?void 0:t[1])||"",u=(null===ae||void 0===ae||null===(d=ae.addressLines)||void 0===d?void 0:d[2])||"",v=(null===ae||void 0===ae||null===(s=ae.addressLines)||void 0===s?void 0:s[3])||"",O=(null===ae||void 0===ae||null===(o=ae.addressLines)||void 0===o?void 0:o[4])||"",b=(null===ae||void 0===ae||null===(l=ae.addressLines)||void 0===l?void 0:l[5])||"",h=(null===ae||void 0===ae||null===(a=ae.addressLines)||void 0===a?void 0:a[6])||"",j=(null===ae||void 0===ae||null===(r=ae.addressLines)||void 0===r?void 0:r[7])||"";k({...P,apartmentName:O,chome:u,cityTown:c,companyName:h,postalCode:i,prefecture:n,roomNumber:b,streetDetailAddress:v,specialNote:j})}}),[te]);const lt=(e,t,d,s)=>{const l=(e=>e<=1&&ke===g.d.address?Boolean(P[g.d.postalCode]):e<=1&&ke===g.d.postalCode&&Boolean(P[g.d.prefecture]))(d)?{...p.f}:{...P};if(l[t]=e,l[$]=ke,Je(!1),Re(d),ye(d),d<v.fieldOrder.length)for(let o=d;o<v.fieldOrder.length;o++){l[v.fieldOrder[o].id]=""}if(Ye(!0),e){var a,r;const s=(null===(a=v.fieldOrder[d])||void 0===a?void 0:a.id)||g.d.selectedStore,i=e.replace("-",""),n=ke===g.d.postalCode?oe:le,c=o[n],u=Object.keys(Ge).length?null===Ge||void 0===Ge||null===(r=Ge[t])||void 0===r?void 0:r[i]:null===c||void 0===c?void 0:c[i];ze({...Ge,[s]:u}),d===v.fieldOrder.length&&ke===g.d.postalCode&&u.length>4&&(l[g.d.prefecture]=u[3]||P.prefecture,l[g.d.cityTown]=u[4]||P.cityTown),u||Ye(!1)}!s&&k({...P,...l})},at=()=>Object(C.jsx)("div",{className:"text-field-container",children:Ue.map((function(e){return Object(C.jsx)(V.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:e.id,placeholder:Object(c.translateWithI18Next)(e.title)||e.title,value:P[e.id],onChange:t=>((e,t)=>{const d=e.target.value,s={...P};s[t]=d,k({...P,...s})})(t,e.id),maxLength:je?e.maxLegth:255},e.id)}))}),rt=(e,t)=>{const d=e;Ce(d),d?lt(t,g.d.postalCode,1):lt("",g.d.chome,0)},it=Object(s.useCallback)((e=>{null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]);return Object(C.jsxs)("div",{className:"delivery-address-form delivery-module-form","data-testid":"delivery-container",children:[Object(C.jsxs)("div",{className:"delivery-address-form-header",children:[Object(C.jsx)(_,{loggedIn:Se,formContent:n,storeSelection:{signInLink:!0,useMyLocation:!1}}),Object(C.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(ee)||ee}),Object(C.jsx)(L,{onTabSelection:e=>{const t=Pe[e],d=t.id===P.deliverySearchType;T(t),Re(0),Ce(Boolean(P[g.d.postalCode])),_e(!1),Ye(!0),Je(!d),d&&P[t.fieldOrder[0].id]&&Re(Ne)},tabsList:Pe,defaultSelectedTabIndex:Me})]}),ke===g.d.address?(()=>{const e=Ae+(Ie?2:0);return Object(C.jsxs)("div",{className:"address-search-form",children:[v.fieldOrder.map((function(t,d){if(d<=e){var s;const e=null===(s=v.fieldOrder[d])||void 0===s?void 0:s.id,o=Ge[e];if(!o)return null;const l=Object.keys(o),a=!Ke&&(null===P||void 0===P?void 0:P[t.id]);return Object(C.jsx)(M,{dropdownList:l,dropdownTitleText:Object(c.translateWithI18Next)(t.title)||t.title,enableSearch:!0,onDropdownSelection:e=>lt(e,t.id,d+1),selectedText:a?null===P||void 0===P?void 0:P[t.id]:Object(c.translateWithI18Next)(t.title)},t.id)}return null})),Ie&&at()]})})():(()=>{const e=Object.keys(Ge[g.d.chome]||[]).sort(),t=e.length>0;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U,{defaultPostalValue:null===P||void 0===P?void 0:P[g.d.postalCode],verifyPostalCode:rt}),t&&(De||Ie)&&Object(C.jsx)("div",{className:"address-search-form",children:Object(C.jsx)(M,{dropdownList:e,dropdownTitleText:Object(c.translateWithI18Next)(v.fieldOrder[1].title)||v.fieldOrder[1].title,enableSearch:!0,onDropdownSelection:e=>lt(e,v.fieldOrder[1].id,2),selectedText:(null===P||void 0===P?void 0:P[v.fieldOrder[1].id])||Object(c.translateWithI18Next)(v.fieldOrder[1].title)},v.fieldOrder[1].id)}),t&&Ie&&at()]})})(),Object(C.jsx)(G.c,{className:"delivery-address-form-confirm-cta ".concat(He?"":"disabled"),disabled:!He,onClick:ot,variant:"secondary","data-testid":"delivery-address-form-confirm-cta",children:Object(C.jsx)("span",{children:Object(c.translateWithI18Next)(q)||q})}),Ve?"":Object(C.jsxs)("div",{className:"undeliverable-address",ref:it,children:[Object(C.jsx)(A.a,{show:!0,comingFrom:ue,errorObj:{showError:!0,errMsg:Object(c.translateWithI18Next)(et.text),errDesc:null,firstBtnText:Object(c.translateWithI18Next)(et.cta.label),firstBtnCTA:()=>{ge({type:X,value:{dispositionType:r.Jb.PICKUP}}),xe(Object(O.u)())}}}),!N()(qe)&&Object(C.jsxs)("div",{className:"third-party-delivery-services",children:[Object(C.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(tt.header)}),Object(C.jsx)("div",{className:"third-party-delivery-services__list",children:null===qe||void 0===qe||null===(t=qe.items)||void 0===t?void 0:t.map((e=>{var t,d,s,o,l;const a=null===e||void 0===e?void 0:e.fields;return Object(C.jsxs)("a",{href:null===a||void 0===a?void 0:a.link,target:"_blank",rel:"noreferrer",className:"third-party-delivery-services__service",children:[Object(C.jsx)("span",{className:"third-party-delivery-services__image-container",children:Object(C.jsx)(Y.a,{srcFile:"".concat(g.d.https).concat(null===a||void 0===a||null===(t=a.logo)||void 0===t||null===(d=t.fields)||void 0===d||null===(s=d.file)||void 0===s?void 0:s.url),alt:null===a||void 0===a||null===(o=a.logo)||void 0===o||null===(l=o.fields)||void 0===l?void 0:l.title,className:"third-party-delivery-services__images"})}),Object(C.jsx)("span",{className:"third-party-delivery-services__label",children:null===a||void 0===a?void 0:a.name}),Object(C.jsx)(Y.a,{srcFile:me,alt:"",className:"third-party-delivery-services__image"})]},null===a||void 0===a?void 0:a.name)}))}),Object(C.jsx)("p",{className:"third-party-delivery-services__notice",children:Object(c.translateWithI18Next)(tt.notice)})]})]}),Qe&&!F&&Object(C.jsxs)("div",{className:"delivery-saved-addresses",children:[Object(C.jsx)("div",{className:"placesautocomplete-border"}),Object(C.jsx)(z.a,{show:Qe,savedAddresses:$e,handleSelectAddress:e=>{const t=e||Ze;if(t){var d,s,o,l,a,r,i,n;const e=(null===t||void 0===t?void 0:t.name)||"",c=(null===t||void 0===t?void 0:t.pinCode)||"",u=(null===t||void 0===t||null===(d=t.addressLines)||void 0===d?void 0:d[0])||"",v=(null===t||void 0===t||null===(s=t.addressLines)||void 0===s?void 0:s[1])||"",O=(null===t||void 0===t||null===(o=t.addressLines)||void 0===o?void 0:o[2])||"",b=(null===t||void 0===t||null===(l=t.addressLines)||void 0===l?void 0:l[3])||"",h=(null===t||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a[4])||"",j=(null===t||void 0===t||null===(r=t.addressLines)||void 0===r?void 0:r[5])||"",p=(null===t||void 0===t||null===(i=t.addressLines)||void 0===i?void 0:i[6])||"",m=(null===t||void 0===t||null===(n=t.addressLines)||void 0===n?void 0:n[7])||"";k({...P,addressName:e,apartmentName:h,chome:O,cityTown:v,companyName:p,postalCode:c,prefecture:u,roomNumber:j,streetDetailAddress:b,specialNote:m});const S=st({localizationData:Ge,selectedAddress:P});ze({...Ge,[g.d.selectedStore]:S}),Te(!0)}},shouldMaintainAddressObject:!0,scheduleOrderDateFormat:he})]})]})},re=d(144);const ie=e=>{const{handleClose:t,handleGoBack:d,orderModeTypeItem:s,headerText:l,modalTitleId:a="",className:r,backDataTestId:i}=e;return Object(C.jsx)(o.a.Fragment,{children:Object(C.jsx)(re.a,{"data-testid":"deliveryAddressSearchFormModal",id:"deliveryAddressSearchForm",role:"dialog",modalTitleId:a,show:!0,classNames:"".concat(r," extra-small-modal"),showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:d,modalTitle:l,autoFocus:!0,backDataTestId:i,children:s})})};var ne=d(190),ce=d(52);const ue=(e,t)=>e?Object(c.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.ADD_NEW_ADDRESS):Object(c.translateWithI18Next)(t),ve=e=>{var t;const{contentData:d={},deliverySearchType:O,setDeliverySearchType:b,prefectureAddressScreen:j,closeModal:m=(()=>{}),address:S,modalType:E,updateSetOrderDetails:x,isAddressFromOrderProcessing:T}=e,{CHANGE_SCHEDULE_MODE:N,CURRENT_STORE_INFO:y,DISPOSITION_DATA:I,DISPOSITION_METHOD:_,FAV_STORE_NOT_IN_RADIUS:A,FROM_REORDER_MODAL_OPEN:R,REORDER_MODAL_OPEN:L,REORDER_STORE_CHANGED:P,SCHEDULE_ORDER_DATA:k,SEARCH_ORDER_DATA:F,SET_FIND_A_KFC_VIEW:B,SET_ORDER_NOW:M,SET_REDIRECTION_PATH:H,SET_SCHEDULE_ORDER:W,SCHEDULE_ORDER_CLICKED:U,SHOW_SCHEDULE_DISPOSITION:Y}=n.a,{NAME_EXIST_ERROR:G}=ne.b,{CONFIG_SEARCH_SCREEN:z,CURRENT_STORE_INFO_STORAGE:X,DISPOSITION_TYPE:q,RENDER_COMP:$,SET_CART_CLEAR:Q,SELECTED_ADDRESS:Z}=r.gd,{POSTAL_CODE_CONTENTFUL:ee,CHOMES_CONTENTFUL:te,DROPOFF_ADDRESS:de}=a.b,{ENABLE_ADDRESS_LOCALISATION:se,SHOW_MAP_VIEW_BUTTON:oe}=ce.a,le=Object(l.b)(),{userOrderState:re,userOrderStateDispatch:ve}=Object(s.useContext)(i.a),{dispositionStateData:Oe,searchStoreData:be,scheduleOrderData:he}=re,{changeFlow:je=!1}=he||{},{dispositionType:pe=localStorage.getItem(q)}=Oe||"",{componentOptions:me,tenantId:Se,isUberServiceableEnabled:Ee}=Object(l.c)((e=>e.tenantReducer||{})),{savedAddresses:ge}=Object(l.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),xe=null===me||void 0===me||null===(t=me.web)||void 0===t?void 0:t.dispositionConfig,{searchStoreModalContent:fe={}}=d,{formContent:Te={}}=fe,[Ne,ye]=Object(s.useState)(!1),{configSearchScreen:De=localStorage.getItem(z)}=be,Ce="".concat(null===pe||void 0===pe?void 0:pe.toUpperCase(),"_").concat(De),Ie=Object(h.Sd)(null===re||void 0===re?void 0:re.dispositionNew)?JSON.parse(localStorage.getItem(r.gd.DISPOSITION_NEW)):null===re||void 0===re?void 0:re.dispositionNew,[_e,Ae]=o.a.useState(null===S||void 0===S?void 0:S.name),[Re,Le]=o.a.useState(!1),[we,Pe]=Object(s.useState)(!1),{modalHeaderTitle:ke,shouldShowDisposition:Fe,shouldShowSearchStore:Be}={...null===v.b||void 0===v.b?void 0:v.b[Ce],...null===xe||void 0===xe?void 0:xe[Ce]},Me=ke,{storesWithStatus:He=[],deliveryLocalization:We=null,isDeliveryLocalizationLoading:Ue=!0,isStoreStatusLoading:Ve=!1,storesSatusError:Ye=!1}=Object(l.c)((e=>e.storesReducer||{})),[Ge,ze]=Object(s.useState)(p.f),Ke=Object(J.a)(),Je=Object(s.useCallback)((e=>{var t;Ee&&Object(p.e)(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.deliveryPartner)?(ve({type:k,value:{showScheduleOrderCatering:!1,store:e}}),ve({type:F,value:{showSearchStore:!0,configSearchScreen:v.a}}),ve({type:B,value:{findAKFC:!1}}),ve({type:Y,value:{showSheduleDisposition:!1}}),ve({type:y,value:e}),ve({type:N,value:{changeScheduleModeFlag:!1}}),ve({type:U,value:{scheduleModeClicked:!1}}),ve({type:M,value:{showOrderNow:!1}}),ve({type:W,value:{showScheduleOrder:!1}}),ve({type:A,value:{showNotInRadiusError:!1}}),ve({type:se,value:!1}),ve({type:oe,value:!0})):(ve({type:k,value:{showScheduleOrderCatering:!0,store:e}}),ve({type:F,value:{showSearchStore:!1}}),ve({type:Y,value:{showSheduleDisposition:!0}}),ve({type:y,value:e}),ve({type:N,value:{changeScheduleModeFlag:!1}}),ve({type:U,value:{scheduleModeClicked:!0}}),ve({type:M,value:{showOrderNow:!1}}),ve({type:W,value:{showScheduleOrder:!0}}),ve({type:A,value:{showNotInRadiusError:!1}})),localStorage.setItem(X,JSON.stringify(e))}),[N,y,X,A,U,k,F,M,W,Y,ve]);Object(s.useEffect)((()=>{He.length>0&&Ne&&!Ve&&Je(He[0])}),[pe,Ne,Ve,Je,He]);const Xe=Object(s.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),localStorage.removeItem(Q),localStorage.setItem($,!0),je||ve({type:k,value:{selectedAddress:{}}}),x&&x({isOpenSaveDeliveryAddressModal:!1}),ve({type:I,value:{showDisposition:!1}}),ve({type:_,value:{dispositionType:null===Ie||void 0===Ie?void 0:Ie.type}}),ve({type:F,value:{showSearchStore:!1}}),ve({type:H,value:{redirectionOrder:""}}),ve({type:L,value:{reorderModalOpen:!1}}),ve({type:R,value:{fromReorderFlag:!1}}),ve({type:P,value:{storeChanged:!1}}),ve({type:B,value:{findAKFC:window.location.pathname===r.Ce.FIND_STORE}}),m()}),[je,I,_,null===Ie||void 0===Ie?void 0:Ie.type,R,$,L,P,k,F,Q,B,H,ve]);Object(s.useEffect)((()=>{const e=e=>{27===e.keyCode&&Xe(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[Xe]);const qe=Object(C.jsxs)("div",{className:"address-field-container",children:[j&&Object(C.jsx)("div",{className:"name-field",children:Object(C.jsx)(V.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:"name",placeholder:Object(c.translateWithI18Next)(null===D.a||void 0===D.a?void 0:D.a.ADDRESS_NICK_NAME),value:_e,onChange:e=>Ae(e.target.value),onBlur:e=>{const t=ge.some((t=>t.name===e.target.value));Pe(!!t)},maxlength:10,errorIcon:w.a.Error,errorIconClassName:"flex-div",helperText:Object(c.translateWithI18Next)(G),helperTextClassName:"error-text",error:we})}),Object(C.jsx)(ae,{changeFlow:je,formContent:Te,dispositionType:null===pe||void 0===pe?void 0:pe.toUpperCase(),deliveryLocalizationData:We,getStoreData:e=>{ye(!0);const[t]=e,d=Object(h.Mb)(pe.toUpperCase()),s=[{id:t}];Object(p.a)(s,d,le,Se)},saveAddressData:(e,t,d)=>{const[s,o,l]=d,a={...Ge,chomeId:o,cityId:String(l)};localStorage.setItem(de,JSON.stringify(e)),localStorage.setItem(Z,JSON.stringify(a)),Ke(Object(K.d)({key:null===r.se||void 0===r.se?void 0:r.se.SELECTED_ADDRESS,value:a})),ve({type:k,value:{deliveryAddress:e,deliveryAddressLine:t,selectedAddress:a,storeId:s}})},selectedAddress:Ge,setSelectedAddress:ze,deliverySearchType:O,onDeliveryTypeChanged:e=>{b(e)},isDeliveryLocalizationLoading:Ue,storesStatusError:Ye,prefectureAddressScreen:j,addressName:_e,address:S,modalType:E,isPrimaryAddress:Re,closeModal:m,isAccount:!0,addressNameExist:we,updateSetOrderDetails:x,isAddressFromOrderProcessing:T}),j&&Object(C.jsxs)("div",{className:"default-address-section",children:[Object(C.jsx)("input",{type:"checkbox",name:"isPrimary","data-testid":"default-testid",id:"default-address",value:Re,defaultChecked:(()=>{const e=!(null!==ge&&void 0!==ge&&ge.length)&&!E;return(null===S||void 0===S?void 0:S.isPrimary)||e})(),onChange:()=>Le(!Re),disabled:ge.length<1||E&&ge.length<=1}),Object(C.jsx)("div",{className:"default-label-text",children:Object(C.jsx)("label",{htmlFor:"default-address",children:Object(c.translateWithI18Next)(r.hd)})})]})]});return Object(s.useEffect)((()=>{le(Object(u.b)());const e=(null===O||void 0===O?void 0:O.id)===g.d.postalCode?ee:te;le(Object(f.e)(e))}),[le,null===O||void 0===O?void 0:O.id,ee,te]),Object(s.useEffect)((()=>{!Ue&&We&&le(Object(u.a)())}),[Ue,We,le]),Object(C.jsx)(ie,{handleClose:Xe,orderModeTypeItem:qe,headerText:ue(j,Me),handleGoBack:e=>{e.stopPropagation(),e.preventDefault(),ve({type:I,value:{showDisposition:Fe}}),je||ve({type:k,value:{selectedAddress:{}}}),ve({type:F,value:{showSearchStore:Be,configSearchScreen:v.a,searchedPlaceNonLocalized:null===be||void 0===be?void 0:be.searchedPlaceNonLocalized}})},modalTitleId:"delivery-address-search-form",className:"search-store-global-container",backDataTestId:"back-btn-global-modal-id"})};ve.defaultProps=a.a;t.default=ve}}]);