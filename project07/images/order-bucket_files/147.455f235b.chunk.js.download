(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[147],{1016:function(e,t,r){"use strict";r.r(t);var l=r(3),i=r(28),a=r(62),d=r(332),o=r(210),n=r(1290),c=r(4),s=r(6),u=r(0),v=r(2);t.default=e=>{var t,r;const O=Object(i.b)(),{tenantReducer:p,orderHistoryReducer:h,profileReducer:k,appStateReducer:b}=Object(i.c)((e=>e)),S=localStorage.getItem("guestActiveOrders");let T;try{T=JSON.parse(S)}catch(E){T=[]}const j=Object(a.h)(),[D,g]=Object(l.useState)({trackOrderTitle:"",trackOrderButtonLabel:"",isActiveOrderAvailable:!1,useHistoryHook:{history:Object(a.g)()},dispatchGetActiveOrderHistoryTimer:null,dispatch:O,props:e,customerId:null,tenantId:null,postActiveOrderHistoryDetailsList:[],customer:null,showBlackStripWithOrderTracker:!1,showPickupOrderCancelledBanner:!1,pickupOrderCancelledTitle:Object(s.translateWithI18Next)(null===c.a||void 0===c.a?void 0:c.a.PICKUP_CANCALLED_ORDER),pickupOrderCancelledButtonLabel:Object(s.translateWithI18Next)(null===c.a||void 0===c.a?void 0:c.a.ORDER_HISTORY_TAG)}),H=Object(l.useCallback)((e=>{g&&g((t=>({...t,...e})))}),[]);return Object(l.useEffect)((()=>(Object(n.a)({headerTrackDetails:D,updateSetHeaderTrackDetails:H}),O(Object(d.e)()),()=>Object(n.a)({headerTrackDetails:D,updateSetHeaderTrackDetails:H}))),[]),Object(l.useEffect)((()=>{var e,t,r,l,i,a;Object(n.a)({headerTrackDetails:D,updateSetHeaderTrackDetails:H}),(null===p||void 0===p?void 0:p.tenantId)&&H({customerId:null===k||void 0===k?void 0:k.customerId,customer:null===k||void 0===k?void 0:k.basic,tenantId:null===p||void 0===p?void 0:p.tenantId,userStatus:null===b||void 0===b?void 0:b.userStatus,showBlackStripWithOrderTracker:null===p||void 0===p||null===(e=p.componentOptions)||void 0===e||null===(t=e.web)||void 0===t||null===(r=t.global)||void 0===r?void 0:r.showBlackStripWithOrderTracker,enableGlobalOrderTracking:null===p||void 0===p||null===(l=p.componentOptions)||void 0===l||null===(i=l.web)||void 0===i||null===(a=i.orderPages)||void 0===a?void 0:a.enableGlobalOrderTracking})}),[null===k||void 0===k?void 0:k.customerId,null===p||void 0===p?void 0:p.tenantId,null===b||void 0===b?void 0:b.userStatus]),Object(l.useEffect)((()=>{Object(n.b)({headerTrackDetails:D})}),[null===D||void 0===D?void 0:D.customerId,null===D||void 0===D?void 0:D.tenantId,null===j||void 0===j?void 0:j.pathname]),Object(l.useEffect)((()=>{var t,r,l;if(null!==D&&void 0!==D&&null!==(t=D.userStatus)&&void 0!==t&&t.loggedIn&&h&&null!==h&&void 0!==h&&h.activeOrderHistory&&(null===h||void 0===h||!h.activeOrderHistoryLoading)&&(null===h||void 0===h||null===(r=h.activeOrderHistory)||void 0===r?void 0:r.length)>0||(null===(l=T)||void 0===l?void 0:l.length)>0){var i;const t=(null===(i=T)||void 0===i?void 0:i.length)>0?T:null===h||void 0===h?void 0:h.activeOrderHistory,r=Object(n.f)(t);(null===r||void 0===r?void 0:r.length)>0&&!1===(null===D||void 0===D?void 0:D.showBlackStripWithOrderTracker)?e.setShowBlackStripeContent(!1):0===(null===r||void 0===r?void 0:r.length)&&!1===(null===D||void 0===D?void 0:D.showPickupOrderCancelledBanner)&&e.setShowBlackStripeContent(!0),H({postActiveOrderHistoryDetailsList:r})}}),[null===h||void 0===h?void 0:h.activeOrderHistory,null===D||void 0===D||null===(t=D.userStatus)||void 0===t?void 0:t.loggedIn]),Object(l.useEffect)((()=>{!sessionStorage.getItem(u.Ne.PICKUP_ORDER_CANCELLED)||(null===j||void 0===j?void 0:j.pathname)!==u.Ce.HOME&&(null===j||void 0===j?void 0:j.pathname)!==u.Ce.HOME_PAGE||(H({showPickupOrderCancelledBanner:!0}),!1===(null===D||void 0===D?void 0:D.showBlackStripWithOrderTracker)&&e.setShowBlackStripeContent(!1))}),[null===D||void 0===D?void 0:D.showBlackStripWithOrderTracker]),Object(l.useEffect)((()=>{Object(n.e)({headerTrackDetails:D,location:j,updateSetHeaderTrackDetails:H,props:e})}),[null===j||void 0===j?void 0:j.pathname]),Object(l.useEffect)((()=>{var e,t;(null===(e=T)||void 0===e?void 0:e.length)>0?setTimeout((()=>{Object(n.d)({headerTrackDetails:D,updateSetHeaderTrackDetails:H,activeOrderArray:T})}),1e3):null!==D&&void 0!==D&&null!==(t=D.userStatus)&&void 0!==t&&t.loggedIn&&Object(n.d)({headerTrackDetails:D,updateSetHeaderTrackDetails:H,activeOrderArray:T})}),[null===D||void 0===D?void 0:D.postActiveOrderHistoryDetailsList]),((null===D||void 0===D?void 0:D.isActiveOrderAvailable)||(null===D||void 0===D?void 0:D.showPickupOrderCancelledBanner)||(null===(r=T)||void 0===r?void 0:r.length)>0)&&(I={headerTrackDetails:D,updateSetHeaderTrackDetails:H,activeOrderArray:T},Object(v.jsx)(o.a,{...I,testId:"app_header_order_tracker_view",importPath:"APP_HEADER_ORDER_TRACKER_VIEW"}));var I}}}]);