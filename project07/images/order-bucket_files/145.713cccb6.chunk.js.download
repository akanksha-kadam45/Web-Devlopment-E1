(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[145],{969:function(o,e,i){"use strict";i.r(e),i.d(e,"getDistanceByLatLong",(function(){return c})),i.d(e,"getGeoCodeByAddress",(function(){return p})),i.d(e,"getGeoLatLngByGeoCode",(function(){return m})),i.d(e,"getGeoLatLngByAddress",(function(){return L})),i.d(e,"GoogleMap",(function(){return S}));var l,n,t,r,a=i(3),d=i.n(a),s=i(15),u=i(46),v=i(24),g=i(2);const c=o=>{var e,i;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps){const e=new window.google.maps.DistanceMatrixService;return new Promise(((i,l)=>{e.getDistanceMatrix({origins:[f(null===o||void 0===o?void 0:o.origins)],destinations:[f(null===o||void 0===o?void 0:o.destinations)],travelMode:(null===o||void 0===o?void 0:o.travelMode)||window.google.maps.TravelMode.DRIVING,unitSystem:(null===o||void 0===o?void 0:o.unitSystem)||window.google.maps.UnitSystem.METRIC,avoidHighways:(null===o||void 0===o?void 0:o.avoidHighways)||!1,avoidTolls:(null===o||void 0===o?void 0:o.avoidTolls)||!1},((o,e)=>{var n,t,r,a;e!==(null===(n=window)||void 0===n||null===(t=n.google)||void 0===t||null===(r=t.maps)||void 0===r||null===(a=r.GeocoderStatus)||void 0===a?void 0:a.OK)&&l(e),console.debug(o);const d=[];null===o||void 0===o||o.rows.forEach(((e,i)=>{var l,n,t,r,a;return d.push({destinationAddresses:null===o||void 0===o||null===(l=o.destinationAddresses)||void 0===l?void 0:l[i],originAddresses:null===o||void 0===o||null===(n=o.originAddresses)||void 0===n?void 0:n[i],distance:null===e||void 0===e||null===(t=e.elements)||void 0===t?void 0:t[0].distance,duration:null===e||void 0===e||null===(r=e.elements)||void 0===r?void 0:r[0].duration,status:null===e||void 0===e||null===(a=e.elements)||void 0===a?void 0:a[0].status})})),i(d)}))}))}},p=o=>{var e,i;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps){const e=new window.google.maps.Geocoder;return new Promise(((i,l)=>{e.geocode({address:o},((o,e)=>{var n,t,r,a;e!==(null===(n=window)||void 0===n||null===(t=n.google)||void 0===t||null===(r=t.maps)||void 0===r||null===(a=r.GeocoderStatus)||void 0===a?void 0:a.OK)&&l(e),i(o)}))}))}return null},m=o=>{var e,i;return null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&o?new Promise(((e,i)=>{try{var l;const i=Array.isArray(o)?o[0]:o;e(null===i||void 0===i||null===(l=i.geometry)||void 0===l?void 0:l.location)}catch(n){i(n)}})):null},L=async o=>{const e=await p(o);return await m(e)},M=o=>{var e,i,l,n;(null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps)&&(null===o||void 0===o||null===(l=o.gMapDetails)||void 0===l||null===(n=l.gMapInstance)||void 0===n||n.setCenter(new window.google.maps.LatLng(null===o||void 0===o?void 0:o.latLng)))},w=(o,e)=>{var i;return null===(i=f(o))||void 0===i?void 0:i.equals(f(e))},f=o=>{var e,i;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&o){const e="string"===typeof o?null===o||void 0===o?void 0:o.split(","):o;if(null!==Array&&void 0!==Array&&Array.isArray(e))return new window.google.maps.LatLng(e[0],e[1]);if("object"===typeof e)return null!==e&&void 0!==e&&e.latitude&&null!==e&&void 0!==e&&e.longitude?new window.google.maps.LatLng(null===e||void 0===e?void 0:e.latitude,null===e||void 0===e?void 0:e.longitude):new window.google.maps.LatLng(e)}return o},k=o=>{var e,i,l,n,t,r;const{gMapDetails:a,directionsPolyline:d,origin:s,destination:u,isRaiderTracker:v}=o,{raiderDirectionsService:g}=a;null===g||void 0===g||null===(e=g.route({origin:s,destination:u,travelMode:null===(l=window)||void 0===l||null===(n=l.google)||void 0===n||null===(t=n.maps)||void 0===t||null===(r=t.TravelMode)||void 0===r?void 0:r.DRIVING}))||void 0===e||null===(i=e.then((o=>{var e,i,l,n,t,r;null!==o&&void 0!==o&&null!==(e=o.routes)&&void 0!==e&&e[0]&&(null===d||void 0===d||d.setPath(null===o||void 0===o||null===(i=o.routes)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.overview_path),v&&(null===a||void 0===a||null===(n=a.gMapInstance)||void 0===n||n.fitBounds(null===o||void 0===o||null===(t=o.routes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.bounds)))})))||void 0===i||i.catch((o=>console.debug("Directions request failed due to "+o)))},y=o=>{var e,i;const{gMapDetails:l,animation:n=null,position:t,icon:r,zIndex:a=1}=o,{gMapInstance:d,isMarkerVisible:s}=l;return null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&d?new window.google.maps.Marker({animation:n,position:t,map:d,visible:s,icon:r,zIndex:a}):null},C=o=>{var e,i;const{gMapDetails:l,updateGMapDetails:n}=o,{gMapInstance:t,orderTracking:r,customerLatLng:a,storeLatLng:d,raiderCurrentLatLng:u,raiderCurrentMarker:v,raiderDirectionsPolyline:g,raiderLatLngList:c}=l;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&t&&r&&a&&d&&u){var p,m,L,M;if(n({raiderLatLngList:[...c,u]}),w(d,u)||(o=>{var e,i;const{gMapInstance:l,orderTracking:n,raiderPastCurrentLatLng:t,raiderCurrentLatLng:r,raiderPastStrokeColor:a,raiderPastStrokeWeight:d,raiderPastStrokeOpacity:s}=null===o||void 0===o?void 0:o.gMapDetails;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&l&&n){const e=new window.google.maps.Polyline({strokeColor:a,strokeWeight:d,strokeOpacity:s,map:l});k({gMapDetails:null===o||void 0===o?void 0:o.gMapDetails,directionsPolyline:e,origin:t,destination:r})}})({gMapDetails:l,updateGMapDetails:n}),k({gMapDetails:l,directionsPolyline:g,origin:u,destination:a,isRaiderTracker:!0}),null!==v)null===v||void 0===v||v.setPosition(u);else n({raiderCurrentMarker:y({gMapDetails:l,position:u,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerRaider,zIndex:5,animation:null===(p=window)||void 0===p||null===(m=p.google)||void 0===m||null===(L=m.maps)||void 0===L||null===(M=L.Animation)||void 0===M?void 0:M.DROP})});n({raiderPastCurrentLatLng:u})}},b=async o=>{if(await(async()=>(await v.b.BindLocation(),v.b.address&&v.b.coordinates))()){const{longitude:e,latitude:i}=v.b.coordinates;M({gMapDetails:o,latLng:{lat:i,lng:e}})}},S=o=>{var e,i;const l=d.a.createRef(),[n,t]=Object(a.useState)(D),r=Object(a.useCallback)((o=>{t&&t((e=>({...e,...o})))}),[]);return Object(a.useEffect)((()=>{var o,e;if(null!==(o=window)&&void 0!==o&&null!==(e=o.google)&&void 0!==e&&e.maps&&l&&(null===n||void 0===n||!n.gMapInstance)){var i,t,a,d;console.debug("GoogleMap - useEffect Map => ");const o=(o=>{var e,i;const{gMapContainerRef:l,gMapDetails:n}=o;if(null!==(e=window)&&void 0!==e&&null!==(i=e.google)&&void 0!==i&&i.maps&&l){const{center:o,disableDefaultUI:e,fullscreenControl:i,zoomControl:t,gestureHandling:r,zoom:a,minZoom:d,maxZoom:s,mapTypeId:u,panControl:v,rotateControl:g,scaleControl:c,stylers:p}=n;return new window.google.maps.Map(null===l||void 0===l?void 0:l.current,{mapTypeId:u,center:o,disableDefaultUI:e,fullscreenControl:i,zoom:a,zoomControl:t,gestureHandling:r,minZoom:d,maxZoom:s,panControl:v,rotateControl:g,scaleControl:c,styles:p})}})({gMapContainerRef:l,gMapDetails:n});null===(i=window)||void 0===i||null===(t=i.google)||void 0===t||null===(a=t.maps)||void 0===a||null===(d=a.event)||void 0===d||d.addListenerOnce(o,"tilesloaded",(()=>{console.debug("GoogleMap - useEffect Map => tilesloaded"),r({mapRenderCompleted:!0,gMapInstance:o,raiderDirectionsService:new window.google.maps.DirectionsService})}))}}),[null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps]),Object(a.useEffect)((()=>{console.debug("GoogleMap - useEffect gMapInstance => "),(null===n||void 0===n?void 0:n.gMapInstance)&&(async(o,e)=>{const{orderTracking:i=!1,storeAddress:l=null,storeLatLng:n=null,customerAddress:t=null,customerLatLng:r=null}=o;let a={orderTracking:i};if(l){const o=await L(l);a={...a,storeLatLng:o,raiderPastCurrentLatLng:o,storeAddress:l}}if(n&&(a={...a,storeLatLng:f(n),raiderPastCurrentLatLng:f(n),storeAddress:l}),t){const o=await L(t);a={...a,customerLatLng:o,customerAddress:t}}r&&(a={...a,customerLatLng:f(r),customerAddress:t}),e(a)})(o,r)}),[null===n||void 0===n?void 0:n.gMapInstance]),Object(a.useEffect)((()=>{console.debug("GoogleMap - useEffect mapTypeId => "),(null===n||void 0===n?void 0:n.gMapInstance)&&(o=>{var e,i,l,n,t,r,a;(null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps)&&(null===o||void 0===o||null===(l=o.gMapInstance)||void 0===l||l.setMapTypeId(null===(n=window)||void 0===n||null===(t=n.google)||void 0===t||null===(r=t.maps)||void 0===r||null===(a=r.MapTypeId)||void 0===a?void 0:a[null===o||void 0===o?void 0:o.mapTypeId]))})(n)}),[null===n||void 0===n?void 0:n.mapTypeId]),Object(a.useEffect)((()=>{console.debug("GoogleMap - useEffect props mapTypeId => "),r({mapTypeId:null===o||void 0===o?void 0:o.mapTypeId})}),[null===o||void 0===o?void 0:o.mapTypeId]),Object(a.useEffect)((()=>{const{gMapInstance:o,orderTracking:e,customerLatLng:i,mapRenderCompleted:l}=n;o&&e&&i&&l&&(console.debug("GoogleMap - useEffect customer LatLng => "),y({gMapDetails:n,position:i,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerCustomer}),M({gMapDetails:n,latLng:i}))}),[null===n||void 0===n?void 0:n.customerLatLng]),Object(a.useEffect)((()=>{const{gMapInstance:o,orderTracking:e,storeLatLng:i,mapRenderCompleted:l}=n;o&&e&&i&&l&&(console.debug("GoogleMap - useEffect store LatLng => "),y({gMapDetails:n,position:i,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerKFC}),M({gMapDetails:n,latLng:i}))}),[null===n||void 0===n?void 0:n.storeLatLng]),Object(a.useEffect)((()=>{const{gMapInstance:o,orderTracking:e,customerLatLng:i,storeLatLng:l,mapRenderCompleted:t}=n;console.debug("GoogleMap - useEffect store & customer LatLng => "),o&&e&&i&&l&&t&&(o=>{var e,i,l,n;const{gMapInstance:t,orderTracking:r,customerLatLng:a,storeLatLng:d,raiderStrokeColor:s,raiderStrokeWeight:u,raiderStrokeOpacity:v}=null===o||void 0===o?void 0:o.gMapDetails;if(console.debug("GoogleMap setRaiderDirectionsServicePolyline - ",null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps,t,r),null!==(l=window)&&void 0!==l&&null!==(n=l.google)&&void 0!==n&&n.maps&&t&&r){const e=new window.google.maps.Polyline({strokeColor:s,strokeWeight:u,strokeOpacity:v,map:t});null===o||void 0===o||o.updateGMapDetails({raiderDirectionsPolyline:e}),k({gMapDetails:null===o||void 0===o?void 0:o.gMapDetails,directionsPolyline:e,origin:d,destination:a,isRaiderTracker:!1})}})({gMapDetails:n,updateGMapDetails:r})}),[null===n||void 0===n?void 0:n.customerLatLng,null===n||void 0===n?void 0:n.storeLatLng]),Object(a.useEffect)((()=>{const{gMapInstance:e,orderTracking:i,mapRenderCompleted:l}=n;console.debug("GoogleMap - useEffect props raiderCurrentLatLng => ",null===o||void 0===o?void 0:o.raiderCurrentLatLng),e&&i&&(null===o||void 0===o?void 0:o.raiderCurrentLatLng)&&l&&r({raiderCurrentLatLng:f(null===o||void 0===o?void 0:o.raiderCurrentLatLng)})}),[null===n||void 0===n?void 0:n.mapRenderCompleted,null===o||void 0===o?void 0:o.raiderCurrentLatLng]),Object(a.useEffect)((()=>{console.debug("GoogleMap - useEffect raiderCurrentLatLng => ",null===n||void 0===n?void 0:n.raiderCurrentLatLng),(null===n||void 0===n?void 0:n.mapRenderCompleted)&&C({gMapDetails:n,updateGMapDetails:r})}),[null===n||void 0===n?void 0:n.raiderCurrentLatLng]),Object(a.useEffect)((()=>{const{isMobile:e=(null===D||void 0===D?void 0:D.isMobile),isMarkerVisible:i=(null===D||void 0===D?void 0:D.isMarkerVisible),orderTracking:l=(null===D||void 0===D?void 0:D.orderTracking),raiderPastStrokeColor:n=(null===D||void 0===D?void 0:D.raiderPastStrokeColor),raiderPastStrokeWeight:t=(null===D||void 0===D?void 0:D.raiderPastStrokeWeight),raiderPastStrokeOpacity:a=(null===D||void 0===D?void 0:D.raiderPastStrokeOpacity),raiderStrokeColor:d=(null===D||void 0===D?void 0:D.raiderStrokeColor),raiderStrokeWeight:s=(null===D||void 0===D?void 0:D.raiderStrokeWeight),raiderStrokeOpacity:u=(null===D||void 0===D?void 0:D.raiderStrokeOpacity),stylers:v=(null===D||void 0===D?void 0:D.stylers)}=o;console.debug("GoogleMap - useEffect props config => "),r({isMobile:e,isMarkerVisible:i,orderTracking:l,raiderPastStrokeColor:n,raiderPastStrokeWeight:t,raiderPastStrokeOpacity:a,raiderStrokeColor:d,raiderStrokeWeight:s,raiderStrokeOpacity:u,stylers:v})}),[null===o||void 0===o?void 0:o.isMobile,null===o||void 0===o?void 0:o.isMarkerVisible,null===o||void 0===o?void 0:o.orderTracking,null===o||void 0===o?void 0:o.raiderPastStrokeColor,null===o||void 0===o?void 0:o.raiderPastStrokeWeight,null===o||void 0===o?void 0:o.raiderPastStrokeOpacity,null===o||void 0===o?void 0:o.raiderStrokeColor,null===o||void 0===o?void 0:o.raiderStrokeWeight,null===o||void 0===o?void 0:o.raiderStrokeOpacity,null===o||void 0===o?void 0:o.stylers]),Object(a.useEffect)((()=>{var o,e;(null===(o=window)||void 0===o||null===(e=o.google)||void 0===e?void 0:e.maps)&&(null===n||void 0===n?void 0:n.gMapInstance)&&(null===n||void 0===n||n.gMapInstance.setOptions({styles:null===n||void 0===n?void 0:n.stylers}))}),[null===n||void 0===n?void 0:n.gMapInstance,null===n||void 0===n?void 0:n.stylers]),Object(a.useEffect)((()=>{var e,i;const{customerAddress:l=null,customerLatLng:t=null,storeAddress:a=null,storeLatLng:d=null}=o;console.debug("GoogleMap - useEffect Props store & customer LatLng => "),(null===(e=window)||void 0===e||null===(i=e.google)||void 0===i?void 0:i.maps)&&(null===n||void 0===n?void 0:n.mapRenderCompleted)&&(!w(null===n||void 0===n?void 0:n.customerLatLng,t)||!w(null===n||void 0===n?void 0:n.storeLatLng,d))&&r({customerAddress:l,customerLatLng:f(t),storeAddress:a,storeLatLng:f(d)})}),[null===n||void 0===n?void 0:n.mapRenderCompleted,null===o||void 0===o?void 0:o.customerAddress,null===o||void 0===o?void 0:o.customerLatLng,null===o||void 0===o?void 0:o.storeAddress,null===o||void 0===o?void 0:o.storeLatLng]),Object(g.jsxs)("div",{className:"googleMapContPanel",children:[Object(g.jsx)("div",{className:"use-location-icon",children:Object(g.jsx)(u.a,{srcFile:null===s.a||void 0===s.a?void 0:s.a.UseLocationWhiteIcon,alt:"",onClick:()=>b(n),"data-testid":"use-location-icon"})}),Object(g.jsx)("div",{id:"google-map-container",ref:l,className:"googleMapContainer ".concat(null===o||void 0===o?void 0:o.className)})]})};e.default=S;const D={gMapInstance:null,defaultLatLng:[{lat:0,lng:0}],mapRenderCompleted:!1,raiderPastCurrentLatLng:null,raiderCurrentLatLng:null,raiderCurrentMarker:null,raiderDirectionsPolyline:null,raiderDirectionsService:null,raiderLatLngList:[],mapTypeId:null===(l=window)||void 0===l||null===(n=l.google)||void 0===n||null===(t=n.maps)||void 0===t||null===(r=t.MapTypeId)||void 0===r?void 0:r.ROADMAP,center:{lat:0,lng:0},disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!0,zoom:13,gestureHandling:"greedy",minZoom:6,maxZoom:20,panControl:!1,rotateControl:!0,scaleControl:!0,isMobile:!1,isMarkerVisible:!0,orderTracking:!1,customerAddress:null,customerLatLng:null,storeAddress:null,storeLatLng:null,raiderPastStrokeColor:"#202124",raiderPastStrokeWeight:2,raiderPastStrokeOpacity:.8,raiderStrokeColor:"#e4002b",raiderStrokeWeight:4,raiderStrokeOpacity:1,stylers:[]}}}]);